{"version":3,"file":"spreadsheet.js","sources":["../sources/locale.js","../sources/locales/en.js","../sources/views/align.js","../sources/views/border.js","../sources/views/color.js","../node_modules/@xbs/muon/dist/muon.js","../sources/mathematics/methods.js","../sources/views/date.js","../sources/views/dialog.js","../sources/views/form.js","../sources/views/formlate.js","../sources/views/icons.js","../sources/views/list_suggest.js","../sources/operations/undo_group.js","../sources/operations/save.js","../sources/helpers/column_names.js","../sources/toolbar/defaults.js","../sources/operations/styles.js","../sources/helpers/array.js","../sources/operations/formats.js","../sources/mathematics/parser.js","../sources/operations/types.js","../sources/views/suggest_formula.js","../sources/views/button.js","../sources/views/live_editor.js","../sources/views/separator.js","../sources/views/sheets.js","../sources/views/toggle.js","../sources/views/toolbar_title.js","../sources/views/multicheckbox.js","../sources/views/formlist.js","../sources/views/ui.js","../sources/views/series.js","../sources/views/bar.js","../sources/editors/date.js","../sources/editors/richselect.js","../sources/toolbar/actions.js","../sources/toolbar/buttons.js","../sources/toolbar/all_elements.js","../sources/toolbar.js","../sources/toolbar/helpers.js","../sources/operations/column_operations.js","../sources/operations/lock_cell.js","../sources/operations/spans.js","../sources/helpers/conditional.js","../sources/operations/conditional_formats.js","../sources/table.js","../sources/hotkeys.js","../sources/editor.js","../sources/operations/data.js","../sources/sheets.js","../sources/dialogs/common.js","../sources/mathematics/writer.js","../sources/dialogs/imagecell.js","../sources/dialogs/imagetop.js","../sources/dialogs/sparkline.js","../sources/dialogs/ranges.js","../sources/dialogs/dropdown.js","../sources/mathematics/ranges.js","../sources/operations/filter.js","../sources/dialogs/filter.js","../sources/dialogs/format.js","../sources/dialogs/conditional.js","../sources/dialogs/export.js","../sources/dialogs/link.js","../sources/dialogs/print.js","../sources/dialogs/comments.js","../sources/dialogs/sizing.js","../sources/dialogs/index.js","../sources/operations/undo.js","../sources/operations/views.js","../sources/chart.js","../sources/operations/add_row_col.js","../sources/operations/dropdown.js","../sources/operations/clipboard.js","../sources/operations/hide_row_col.js","../sources/operations/resize.js","../sources/operations/selection.js","../sources/helpers/expand_selection.js","../sources/operations/sorting.js","../sources/mathematics/sheets.js","../sources/operations/hide_gridlines.js","../sources/operations/hide_headers.js","../sources/operations/comments.js","../sources/operations/states.js","../sources/operations/import.js","../sources/operations/print.js","../sources/operations/export.js","../sources/operations/load.js","../sources/operations/clear_styles.js","../sources/api/row_col_operations.js","../sources/api/lock_cell.js","../sources/api/freeze.js","../sources/api/hide_gridlines.js","../sources/api/hide_headers.js","../sources/api/hide_rows.js","../sources/api/math.js","../sources/api/operations.js","../sources/api/core.js","../sources/api/save.js","../sources/api/dropdown.js","../sources/api/filter.js","../sources/api/confirm.js","../sources/api/undo.js","../sources/api/number_formats.js","../sources/menu.js","../sources/spreadsheet.js","../sources/context.js","../sources/operations/index.js","../sources/api/index.js"],"sourcesContent":["import en from \"./locales/en\";\nwebix.i18n.spreadsheet = en;","export default {\n\tlabels:{\n\t\t// formats\n\t\t\"common\": \"Common\",\n\t\t\"currency\": \"Currency\",\n\t\t\"number\": \"Number\",\n\t\t\"percent\": \"Percent\",\n\t\t\"date\": \"Date\",\n\t\t\"string\": \"Text\",\n\t\t\"custom-format\": \"Custom\",\n\t\t\"decimal-places\":\"Decimal places\",\n\t\t\"separator\":\"Group separator\",\n\t\t\"negative\":\"Negative number\",\n\t\t\"currency-symbol\":\"Ð¡urrency\",\n\t\t\"date-format\":\"Date format\",\n\t\t\"format-docs\":\"How to create a format\",\n\t\t// titles\n\t\t\"undo-redo\": \"Undo/Redo\",\n\t\t\"font\": \"Font\",\n\t\t\"text\": \"Text\",\n\t\t\"cell\": \"Cell\",\n\t\t\"align\": \"Align\",\n\t\t\"format\": \"Number\",\n\t\t\"column\": \"Column\",\n\t\t\"borders\": \"Borders\",\n\t\t\"px\": \"px\",\n\t\t\"apply\": \"Apply\",\n\t\t// popups and dialogs\n\t\t\"cancel\": \"Cancel\",\n\t\t\"save\": \"Save\",\n\t\t// multisheets\n\t\t\"sheet\": \"Sheet\",\n\t\t// conditions\n\t\t\"conditional-format\": \"Conditional Format\",\n\t\t\"condition\": \"Condition\",\n\t\t\"conditional-style\": \"Style\",\n\t\t\"conditional-operator\": \"Operator\",\n\t\t\"conditional-between\":\"between\",\n\t\t\"conditional-not-equal\":\"not equal\",\n\t\t// ranges\n\t\t\"range\": \"Range\",\n\t\t\"range-title\": \"Named ranges\",\n\t\t\"range-name\": \"Name\",\n\t\t\"range-cells\": \"Range\",\n\t\t\"range-scope\": \"Scope\",\n\t\t\"range-global\": \"Book\",\n\t\t// images\n\t\t\"image-or\": \"or\",\n\t\t\"image-title\": \"Add image\",\n\t\t\"image-upload\": \"Select file for upload\",\n\t\t\"image-url\": \"URL (e.g. http://*)\",\n\t\t// sparklines\n\t\t\"sparkline-title\": \"Add sparkline\",\n\t\t\"sparkline-type\": \"Type\",\n\t\t\"sparkline-range\": \"Range\",\n\t\t\"sparkline-color\": \"Color\",\n\t\t\"sparkline-positive\": \"Positive\",\n\t\t\"sparkline-negative\": \"Negative\",\n\t\t// custom format\n\t\t\"format-title\": \"Set format\",\n\t\t\"format-pattern\": \"Format pattern\",\n\t\t//dropdown\n\t\t\"dropdown-empty\": \"Empty cells\",\n\t\t\"dropdown-title\": \"Add dropdown\",\n\t\t\"dropdown-range\": \"Range\",\n\t\t// confirm\n\t\t\"ok\": \"OK\",\n\t\t// import/export\n\t\t\"import-title\": \"Import\",\n\t\t\"import-not-support\": \"Sorry, your browser does not support import\",\n\t\t\"export-title\": \"Export\",\n\t\t\"export-name\": \"Name of xslx file\",\n\t\t\"export-all-sheets\":\"Export all sheets\",\n\t\t// add link\n\t\t\"link-title\": \"Add Link\",\n\t\t\"link-name\": \"Text\",\n\t\t\"link-url\": \"URL\",\n\t\t//images\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t//charts\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t//conditional format labels\n\t\t\"display\" : \"Display\",\n\t\t\"value\" : \"Value\",\n\t\t// confirm messages\n\t\t\"range-remove-confirm\": \"Are you sure you want to remove the range permanently?\",\n\t\t\"sheet-remove-confirm\": \"Are you sure you want to remove the sheet permanently?\",\n\t\t\"merge-cell-confirm\":\"Only the left top value will remain after merging. Continue?\",\n\t\t\"error-range\": \"The range is incorrect!\",\n\t\t//print\n\t\t\"print\":\"Print\",\n\t\t\"print-title\":\"Before you print..\",\n\t\t\"print-settings\":\"General settings\",\n\t\t\"print-paper\":\"Paper size\",\n\t\t\"print-layout\":\"Layout\",\n\t\t\"current-sheet\":\"Current sheet\",\n\t\t\"all-sheets\":\"All sheets\",\n\t\t\"selection\":\"Selected cells\",\n\t\t\"borderless\":\"Hide gridlines\",\n\t\t\"sheet-names\":\"Show sheet names\",\n\t\t\"skip-rows\":\"Skip empty rows\",\n\t\t\"margin\":\"Hide margins\",\n\t\t\"page-letter\":\"Letter\",\n\t\t\"page-a4\":\"A4 (210x297mm)\",\n\t\t\"page-a3\":\"A3 (297x420mm)\",\n\t\t\"page-width\":\"Page width\",\n\t\t\"page-actual\":\"Actual Size\",\n\t\t\"page-portrait\":\"Portrait\",\n\t\t\"page-landscape\":\"Landscape\",\n\t\t//comment\n\t\t\"comment\":\"Comment\",\n\t\t//resize\n\t\t\"width\":\"Width\",\n\t\t\"height\":\"Height\",\n\t\t\"fit-content\": \"Fit to content\",\n\t\t\"default-size\":\"Reset to default\",\n\t\t//views\n\t\t\"edit-view\":\"Edit\",\n\t\t\"remove-view\":\"Remove\",\n\t\t\"chart-edit\":\"Edit chart\",\n\n\t\t\"chart-common\":\"Common\",\n\t\t\"chart-series\":\"Series\",\n\t\t\"chart-extras\":\"Extras\",\n\n\t\t\"export-view\":\"Download\",\n\t\t\"export-view-pdf\":\"PDF document\",\n\t\t\"export-view-png\":\"PNG image\",\n\t\t\"export-view-excel\":\"Excel file\",\n\n\t\t\"line-chart\":\"Line\",\n\t\t\"area-chart\":\"Area\",\n\t\t\"bar-chart\":\"Bar\",\n\t\t\"donut-chart\":\"Donut\",\n\t\t\"pie-chart\":\"Pie\",\n\t\t\"radar-chart\":\"Radar\",\n\t\t\"spline-chart\":\"Spline\",\n\t\t\"splinearea-chart\":\"Spline Area\",\n\n\t\t\"chart-scale\":\"Scale\",\n\t\t\"chart-x-axis\":\"X axis\",\n\t\t\"chart-y-axis\":\"Y axis\",\n\t\t\"chart-lines\":\"Lines\",\n\t\t\"chart-scale-color\":\"Scale color\",\n\t\t\"chart-xAxis-title\":\"Title\",\n\t\t\"chart-yAxis-title\":\"Title\",\n\t\t\"chart-col-xAxis\":\"Use left column as xAxis\",\n\t\t\"chart-row-xAxis\":\"Use top row as xAxis\",\n\t\t\"chart-xAxis-range\":\"Range\",\n\t\t\"chart-yAxis-origin\":\"Origin\",\n\t\t\"chart-yAxis-start\":\"Start\",\n\t\t\"chart-yAxis-end\":\"End\",\n\t\t\"chart-yAxis-step\":\"Step\",\n\t\t\"chart-yAxis-note\":\"* Set all the following parameters to see the effect\",\n\n\t\t\"chart-legend\":\"Legend\",\n\t\t\"chart-row-legend\":\"Use top row as legend\",\n\t\t\"chart-col-legend\":\"Use left column as legend\",\n\t\t\"chart-legend-range\":\"Legend range\",\n\t\t\"chart-legend-align\":\"Align\",\n\t\t\"chart-legend-left\":\"Left\",\n\t\t\"chart-legend-right\":\"Right\",\n\t\t\"chart-legend-center\":\"Center\",\n\t\t\"chart-legend-valign\":\"Vertical align\",\n\t\t\"chart-legend-top\":\"Top\",\n\t\t\"chart-legend-middle\":\"Middle\",\n\t\t\"chart-legend-bottom\":\"Bottom\",\n\n\t\t\"chart-item\":\"Data\",\n\t\t\"stacked-chart\":\"Stacked\",\n\t\t\"chart-range\":\"Range\",\n\t\t\"chart-series-color\":\"Color\",\n\t\t\"add-line\":\"Add line\",\n\t\t\"chart-type\":\"Type\",\n\t\t\"chart-tooltip\":\"Tooltips\",\n\t\t\"chart-label\":\"Labels\",\n\n\t\t\"chart-data-from\":\"Data series from\",\n\t\t\"chart-columns\":\"columns\",\n\t\t\"chart-rows\":\"rows\",\n\n\t\t\"chart-markers\":\"Markers\",\n\t\t\"chart-markers-square\":\"Square\",\n\t\t\"chart-markers-triangle\":\"Triangle\",\n\t\t\"chart-markers-diamond\":\"Diamond\",\n\t\t\"chart-markers-round\":\"Round\",\n\n\t\t\"chart-pie-text\":\"Show values inside\",\n\t\t\"chart-pie-3d\":\"3D\",\n\n\t\t\"chart-radar-circle\":\"Circled lines\"\n\t},\n\ttooltips: {\n\t\t\"color\": \"Font color\",\n\t\t\"background\": \"Background color\",\n\t\t\"font-family\": \"Font family\",\n\t\t\"font-size\": \"Font size\",\n\t\t\"text-align\": \"Horizontal align\",\n\t\t\"vertical-align\": \"Vertical align\",\n\t\t\"borders\": \"Borders\",\n\t\t\"borders-no\": \"Clear borders\",\n\t\t\"borders-left\": \"Left border\",\n\t\t\"borders-top\": \"Top border\",\n\t\t\"borders-right\": \"Right border\",\n\t\t\"borders-bottom\": \"Bottom border\",\n\t\t\"borders-all\": \"All borders\",\n\t\t\"borders-outer\": \"Outer borders\",\n\t\t\"borders-top-bottom\": \"Top and bottom borders\",\n\t\t\"borders-color\": \"Border color\",\n\t\t\"align-left\": \"Left align\",\n\t\t\"align-center\": \"Center align\",\n\t\t\"align-right\": \"Right align\",\n\t\t\"align-top\": \"Top align\",\n\t\t\"align-middle\": \"Middle align\",\n\t\t\"align-bottom\": \"Bottom align\",\n\t\t\"span\": \"Merge\",\n\t\t\"wrap\": \"Text wrap\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"format\": \"Number format\",\n\t\t\"increase-decimals\":\"Increase decimal places\",\n\t\t\"decrease-decimals\":\"Decrease decimal places\",\n\t\t\"font-weight\": \"Bold\",\n\t\t\"font-style\": \"Italic\",\n\t\t\"text-decoration\": \"Underline\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"freeze-columns\" : \"Freeze/unfreeze columns\",\n\t\t\"add-range\": \"Set name for the selected range\",\n\t\t\"conditional\": \"Conditional formatting\",\n\t\t\"add-sheet\": \"Add Sheet\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"clear\": \"Clear\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"row\": \"Rows\",\n\t\t\"column\": \"Columns\",\n\t\t\"sheet\": \"Sheet\",\n\t\t\"add-image\": \"Image\",\n\t\t\"add-sparkline\": \"Graph\",\n\t\t\"add-comment\": \"Comment\"\n\t},\n\tmenus:{\n\t\t\"remove-sheet\": \"Remove sheet\",\n\t\t\"rename-sheet\": \"Rename sheet\",\n\t\t\"file\": \"File\",\n\t\t\"new\": \"New\",\n\t\t\"new-sheet\": \"New sheet\",\n\t\t\"excel-import\": \"Import from Excel\",\n\t\t\"excel-export\": \"Export to Excel\",\n\t\t\"sheet\": \"Sheets\",\n\t\t\"copy-sheet\": \"Copy to new sheet\",\n\t\t\"edit\": \"Edit\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"columns\": \"Columns\",\n\t\t\"insert-column\": \"Insert column\",\n\t\t\"delete-column\": \"Delete column\",\n\t\t\"show-column\": \"Show column\",\n\t\t\"hide-column\": \"Hide column\",\n\t\t\"resize-column\": \"Resize column\",\n\t\t\"rows\": \"Rows\",\n\t\t\"insert-row\": \"Insert row\",\n\t\t\"delete-row\": \"Delete row\",\n\t\t\"show-row\": \"Show row\",\n\t\t\"hide-row\": \"Hide row\",\n\t\t\"resize-row\": \"Resize row\",\n\t\t\"insert\": \"Insert\",\n\t\t\"conditional-format\": \"Conditional format\",\n\t\t\"common\": \"common\",\n\t\t\"text\": \"text\",\n\t\t\"clear\": \"Clear\",\n\t\t\"clear-value\":\"Values\",\n\t\t\"clear-style\":\"Styles\",\n\t\t\"clear-conditional-formats\":\"Conditional formats\",\n\t\t\"clear-dropdown-editors\":\"Dropdowns and filters\",\n\t\t\"clear-comments\":\"Comments\",\n\t\t\"clear-all\":\"All\",\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t\"data\": \"Data\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"add-range\": \"Named ranges\",\n\t\t\"sort\": \"Sort\",\n\t\t\"sort-asc\": \"Sort A to Z\",\n\t\t\"sort-desc\": \"Sort Z to A\",\n\t\t\"view\": \"View\",\n\t\t\"freeze-columns\": \"Freeze/unfreeze columns\",\n\t\t\"freeze-rows\": \"Freeze/unfreeze rows\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"add-dropdown\": \"Add dropdown\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"print\": \"Print\",\n\t\t\"add-comment\":\"Comment\"\n\t},\n\ttable:{\n\t\t\"math-error\":\"#ERROR!\",\n\t\t\"math-ref-error\":\"#REF!\",\n\t\t\"format-error\":\"INCORRECT FORMAT\"\n\t},\n\tliveEditor:{\n\t\t\"edit\":\"Edit:\"\n\t},\n\tformats:{\n\t\t\"dateFormat\": \"mm/dd/yyyy\",\n\t\t\"timeFormat\": \"hh:mm AM/PM\",\n\t\t\"longDateFormat\": \"dd mmmm yyyy\",\n\t\t\"fullDateFormat\": \"mm/dd/yyyy hh:mm AM/PM\",\n\t\t\"parseDateTime\": \"%m/%d/%Y %G:%i:%s\",\n\t\t\"parseDate\": \"%m/%d/%Y\",\n\t\t\"currencies\": [\n\t\t\t\"{obj} â¬\",\n\t\t\t\"Â¥{obj}\",\n\t\t\t\"R$ {obj}\",\n\t\t\t\"{obj} rub.\"\n\t\t]\n\t}\n};\n","webix.protoUI({\n\tname: \"ssheet-align\",\n\t$cssName:\"richselect\",\n\t$init: function(config){\n\t\tconfig.options =  {\n\t\t\tview:\"datasuggest\",\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-icons\",\n\t\t\t\ttooltip: {\n\t\t\t\t\ttemplate:\"#tooltip#\"\n\t\t\t\t},\n\t\t\t\txCount:3, yCount:1\n\t\t\t},\n\t\t\tdata: config.data\n\t\t};\n\t}\n},webix.ui.richselect);","webix.protoUI({\n\tname: \"ssheet-borders-suggest\",\n\tdefaults:{\n\t\twidth: 300\n\t},\n\t$init: function(config){\n\t\tconfig.body = {\n\t\t\tmargin: 6,\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-icons\", scroll: false, select: true,\n\t\t\t\t\txCount: 4,\n\t\t\t\t\tyCount: 2,\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\treturn webix.i18n.spreadsheet.tooltips[\"borders-\"+obj.id];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonAfterSelect: function(){\n\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView();\n\t\t\t\t\t\t\tsuggest.updateMasterValue(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\tvar css = \"webix_ssheet_button_icon webix_ssheet_icon ssi-borders-\"+obj.value;\n\t\t\t\t\t\treturn \"<span class='\"+css+\"'></span>\";\n\t\t\t\t\t},\n\t\t\t\t\tdata: config.data\n\t\t\t\t},\n\t\t\t\t{ view: \"ssheet-separator\"},\n\t\t\t\t{\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{ view: \"ssheet-color\", css: config.css, name: config.name, width: 68,\n\t\t\t\t\t\t\tvalue: webix.skin.$name == \"contrast\" ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"borders-color\"],\n\t\t\t\t\t\t\ttitle: \"<span class='webix_icon wxi-pencil'></span>\",\n\t\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView().getParentView();\n\t\t\t\t\t\t\t\t\tsuggest.updateMasterValue(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"richselect\", css:\"webix_ssheet_border_type\", value:\"thin\", suggest:{\n\t\t\t\t\t\t\t\tfitMaster:false,\n\t\t\t\t\t\t\t\twidth:130,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\ttemplate:\"<div class='webix_ssheet_border webix_ssheet_border_#id#'></div>\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata:[\n\t\t\t\t\t\t\t\t\t{ id:\"thin\" },\n\t\t\t\t\t\t\t\t\t{ id:\"medium\" },\n\t\t\t\t\t\t\t\t\t{ id:\"thick\" },\n\t\t\t\t\t\t\t\t\t{ id:\"dashed\" }, \n\t\t\t\t\t\t\t\t\t{ id:\"dotted\" },\n\t\t\t\t\t\t\t\t\t{ id:\"double\" }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ }\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t]\n\t\t};\n\t},\n\tupdateMasterValue: function(hide){\n\t\tvar value = this.getValue();\n\t\tvar master = webix.$$(this.config.master);\n\t\tmaster.setValue(value);\n\t\tif(hide)\n\t\t\tthis.hide();\n\t},\n\tsetValue: function(value){\n\t\tif(value[0])\n\t\t\tthis.getList().select(value[0]);\n\t\tif(value[1])\n\t\t\tthis.getColorView().setValue(value[1]);\n\t\tif(value[2])\n\t\t\tthis.getTypeView().setValue(value[2]);\n\t},\n\tgetValue: function(){\n\t\treturn [this.getList().getSelectedId(), this.getColorView().getValue()||\"\", this.getTypeView().getValue()||\"\"];\n\t},\n\tgetList: function(){\n\t\treturn this.getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[0];\n\t},\n\tgetTypeView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[1];\n\t},\n\tgetItemText:function(){\n\t\treturn \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-borders-all'>\";\n\t}\n},webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-borders\",\n\t$cssName: \"richselect\",\n\t$init: function(config){\n\t\tconfig.options = {\n\t\t\tview: \"ssheet-borders-suggest\",\n\t\t\tfitMaster: false,\n\t\t\tdata: config.data\n\t\t};\n\n\t\tthis.$ready.push(webix.bind(function(){\n\t\t\tthis.getPopup().config.master = this.config.id;\n\t\t},this));\n\n\t},\n\tsetValue: function(value){\n\t\tif(webix.isArray(value)){\n\t\t\tif(!this.config.value || value[0] !=  this.config.value[0] || value[1] !=  this.config.value[1]){\n\t\t\t\tthis.getPopup().setValue(value);\n\t\t\t}\n\t\t\tthis.config.value = value;\n\t\t\tif (value[0])\n\t\t\t\tthis.callEvent(\"onChange\");\n\t\t}\n\t\treturn value;\n\t},\n\tgetValue: function(){\n\t\treturn  this.getPopup().getValue().join(\",\");\n\t},\n\tgetList: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[1].getChildViews()[0];\n\t}\n},webix.ui.richselect);","// toolbar: color selector\nwebix.protoUI({\n\t$cssName: \"colorboard\",\n\tname: \"ssheet-colorboard\",\n\tdefaults:{\n\t\theight:202,\n\t\twidth:220,\n\t\tcss: \"webix_ssheet_colorboard\",\n\t\ttype:\"classic\",\n\t\tpalette: [\n\t\t\t[\"#000000\", \"#434343\", \"#666666\", \"#999999\", \"#b7b7b7\", \"#cccccc\", \"#d9d9d9\", \"#efefef\", \"#f3f3f3\", \"#ffffff\"],\n\t\t\t[\"#980000\", \"#ff0000\", \"#ff9900\", \"#ffff00\", \"#00ff00\", \"#00ffff\", \"#4a86e8\", \"#0000ff\", \"#9900ff\", \"#ff00ff\"],\n\t\t\t[\"#e6b8af\", \"#f4cccc\", \"#fce5cd\", \"#fff2cc\", \"#d9ead3\", \"#d0e0e3\", \"#c9daf8\", \"#cfe2f3\", \"#d9d2e9\", \"#ead1dc\"],\n\t\t\t[\"#dd7e6b\", \"#ea9999\", \"#f9cb9c\", \"#ffe599\", \"#b6d7a8\", \"#a2c4c9\", \"#a4c2f4\", \"#9fc5e8\", \"#b4a7d6\", \"#d5a6bd\"],\n\t\t\t[\"#cc4125\", \"#e06666\", \"#f6b26b\", \"#ffd966\", \"#93c47d\", \"#76a5af\", \"#6d9eeb\", \"#6fa8dc\", \"#8e7cc3\", \"#c27ba0\"],\n\t\t\t[\"#a61c00\", \"#cc0000\", \"#e69138\", \"#f1c232\", \"#6aa84f\", \"#45818e\", \"#3c78d8\", \"#3d85c6\", \"#674ea7\", \"#a64d79\"],\n\t\t\t[\"#85200c\", \"#990000\", \"#b45f06\", \"#bf9000\", \"#38761d\", \"#134f5c\", \"#1155cc\", \"#0b5394\", \"#351c75\", \"#741b47\"],\n\t\t\t[\"#5b0f00\", \"#660000\", \"#783f04\", \"#7f6000\", \"#274e13\", \"#0c343d\", \"#1c4587\", \"#073763\", \"#20124d\", \"#4c1130\"]\n\t\t]\n\t},\n\t$init:function(){\n\t\tthis.attachEvent(\"onSelect\", function(value){\n\t\t\tthis.getParentView().setMasterValue({ value:value });\n\t\t});\n\t}\n}, webix.ui.colorboard);\n\nwebix.protoUI({\n\t$cssName: \"richselect\",\n\tname: \"ssheet-color\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_color\",\n\t\ticon: \"wxi-menu-down\",\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\"\n\t\t\t}\n\t\t}\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_color\";\n\t},\n\t$renderInput: function(config, divStart, id){\n\t\tvar color  = this.renderColor.call(this);\n\t\tdivStart = divStart.replace(/([^>]>)(.*)(<\\/div)/, function(match, p1, p2, p3){\n\t\t\treturn p1+config.title +color+p3;\n\t\t});\n\n\t\treturn webix.ui.colorpicker.prototype.$renderInput.call(this,config, divStart, id);\n\t},\n\t$setValue: function(value){\n\t\tvar popup =  webix.$$(this.config.popup.toString());\n\t\tvar colorboard = popup.getBody();\n\t\tvalue = value || \"\";\n\t\tcolorboard.setValue(value);\n\t\tthis.config.value = value;\n\t\tthis.getColorNode().style.backgroundColor = value;\n\t},\n\trenderColor: function(){\n\t\treturn \"<div class='webix_ssheet_cp_color' style='background-color:\"+this.config.value+\";'> </div>\";\n\t},\n\tgetColorNode: function(){\n\t\treturn this.$view.firstChild.firstChild.childNodes[1];\n\t},\n\t$renderIcon:function(){\n\t\treturn webix.ui.text.prototype.$renderIcon.apply(this,arguments);\n\t}\n},webix.ui.colorpicker);","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t,r={1:\"#ERROR\",2:\"#ERROR\",3:\"#REF!\"},e=function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},e.apply(this,arguments)};function n(t,r,e){return e+64*r+64*t*4096}function o(t){return[t<2147483648?t>>18:t/262144&16777215,t>>6&4095,63&t]}function a(t){return t<2147483648?t>>18:t/262144&16777215}function i(t){return 63&t}function u(t,r,e){for(var n=o(t),a=n[0],i=n[1],u=o(r),f=u[0]-a,s=u[1]-i,h=0;h<=f;h++)for(var c=0;c<=s;c++)e(t+64*c+4096*h*64)}function f(t,r){for(var e,n,a,u,f,h,c,p,v=t.code,g=t.source,l=\"\",b=v.length,d=0;d<b;d+=3){switch(v[d]){case 5:var M=void 0;9===v[d+6]&&(M=r.pageName(i(v[d+7]))),l+=(-1!==(p=M||t.source.substr(v[d+1],v[d+2])).indexOf(\" \")?\"'\"+p+\"'\":p)+\"!\";break;case 7:l+=s(u=(e=o(v[d+4]))[0],h=e[1],v[d+5]);break;case 4:l+=g.substr(v[d+1],v[d+2]).toUpperCase();break;case 8:u=(n=o(v[d+4]))[0],h=n[1],f=(a=o(v[d+7]))[0],c=a[1],l+=s(u,h,v[d+5]),l+=\":\",l+=s(f,c,v[d+8]);break;case 9:break;case 2:l+=\"{{\"+g.substr(v[d+1],v[d+2])+\"}}\";break;case 3:l+=\"#REF!\";break;case 1:l+='\"'+g.substr(v[d+1],v[d+2])+'\"';break;default:l+=g.substr(v[d+1],v[d+2])}}return l}function s(t,r,e){var n=\"\";2&e&&(n+=\"$\");var o=\"\";for(r+=1;r>0;){var a=r%26;0===a&&(a=26),o=String.fromCharCode(64+a)+o,r=(r-a)/26}return n+=o,1&e&&(n+=\"$\"),n+=t+1}function h(t){return t<=122}function c(t){return t<=122?t>=65||35===t||36===t:t>191}function p(t){return t>=97}function v(t){var r=t.charCodeAt(0);return r>=48&&r<=57}function g(t,r){var e;do{r++,e=t.charCodeAt(r)}while(e>=48&&e<=57);return r}function l(t){return\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t}function b(t,r){var e;do{e=t[++r]}while(l(e));return r}function d(t,r){if(\"<\"===t[r]){var e=t[r+1];\">\"!==e&&\"=\"!==e||r++}else\">\"===t[r]&&\"=\"===t[r+1]&&r++;return r+1}function M(r,e,n){for(var o=r.length,a=!0,i=e,u=!1,f=!1,s=!1,g=0;i<o;i++){var l=r[i];if(\"'\"!==l){if(!u){s=!0;var b=l.charCodeAt(0);if(c(b)){h(b)?p(b)&&(f=!0):a=!1,1==g&&g++;continue}if(v(l)){0==g&&g++;continue}break}}else{if(s)break;if(u){i++;break}u=!0}}var d=r[i],M=e,y=i-e;return u&&((y-=1+(\"'\"===r[i-1]?1:0))<0&&(y=0),M++,n=5),0===n&&(\":\"===d&&a?(n=8,f&&(t=!0)):\"!\"===d?n=\"#\"===r[M]?3:5:\"(\"===d?(function(t,r,e){var n=t.substr(r,e);return n.toUpperCase()!==n}(r,M,y)&&(t=!0),n=4):\"}\"===d&&\"}\"===r[i-1]?n=2:1===g&&a?(n=7,f&&(t=!0)):n=6),[M,y,i,n]}function y(t,r,e){for(var o=0,a=0,i=1,u=1,f=0,s=!1,h=r.length-1;h>=0;h--){var c=r[h].charCodeAt(0);36!==c?c<58?(a+=(c-48)*i,i*=10):(s||(i=1,o=a,a=0,s=!0,u+=1),a+=(c-(c>96?96:64))*i,i*=26):f+=u}t.push(9,n(o-1,a-1,e),f)}function m(r,e){var n,o,i=[];t=!1;for(var u,s=-1,h=0;h<r.length;h++){var p=r[h];if('\"'!=p){if(!(s>-1))if(\"{\"!=p||\"{\"!=r[h+1])if(\"'\"==p||c(p.charCodeAt(0))){var m=M(r,h,0),_=(L=m[0],P=m[1],m[2]),w=m[3],E=i.length;if(7!==w&&8!==w||5!==i[i.length-3])u=e.z,i.push(w,L,P);else{var I=\"'\"===r[L-2]?1:0,D=i[E-2],T=i[E-1];void 0===(u=e.page(r.substr(D,T)))&&(i.push(3,0,0),u=0),i.push(w,L-T-2*I-1,P+T+2*I+1)}if(h=_-1,6===w)e.name(i,r,e);else if(8===w){var C=i.length;if(y(i,r.substr(L,P),u),L=(n=M(r,h+2,0))[0],P=n[1],_=n[2],5===(w=n[3])&&(L=(o=M(r,_+1,0))[0],P=o[1],_=o[2],w=o[3]),7!==w){i[C-3]=7;continue}y(i,r.substr(L,P),u);var N=i[C+1],x=i[C+4];(N>x||a(N)>a(x))&&(i[C+1]=x,i[C+4]=N),i[C-1]+=P+1,h=_-1}else 7===w?y(i,r.substr(L,P),u):3!==w&&5!==w||h++}else if(l(p)){var S=b(r,h);i.push(12,h,S-h),h=S-1}else if(v(p)){var A=g(r,h);i.push(11,h,A-h),h=A-1}else{var O=d(r,h);i.push(10,h,O-h),h=O-1}else{var R=M(r,h+2,2),L=R[0],P=R[1],F=R[2];i.push(2,L,P),h=F+2-1}}else s>-1?(i.push(1,s+1,h-s-1),s=-1):s=h}var U={code:i,source:r,exec:null,broken:0,triggers:null};return t&&(U.source=f(U,e)),U}function _(t){return\"              \".substr(0,10-t.length)}var w=[\">\",\"<\",\"=\",\"+\"];function E(t){var r=function(t){for(var r=t.code,e=t.source,n=\"\",o=r.length,a=0;a<o;a+=3){switch(r[a]){case 4:n+=\"ctx.m.\"+e.substr(r[a+1],r[a+2]).toUpperCase();break;case 1:n+='\"'+e.substr(r[a+1],r[a+2])+'\"';break;case 2:n+='ctx.p(\"'+e.substr(r[a+1],r[a+2])+'\")';break;case 6:case 7:var i=void 0,u=void 0;if(10===r[a-3]?i=a-3:12===r[a-3]&&10===r[a-6]&&(i=a-6),10===r[a+6]?u=a+6:12===r[a+6]&&10===r[a+9]&&(u=a+9),i||u){var f=i?e[r[i+1]]:null,s=u?e[r[u+1]]:null;if(\"&\"==f||\"&\"==s){n+=\"(ctx.v(\"+r[a+4]+') === null ? \"\" : ctx.v('+r[a+4]+\"))\";break}if(-1!=w.indexOf(f)||-1!=w.indexOf(s)){n+=\"(ctx.v(\"+r[a+4]+\") === null ? 0 : ctx.v(\"+r[a+4]+\"))\";break}}n+=\"ctx.v(\"+r[a+4]+\")\";break;case 8:n+=\"ctx.r(\"+r[a+4]+\", \"+r[a+7]+\")\";break;case 10:if(1===r[a+2])n+=\"&\"===(h=e[r[a+1]])?'+\"\"+':\"=\"===h?\"==\":\";\"===h?\",\":\"{\"===h?\"[\":\"}\"===h?\"]\":h;else if(2===r[a+2]){var h;n+=\"<>\"===(h=e.substr(r[a+1],r[a+2]))?\"!=\":h}else n+=e.substr(r[a+1],r[a+2]);break;case 11:n+=e.substr(r[a+1],r[a+2]);break;case 3:return\"\"}}return n}(t);if(!r)return t.broken=3,void(t.exec=null);try{t.exec=new Function(\"ctx\",\"return \"+r)}catch(r){t.broken=1,t.exec=null}}var I=\"#DIV/0!\",D=\"#VALUE!\",T=\"#NUM!\",C=\"#N/A\";function N(t){var r=new Date(t.getFullYear(),0,0),e=t.valueOf()-r.valueOf()+60*(r.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(e/864e5)}function x(t){var r=new Date(Math.round(86400*(t-25569)*1e3));return new Date(r.getTime()+6e4*r.getTimezoneOffset())}function S(t){return 25569+(t.getTime()-6e4*t.getTimezoneOffset())/864e5}function A(t){return!(!t&&0!==t||(t*=1,isNaN(t)))&&t}function O(t){for(var r=[],e=0;e<t.length;e++)r=r.concat(t[e]);return r}function R(t){return!t&&0!==t}function L(t){return\"string\"==typeof t?\"TRUE\"===t:!!t}function P(t){var r=\"string\"==typeof t?new Date(t):x(t);if(r.getTime())return r;throw t+\" is invalid date\"}function F(t){var r=A(t);if(\"number\"!=typeof r)throw t+\" is not a number\";return r}function U(t,r,e,n,o){var a=A(t),i=r?A(r):null;if(\"number\"!=typeof a||\"boolean\"==typeof i)throw D;if(a<e||a>n||i<-1)throw T;i&&(i=Math.floor(+i));var u=Number(a>>>0).toString(o);if(i&&u.length>i)throw T;return u.padStart(i,\"0\").toUpperCase()}function k(t,r){var e=+vt(t),n=+gt(t),o=+vt(r),a=+gt(r);return ut(e*o-n*a,e*a+n*o)}function V(t,r){var e=+vt(t),n=+gt(t);return ut(e+ +vt(r),n+ +gt(r))}function X(t){return t>0?Math.floor(t):Math.ceil(t)}function Y(t){return t<0?Math.floor(t):Math.ceil(t)}function H(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=O(t),o=0;o<n.length;o++){var a=A(n[o]);\"number\"==typeof a&&(e+=a)}return e}function j(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=0,o=O(t),a=0;a<o.length;a++){var i=A(o[a]);\"number\"==typeof i&&(e+=i,n++)}return n?e/n:0}function B(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=O(t),n=0,o=0,a=0;a<e.length;a++){var i=e[a],u=A(e[a]);\"number\"==typeof u?(n+=u,o++):(!0===i&&n++,(i||!1===i)&&o++)}return o?n/o:0}function z(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=O(t),o=0;o<n.length;o++){var a=A(n[o]);\"number\"==typeof a&&e++}return e}function G(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=O(t),o=0;o<n.length;o++)n[o]&&1*n[o]!=0&&e++;return e}function q(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=-1/0,n=O(t),o=0;o<n.length;o++){var a=A(n[o]);\"number\"==typeof a&&a>e&&(e=a)}return e===-1/0?0:e}function W(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=1/0,n=O(t),o=0;o<n.length;o++){var a=A(n[o]);\"number\"==typeof a&&a<e&&(e=a)}return e===1/0?0:e}function $(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=!1,n=1,o=O(t),a=0;a<o.length;a++){var i=A(o[a]);\"number\"==typeof i&&(e=!0,n*=i)}return e?n:null}function K(t,r,e){for(var n=O(t),o=r?0:-1,a=e?B.apply(void 0,t):j.apply(void 0,t),i=0,u=0;u<n.length;u++){var f=n[u],s=A(n[u]);if(\"number\"!=typeof s){if(!e||\"boolean\"!=typeof f&&!f)continue;s=!0===f?1:0}o++,i+=Math.pow(s-a,2)}return o?i/o:0}function Q(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return K(t,!1,!0)}function J(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return K(t,!0,!1)}function Z(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return K(t,!0,!0)}function tt(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(J.apply(void 0,t))}function rt(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.pow(e,n)}var et={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};var nt=[];function ot(t){var r=A(t);if(\"number\"==typeof r&&r>-1){var e=Math.floor(r);return 0===e||1===e?1:(nt[e]>0||(nt[e]=ot(e-1)*e),nt[e])}}function at(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return ot(e)/(ot(n)*ot(e-n))}var it=[\"\",\"C\",\"CC\",\"CCC\",\"CD\",\"D\",\"DC\",\"DCC\",\"DCCC\",\"CM\",\"\",\"X\",\"XX\",\"XXX\",\"XL\",\"L\",\"LX\",\"LXX\",\"LXXX\",\"XC\",\"\",\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\",\"VIII\",\"IX\"];function ut(t,r,e){void 0===e&&(e=\"i\");var n=A(t),o=A(r);if(\"number\"!=typeof n&&\"number\"!=typeof o)throw T;var a=\"\",i=\"\";return t&&(a=t.toString()),r&&1!==r?i=r+e:1===r&&(i=e),r>0?(a?a+\"+\":\"\")+i:a+i}function ft(t,r){return void 0===r&&(r=null),U(t,r,-512,511,2)}function st(t,r){return void 0===r&&(r=null),U(t,r,-549755813888,549755813887,16)}function ht(t,r){return void 0===r&&(r=null),U(t,r,-536870912,536870911,8)}function ct(t){var r=A(t);if(\"number\"==typeof r){var e=r<0?-1:1,n=1/(1+.3275911*(r=Math.abs(r)));return e*(1-((((1.061405429*n-1.453152027)*n+1.421413741)*n-.284496736)*n+.254829592)*n*Math.exp(-r*r))}throw D}var pt=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];function vt(t){if(\"string\"!=typeof t)throw D;if([\"i\",\"+i\",\"1i\",\"+1i\",\"-i\",\"-1i\",\"j\",\"+j\",\"1j\",\"+1j\",\"-j\",\"-1j\"].indexOf(t)>=0)return 0;var r=t.indexOf(\"+\"),e=t.indexOf(\"-\");0===r&&(r=t.indexOf(\"+\",1)),0===e&&(e=t.indexOf(\"-\",1));var n=t.substring(t.length-1,t.length),o=\"i\"===n||\"j\"===n;if(r>=0||e>=0){if(!o)throw T;if(r>=0){if(isNaN(+t.substring(0,r))||isNaN(+t.substring(r+1,t.length-1)))throw T;return Number(t.substring(0,r))}if(isNaN(+t.substring(0,e))||isNaN(+t.substring(e+1,t.length-1)))throw T;return Number(t.substring(0,e))}if(o){if(isNaN(+t.substring(0,t.length-1)))throw T;return 0}if(isNaN(+t))throw T;return+t}function gt(t){if(\"string\"!=typeof t)throw D;if([\"i\",\"j\"].indexOf(t)>=0)return 1;var r=(t=t.replace(\"+i\",\"+1i\").replace(\"-i\",\"-1i\").replace(\"+j\",\"+1j\").replace(\"-j\",\"-1j\")).indexOf(\"+\"),e=t.indexOf(\"-\");0===r&&(r=t.indexOf(\"+\",1)),0===e&&(e=t.indexOf(\"-\",1));var n=t.substring(t.length-1,t.length),o=\"i\"===n||\"j\"===n;if(r>=0||e>=0){if(!o)throw T;if(r>=0){if(isNaN(+t.substring(0,r))||isNaN(+t.substring(r+1,t.length-1)))throw T;return Number(t.substring(r+1,t.length-1))}if(isNaN(+t.substring(0,e))||isNaN(+t.substring(e+1,t.length-1)))throw T;return-Number(t.substring(e+1,t.length-1))}if(o){var a=+t.substring(0,t.length-1);if(isNaN(a))throw T;return a}if(isNaN(+t))throw T;return 0}function lt(t){var r=+vt(t),e=+gt(t);return ut(Math.cos(r)*Math.cosh(e),-Math.sin(r)*Math.sinh(e))}function bt(t){var r=+vt(t),e=+gt(t);return ut(Math.cos(e)*(Math.exp(r)+Math.exp(-r))/2,Math.sin(e)*(Math.exp(r)-Math.exp(-r))/2)}function dt(t,r){var e=+vt(t),n=+gt(t),o=+vt(r),a=+gt(r),i=Math.pow(o,2)+Math.pow(a,2);return ut((e*o+n*a)/i,(n*o-e*a)/i)}function Mt(t){var r=+vt(t),e=+gt(t);return ut(Math.sin(r)*Math.cosh(e),Math.cos(r)*Math.sinh(e))}function yt(t){var r=+vt(t),e=+gt(t);return ut(Math.cos(e)*(Math.exp(r)-Math.exp(-r))/2,Math.sin(e)*(Math.exp(r)+Math.exp(-r))/2)}function mt(t,r){var e=O(t).sort((function(t,r){return t-r})),n=A(r);if(\"number\"!=typeof n)throw D;var o=(e.length-1)*n,a=Math.floor(o),i=o-a;return void 0!==e[a+1]?e[a]+i*(e[a+1]-e[a]):e[a]}function _t(t,r,e,n){void 0===n&&(n=!1);var o=F(t),a=F(r),i=F(e),u=function(t,r,e){return at(r,t)*Math.pow(e,t)*Math.pow(1-e,r-t)};if(!n)return u(o,a,i);for(var f=0,s=0;s<o+1;s++)f+=u(s,a,i);return f}var wt=Object.freeze({__proto__:null,SUM:H,AVERAGE:j,AVERAGEA:B,COUNT:z,COUNTA:G,COUNTBLANK:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=O(t),o=0;o<n.length;o++)0===n[o]||n[o]||e++;return e},MAX:q,MIN:W,PRODUCT:$,SUMPRODUCT:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=t[0].length;for(var n in t)if(t[n].length!==e)return;var o=0;for(n=0;n<t[0].length;n++){var a=!1,i=1;for(var u in t){var f=A(t[u][n]);\"number\"==typeof f&&(i*=f,a=!0)}a&&(o+=i)}return o},SUMSQ:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=O(t),o=0;o<n.length;o++){var a=A(n[o]);\"number\"==typeof a&&(e+=Math.pow(a,2))}return e},VAR:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return K(t,!1,!1)},VARA:Q,VARP:J,VARPA:Z,STDEV:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(J.apply(void 0,t))},STDEVP:tt,STDEVA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(Q.apply(void 0,t))},STDEVPA:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Math.sqrt(Z.apply(void 0,t))},POWER:rt,QUOTIENT:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return X(e/n)},SQRT:function(t){var r=A(t);if(\"number\"==typeof r&&r>=0)return Math.sqrt(r)},ABS:function(t){var r=A(t);if(\"number\"==typeof r)return Math.abs(r)},RAND:function(){return Math.random()},PI:function(){return Math.PI},INT:function(t){var r=A(t);if(\"number\"==typeof r)return Math.floor(r)},ROUND:function(t,r){var e=A(t),n=A(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return parseFloat(e.toFixed(n))},ROUNDDOWN:function(t,r){var e=A(t),n=A(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return Math.floor(e*Math.pow(10,n))/Math.pow(10,n)},ROUNDUP:function(t,r){var e=A(t),n=A(r)||0;if(\"number\"==typeof e&&\"number\"==typeof n)return Math.ceil(e*Math.pow(10,n))/Math.pow(10,n)},TRUNC:function(t){var r=A(t);if(\"number\"==typeof r)return X(r)},EVEN:function(t){var r=A(t);if(\"number\"==typeof r){var e=Y(r);return e%2?e+Math.sign(r):e}},ODD:function(t){var r=A(t);if(\"number\"==typeof r){var e=Y(r);return e%2?e:e+Math.sign(r)}},ACOS:function(t){var r=A(t);if(\"number\"==typeof r)return Math.acos(r)},ACOSH:function(t){var r=A(t);if(\"number\"==typeof r)return Math.acosh(r)},ACOT:function(t){var r=A(t);if(\"number\"==typeof r)return Math.atan(1/r)},ACOTH:function(t){var r=A(t);if(\"number\"==typeof r)return.5*Math.log((r+1)/(r-1))},ARABIC:function(t){if(!A(t)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(\"\"+t)){var r=0;return(\"\"+t).replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(t){return r+=et[t],t})),+r}},ASIN:function(t){var r=A(t);if(\"number\"==typeof r)return Math.asin(r)},ASINH:function(t){var r=A(t);if(\"number\"==typeof r)return Math.asinh(r)},ATAN:function(t){var r=A(t);if(\"number\"==typeof r)return Math.atan(r)},ATAN2:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.atan2(n,e)},ATANH:function(t){var r=A(t);if(\"number\"==typeof r)return Math.log((1+r)/(1-r))/2},BASE:function(t,r,e){void 0===e&&(e=0);var n=A(t),o=A(r),a=A(e);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof a){var i=n.toString(o);return new Array(Math.max(a+1-i.length,0)).join(\"0\")+i.toUpperCase()}},CEILING:function(t,r,e){void 0===r&&(r=1),void 0===e&&(e=0);var n=A(t),o=A(r),a=A(e);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof a)return 0===o?0:(o=Math.abs(o),n>=0?Math.ceil(n/o)*o:0===e?-1*Math.floor(Math.abs(n)/o)*o:-1*Math.ceil(Math.abs(n)/o)*o)},COS:function(t){var r=A(t);if(\"number\"==typeof r)return Math.cos(r)},COSH:function(t){var r=A(t);if(\"number\"==typeof r)return Math.cosh(r)},COT:function(t){var r=A(t);if(\"number\"==typeof r)return 1/Math.tan(r)},COTH:function(t){var r=A(t);if(\"number\"==typeof r){var e=Math.exp(2*r);return(e+1)/(e-1)}},CSC:function(t){var r=A(t);if(\"number\"==typeof r)return 1/Math.sin(r)},CSCH:function(t){var r=A(t);if(\"number\"==typeof r)return 2/(Math.exp(r)-Math.exp(-r))},DEGREES:function(t){var r=A(t);if(\"number\"==typeof r)return 180*r/Math.PI},DECIMAL:function(t,r){var e=A(t),n=A(r);if(!(\"\"+e).match(\"/[2-9]/\")&&\"number\"==typeof e&&\"number\"==typeof n&&n>1&&n<37)return parseInt(\"\"+e,n)},FACT:ot,FACTDOUBLE:function t(r){var e=A(r);if(\"number\"==typeof e){var n=Math.floor(e);return n<=0?1:n*t(n-2)}},COMBIN:at,COMBINA:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return 0===e&&0===n?1:at(e+n-1,e-1)},FLOOR:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n){var o=Math.abs(n);return e>=0?Math.floor(e/o)*o:-1*Math.ceil(Math.abs(e)/o)*o}},GCD:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=O(t),n=e.length;if(!n)return 1;for(var o=e[0],a=1;\"number\"!=typeof o;){if(o=e[a],a>e.length)throw\"The arguments should contain at least one numeric value\";a++}for(var i=o<0?-o:o;a<n;a++){var u=A(e[a]);if(\"number\"==typeof u){for(var f=u<0?-u:u;i&&f;)i>f?i%=f:f%=i;i+=f}}return i},LN:function(t){var r=A(t);if(\"number\"==typeof r)return Math.log(r)},LOG:function(t,r){void 0===r&&(r=10);var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return Math.log(e)/Math.log(n)},LOG10:function(t){var r=A(t);if(\"number\"==typeof r)return Math.log(r)/Math.log(10)},MOD:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n&&0!==n){var o=Math.abs(e%n);return r>0?o:-o}},MROUND:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n&&e*n>-1)return Math.round(e/n)*n},MULTINOMIAL:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=O(t),n=0,o=1,a=0;a<e.length;a++){var i=A(e[a]);\"number\"==typeof i&&(n+=i,o*=ot(e[a]))}return ot(n)/o},RADIANS:function(t){var r=A(t);if(\"number\"==typeof r)return r*Math.PI/180},RANDBETWEEN:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e+Math.ceil((n-e+1)*Math.random())-1},ROMAN:function(t){var r=A(t);if(\"number\"==typeof r){for(var e=String(r).split(\"\"),n=\"\",o=3;o--;)n=(it[+e.pop()+10*o]||\"\")+n;return new Array(+e.join(\"\")+1).join(\"M\")+n}},SEC:function(t){var r=A(t);if(\"number\"==typeof r)return 1/Math.cos(r)},SECH:function(t){var r=A(t);if(\"number\"==typeof r)return 2/(Math.exp(r)+Math.exp(-r))},SIN:function(t){var r=A(t);if(\"number\"==typeof r)return Math.sin(r)},SINH:function(t){var r=A(t);if(\"number\"==typeof r)return Math.sinh(r)},SQRTPI:function(t){var r=A(t);if(\"number\"==typeof r&&r>-1)return Math.sqrt(r*Math.PI)},SUBTOTAL:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=A(t),o=O(r);if(\"number\"==typeof n)switch(n){case 1:case 101:return j.apply(void 0,o);case 102:case 2:return z.apply(void 0,o);case 103:case 3:return G.apply(void 0,o);case 104:case 4:return q.apply(void 0,o);case 105:case 5:return W.apply(void 0,o);case 106:case 6:return $.apply(void 0,o);case 107:case 7:case 110:case 10:return;case 108:case 8:return tt.apply(void 0,o);case 109:case 9:return H.apply(void 0,o);case 111:case 11:return J.apply(void 0,o)}},ADD:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e+n},MINUS:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e-n},DIVIDE:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n&&0!==n)return e/n},MULTIPLY:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e*n},GT:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e>n},GTE:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e>=n},LT:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e<n},LTE:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e<=n},EQ:function(t,r){return typeof t==typeof r&&t==r},NE:function(t,r){return typeof t!=typeof r||t!=r},POW:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return rt(t,r)},SUMX2MY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof A(t)}))&&!r.find((function(t){return\"number\"!=typeof A(t)}))){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n]-r[n]*r[n];return e}},SUMX2PY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof A(t)}))&&!r.find((function(t){return\"number\"!=typeof A(t)}))){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n]+r[n]*r[n];return e}},SUMXMY2:function(t,r){if(!t.find((function(t){return\"number\"!=typeof A(t)}))&&!r.find((function(t){return\"number\"!=typeof A(t)}))){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return e}},TAN:function(t){var r=A(t);if(\"number\"==typeof r)return Math.tan(r)},TANH:function(t){var r=A(t);if(\"number\"==typeof r)return Math.tanh(r)},COMPLEX:ut,CORREL:function(t,r){if(t.length!==r.length)throw C;for(var e=t.filter((function(t){return\"number\"==typeof t})),n=r.filter((function(t){return\"number\"==typeof t})),o=e.length,a=e.reduce((function(t,r){return t+r}),0)/o,i=n.reduce((function(t,r){return t+r}),0)/o,u=0,f=0,s=0,h=0;h<o;h++)u+=(e[h]-a)*(n[h]-i),f+=Math.pow(e[h]-a,2),s+=Math.pow(n[h]-i,2);var c=Math.sqrt(f*s);if(!c)throw I;return u/c},DEC2BIN:ft,DEC2HEX:st,DEC2OCT:ht,DELTA:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e||\"number\"==typeof e)return+(e===n);throw D},DEVSQ:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=O(t),n=[];e.forEach((function(t){\"number\"==typeof t&&n.push(t)}));var o=n.reduce((function(t,r){return t+r}),0)/n.length;return n.reduce((function(t,r){return t+Math.pow(r-o,2)}),0)},ERF:ct,ERFC:function(t){var r=A(t);if(\"number\"==typeof r)return 1-ct(r);throw D},EXP:function(t){var r=A(t);if(\"number\"==typeof r)return Math.exp(r);throw D},FISHER:function(t){var r=A(t);if(\"number\"==typeof r&&r>-1&&r<1)return.5*Math.log((1+r)/(1-r));throw D},FISHERINV:function(t){var r=A(t);if(\"number\"==typeof r){var e=Math.exp(2*r);return(e-1)/(e+1)}throw D},GAMMA:function t(r){var e=A(r);if(\"number\"!=typeof e)throw D;if(!(Number.isInteger(e)&&e<=0)){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));e-=1;for(var n=pt[0],o=1;o<9;o++)n+=pt[o]/(e+o);var a=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*n}throw T},GEOMEAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=O(t);if(e.some((function(t){return!Number.isFinite(t)||t<=0})))throw T;return Math.pow(e.reduce((function(t,r){return r*t}),1),1/e.length)},GESTEP:function(t,r){void 0===r&&(r=0);var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return+(t>=r);throw D},HARMEAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=O(t);if(e.some((function(t){return!Number.isFinite(t)||t<=0})))throw T;var n=e.reduce((function(t,r){return t+1/r}),0);return 1/(1/e.length*n)},HEX2BIN:function(t,r){return void 0===r&&(r=null),ft(parseInt(t.toString(),16),r)},HEX2DEC:function(t,r){void 0===r&&(r=null);var e=parseInt(t.toString(),16);if(!Number.isFinite(e)||\"boolean\"==typeof r||r&&\"boolean\"==typeof A(r))throw D;var n=+r;return n&&(n=+n.toFixed(0)),parseInt(t.toString(),16).toString().padStart(n,\"0\")},HEX2OCT:function(t,r){return void 0===r&&(r=null),ht(parseInt(t.toString(),16),r)},IMREAL:vt,IMAGINARY:gt,IMABS:function(t){var r=vt(t),e=gt(t);if(!Number.isFinite(+r)||!Number.isFinite(+e))throw D;return Math.sqrt(Math.pow(+r,2)+Math.pow(+e,2))},IMCONJUGATE:function(t){return ut(+vt(t),-+gt(t))},IMCOS:lt,IMCOSH:bt,IMCOT:function(t){return dt(lt(t),Mt(t))},IMCSC:function(t){return dt(\"1\",Mt(t))},IMCSCH:function(t){return dt(\"1\",yt(t))},IMDIV:dt,IMSIN:Mt,IMSINH:yt,IMEXP:function(t){var r=+vt(t),e=+gt(t),n=Math.exp(r);return ut(n*Math.cos(e),n*Math.sin(r))},IMLN:function(t){var r=+vt(t),e=+gt(t);return ut(Math.log(Math.sqrt(r*r+e*e)),Math.atan(e/r))},IMPOWER:function(t,r){var e=A(r);if(\"number\"!=typeof e)throw D;var n=+vt(t),o=+gt(t),a=Math.sqrt(n*n+o*o),i=Math.pow(a,e),u=Math.atan(o/n);return ut(i*Math.cos(e*u),i*Math.sin(e*u))},IMPRODUCT:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)throw D;for(var e=t[0],n=0,o=t.slice(1);n<o.length;n++){var a=o[n];e=k(e.toString(),a.toString())}return e.toString()},IMSEC:function(t){return dt(\"1\",lt(t))},IMSECH:function(t){return dt(\"1\",bt(t))},IMSQRT:function(t){var r=+vt(t),e=+gt(t),n=Math.sqrt(Math.sqrt(r*r+e*e)),o=Math.atan(e/r)/2;return ut(n*Math.cos(o),n*Math.sin(o))},IMSUB:function(t,r){var e=+vt(t),n=+gt(t);return ut(e-+vt(r),n-+gt(r))},IMSUM:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)throw D;for(var e=t[0],n=0,o=t.slice(1);n<o.length;n++){var a=o[n];e=V(e.toString(),a.toString())}return e.toString()},IMTAN:function(t){return dt(Mt(t),lt(t))},LARGE:function(t,r){var e=A(r),n=t.sort((function(t,r){return t-r}));if(\"number\"==typeof e&&!t.some((function(t){return\"number\"!=typeof A(t)})))return n[n.length-e];throw D},MEDIAN:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=O(t);e.sort((function(t,r){return t-r}));var n=Math.floor(e.length/2);return e.length%2?e[n]:(e[n-1]+e[n])/2},OCT2BIN:function(t,r){return void 0===r&&(r=null),ft(parseInt(t.toString(),8),r)},OCT2DEC:function(t,r){void 0===r&&(r=null);var e=r?A(r):null,n=parseInt(t.toString(),8);if(!Number.isFinite(n)||\"boolean\"==typeof e)throw D;return e&&(e=+e.toFixed(0)),parseInt(t.toString(),8).toString().padStart(e,\"0\")},OCT2HEX:function(t,r){return void 0===r&&(r=null),st(parseInt(t.toString(),8),r)},PERMUT:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return ot(e)/ot(e-n);throw D},PERCENTILE:mt,QUARTILE:function(t,r){var e=A(r);if(\"number\"!=typeof e)throw D;switch(e){case 0:return W.apply(void 0,t);case 1:return mt(t,.25);case 2:return mt(t,.5);case 3:return mt(t,.75);case 4:return q.apply(void 0,t);default:throw T}},SIGN:function(t){var r=A(t);if(\"number\"==typeof r)return 0===r?0:r/Math.abs(r);throw D},SMALL:function(t,r){var e=A(r),n=t.sort((function(t,r){return t-r}));if(\"number\"==typeof e&&!t.some((function(t){return\"number\"!=typeof A(t)})))return n[e-1];throw D},STEYX:function(t,r){if(t.length!==r.length)throw C;var e=t.filter((function(t){return\"number\"==typeof t})),n=r.filter((function(t){return\"number\"==typeof t})),o=e.length;if(2===o)throw I;for(var a=e.reduce((function(t,r){return t+r}),0)/o,i=n.reduce((function(t,r){return t+r}),0)/o,u=0,f=0,s=0,h=0;h<o;h++)u+=(e[h]-a)*(n[h]-i),f+=Math.pow(e[h]-a,2),s+=Math.pow(n[h]-i,2);if(2===s)throw I;return Math.sqrt((f-Math.pow(u,2)/s)/(o-2))},WEIBULL:function(t,r,e,n){var o=F(t),a=F(r),i=F(e);if(1==r)return 1/i;var u=Math.exp(-Math.pow(o/i,a));return n?1-u:a/Math.pow(i,a)*Math.pow(o,a-1)*u},AVEDEV:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=O(t).filter((function(t){return\"number\"==typeof t})),n=e.length;if(0===n)throw I;var o=e.reduce((function(t,r){return t+r}),0)/n,a=e.reduce((function(t,r){return t+Math.abs(r-o)}),0);return a/n},BINOMDIST:_t,BINOMDISTRANGE:function(t,r,e,n){var o=F(t),a=F(r),i=F(e),u=A(n);\"number\"!=typeof u&&(u=i);for(var f=0,s=i;s<=u;s++){f+=at(o,s)*Math.pow(a,s)*Math.pow(1-a,o-s)}return f},BINOMDISTINV:function(t,r,e){for(var n=F(t),o=F(r),a=F(e),i=0;i<=n;i++){if(_t(i,n,o,!0)>=a)return i}},BITAND:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e&n;throw D},BITOR:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e|n;throw D},BITXOR:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e^n;throw D},BITLSHIFT:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e<<n;throw D},BITRSHIFT:function(t,r){var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n)return e>>n;throw D},COVAR:function(t,r){var e=t.filter((function(t){return\"number\"==typeof t})),n=r.filter((function(t){return\"number\"==typeof t}));if(e.length!==n.length)throw C;var o=e.length;if(0===o)throw I;for(var a=e.reduce((function(t,r){return t+r}),0)/o,i=n.reduce((function(t,r){return t+r}),0)/o,u=0,f=0;f<o;f++)u+=(e[f]-a)*(n[f]-i);return u/o}});var Et=/[\\0-\\x1F]/g;var It=Object.freeze({__proto__:null,CONCATENATE:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return O(t).join(\"\")},LEFT:function(t,r){return R(t)?\"\":t.toString().substring(0,r)},MID:function(t,r,e){return R(t)?\"\":t.toString().substring(r,r+e)},RIGHT:function(t,r){return R(t)?\"\":t.toString().substring(t.length-r)},LOWER:function(t){return R(t)?\"\":t.toString().toLowerCase()},UPPER:function(t){return R(t)?\"\":t.toString().toUpperCase()},PROPER:function(t){if(R(t))return\"\";var r=t.toString().toLowerCase().split(\" \");for(var e in t=\"\",r)t+=(t?\" \":\"\")+r[e].substring(0,1).toUpperCase()+r[e].substring(1);return t},TRIM:function(t){return R(t)?\"\":t.toString().trim()},LEN:function(t){return R(t)?0:t.toString().length},CHAR:function(t){var r=A(t);if(\"number\"==typeof r)return String.fromCharCode(r)},CLEAN:function(t){return void 0===t&&(t=\"\"),(\"\"+t).replace(Et,\"\")},CODE:function(t){return void 0===t&&(t=\"\"),(\"\"+t).charCodeAt(0)},EXACT:function(t,r){return t===r},FIND:function(t,r,e){void 0===e&&(e=0);var n=A(e);if(\"number\"==typeof n&&r)return(\"\"+r).indexOf(\"\"+t,n-1)+1;throw\"index cannot be string\"},FIXED:function(t,r,e){void 0===r&&(r=2),void 0===e&&(e=!1);var n=A(t),o=A(r);if(\"number\"==typeof n&&\"number\"==typeof o){var a=n.toFixed(o);if(L(e))return\"\"+a;var i=(\"\"+a).split(\".\"),u=i[0],f=i[1];return u.replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+\".\"+f}},NUMBERVALUE:function(t,r,e){if(void 0===r&&(r=\".\"),void 0===e&&(e=\",\"),\"string\"==typeof t&&\"string\"==typeof r&&\"string\"==typeof e)return Number(t.replace(r,\".\").replace(e,\"\"))},REGEXEXTRACT:function(t,r){if(\"string\"==typeof t&&\"string\"==typeof r){var e=t.match(new RegExp(r));return e?e[e.length>1?e.length-1:0]:null}},REGEXMATCH:function(t,r){if(\"string\"==typeof t&&\"string\"==typeof r)return!!t.match(new RegExp(r))},REGEXREPLACE:function(t,r,e){if(\"string\"==typeof t&&\"string\"==typeof r)return t.replace(new RegExp(r),\"\"+e)},REPT:function(t,r){var e=A(r);if(\"number\"==typeof e)return new Array(e+1).join(\"\"+t)},SEARCH:function(t,r,e){void 0===e&&(e=0);var n=A(e);if(\"number\"==typeof n){var o=(\"\"+r).toLowerCase().indexOf((\"\"+t).toLowerCase(),n-1)+1;if(0!==o)return o;throw\"not found\"}},SUBSTITUTE:function(t,r,e,n){if(!t||!r||!e&&\"\"!==e)return\"\"+t;if(void 0===n)return(\"\"+t).replace(new RegExp(\"\"+r,\"g\"),\"\"+e);for(var o=0,a=0;(\"\"+t).indexOf(\"\"+r,o)>0;)if(o=(\"\"+t).indexOf(\"\"+r,o+1),++a===n)return(\"\"+t).substring(0,o)+e+(\"\"+t).substring(o+(\"\"+r).length)},T:function(t){return\"string\"==typeof t&&\"TRUE\"!==t&&\"FALSE\"!==t?\"\"+t:\"\"},JOIN:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=[];return r.forEach((function(r){\"object\"==typeof r?n.push(r.join(\"\"+t)):n.push(r)})),n.join(\"\"+t)},REPLACE:function(t,r,e,n){var o=A(r),a=A(e);if(\"number\"==typeof o&&\"number\"==typeof a){var i=t.toString(),u=n.toString();return i.replace(i.substr(o-1,a),u)}},ARRAYTOTEXT:function(t,r){return r?\"{\"+t.map((function(t){return\"string\"==typeof t?'\"'+t+'\"':t})).join(\"; \")+\"}\":t.join(\"; \")}}),Dt=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],Tt=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],Ct=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function Nt(t,r){var e=P(t),n=P(r);if(e&&n)return Math.round((e.getTime()-n.getTime())/864e5)}function xt(t){var r=P(t);if(r){r.setHours(0,0,0),r.setDate(r.getDate()+4-(r.getDay()||7));var e=new Date(r.getFullYear(),0,1);return Math.ceil(((r.getTime()-e.getTime())/864e5+1)/7)}}function St(t,r,e,n){var o=P(t),a=P(r);if(o&&a){for(var i=void 0===e?Ct[1]:Ct[e],u=n||[],f=0;f<u.length;f++){if((l=x(u[f]))instanceof Error)throw\"The \"+u[f]+\" is not a  number\";u[f]=l}var s=(a.getTime()-o.getTime())/864e5+1,h=Math.round(s),c=o;for(f=0;f<s;f++){var p=(new Date).getTimezoneOffset()>0?c.getUTCDay():c.getDay(),v=!1;p!==i[0]&&p!==i[1]||(v=!0);for(var g=0;g<u.length;g++){var l;if((l=u[g]).getDate()===c.getDate()&&l.getMonth()===c.getMonth()&&l.getFullYear()===c.getFullYear()){v=!0;break}}v&&h--,c.setDate(c.getDate()+1)}return h}}function At(t,r,e,n){var o=P(t),a=A(r);if(o&&\"number\"==typeof a){for(var i=void 0===e?Ct[1]:Ct[e],u=n||[],f=0;f<u.length;f++){if((p=x(u[f]))instanceof Error)throw\"The \"+u[f]+\" is not a  number\";u[f]=p}for(var s=0;s<a;){o.setDate(o.getDate()+1);var h=o.getDay();if(h!==i[0]&&h!==i[1]){for(var c=0;c<u.length;c++){var p;if((p=u[c]).getDate()===o.getDate()&&p.getMonth()===o.getMonth()&&p.getFullYear()===o.getFullYear()){s--;break}}s++}}return S(o)}}function Ot(t){return 1===new Date(t,1,29).getMonth()}function Rt(t,r,e){void 0===e&&(e=0);var n=P(t),o=P(r);if(n&&o){var a=n.getDate(),i=n.getMonth()+1,u=n.getFullYear(),f=o.getDate(),s=o.getMonth()+1,h=o.getFullYear(),c=365,p=h-u+1,v=(new Date(h+1,0,1).getTime()-new Date(u,0,1).getTime())/1e3/60/60/24/p;switch(e){case 0:return 31===a&&31===f?(a=30,f=30):31===a?a=30:30===a&&31===f&&(f=30),(f+30*s+360*h-(a+30*i+360*u))/360;case 1:return u===h||u+1===h&&(i>s||i===s&&a>=f)?((u===h&&Ot(u)||function(t,r){var e=t.getFullYear(),n=new Date(e,2,1);if(Ot(e)&&t<n&&r>=n)return!0;var o=r.getFullYear(),a=new Date(o,2,1);return Ot(o)&&r>=a&&t<a}(n,o)||1===s&&29===f)&&(c=366),Nt(o.toDateString(),n.toDateString())/c):Nt(o.toDateString(),n.toDateString())/v;case 2:return Nt(o.toDateString(),n.toDateString())/360;case 3:return Nt(o.toDateString(),n.toDateString())/365;case 4:return(f+30*s+360*h-(a+30*i+360*u))/360}}}var Lt=Object.freeze({__proto__:null,DATE:function(t,r,e){return S(new Date(t,r-1,e))},TIME:function(t,r,e){var n=S(new Date(1900,0,1,t,r,e,0));return n-Math.trunc(n)},DAY:function(t){return x(t).getDate()},MONTH:function(t){return x(t).getMonth()+1},YEAR:function(t){return x(t).getFullYear()},HOUR:function(t){return x(t).getHours()},MINUTE:function(t){return x(t).getMinutes()},SECOND:function(t){return x(t).getSeconds()},NOW:function(){return S(new Date)},DATEDIF:function(t,r,e){var n=e.toLowerCase();if(\"d\"===n)return r-t;var o=x(t),a=x(r);switch(n){case\"y\":return a.getFullYear()-o.getFullYear();case\"m\":return(u=12*(a.getFullYear()-o.getFullYear()))+a.getMonth()-o.getMonth();case\"d\":return Math.floor(r-t);case\"md\":if((f=a.getDate()-o.getDate())<0){var i=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();return a.getDate()+i-o.getDate()}return f;case\"ym\":var u;return(u=a.getMonth()-o.getMonth())<0?12+u:u;case\"yd\":var f;return(f=N(a)-N(o))<0?365+f:f}},DATEVALUE:function(t){if(\"string\"==typeof t)return S(new Date(new Date(t).toDateString()))},DAYS:Nt,DAYS360:function(t,r,e){void 0===e&&(e=0);var n=P(t),o=P(r);if(n&&o){var a=n.getMonth(),i=o.getMonth(),u=void 0,f=void 0;if(L(e))u=31===n.getDate()?30:n.getDate(),f=31===o.getDate()?30:o.getDate();else{var s=new Date(n.getFullYear(),a+1,0).getDate(),h=new Date(o.getFullYear(),i+1,0).getDate();u=n.getDate()===s?30:n.getDate(),o.getDate()===h?u<30?(i++,f=1):f=30:f=o.getDate()}return 360*(o.getFullYear()-n.getFullYear())+30*(i-a)+(f-u)}},EDATE:function(t,r){var e=P(t),n=A(r);if(e&&\"number\"==typeof n)return e.setMonth(e.getMonth()+n),S(e)},EOMONTH:function(t,r){var e=P(t),n=A(r);if(e&&\"number\"==typeof n)return S(new Date(e.getFullYear(),e.getMonth()+n+1,0))},ISOWEEKNUM:xt,NETWORKDAYS:function(t,r,e){return St(t,r,1,e)},NETWORKDAYSINTL:St,TIMEVALUE:function(t){if(\"string\"==typeof t){var r=t.split(\" \"),e=r[1],n=r[0].split(\":\"),o=new Date;return o.setHours(+n[0]),e&&\"PM\"===e.toUpperCase()&&o.setHours(o.getHours()+12),o.setMinutes(+n[1]),n[2]&&o.setSeconds(+n[2]),(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400}},WEEKNUM:function(t,r){void 0===r&&(r=1);var e=P(t);if(21===r)return xt(r);var n=Tt[r],o=new Date(e.getFullYear(),0,1),a=o.getDay()<n?1:0,i=o.getTime()-24*Math.abs(o.getDay()-n)*60*60*1e3;return Math.floor((e.getTime()-i)/864e5/7+1)+a},WEEKDAY:function(t,r){void 0===r&&(r=1);var e=P(t).getDay();return Dt[r][e]},WORKDAY:function(t,r,e){return At(t,r,1,e)},WORKDAYINTL:At,YEARFRAC:Rt});var Pt=Object.freeze({__proto__:null,IF:function(t,r,e){return t?r:e},AND:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++)if(!L(t[e]))return!1;return!0},NOT:function(t){return!L(t)},OR:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++)if(t[e])return!0;return!1},CHOOSE:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=A(t);if(r.length>1&&\"number\"==typeof n){if(r.length<n)throw\"the index number is greater than the length of the array of values\";if(n<=0)throw\"index cannot be less than or equal to 0\";return r[--n]}},FALSE:function(){return!1},TRUE:function(){return!0}});var Ft=Object.freeze({__proto__:null,ISBLANK:function(t){return R(t)},ISBINARY:function(t){return/^[01]{1,10}$/.test(\"\"+t)},ISEVEN:function(t){var r=A(t);return\"number\"==typeof r&&r%2==0},ISODD:function(t){var r=A(t);return\"number\"==typeof r&&r%2!=0},ISNONTEXT:function(t){return\"string\"!=typeof t},ISNUMBER:function(t){return\"number\"==typeof A(t)},ISTEXT:function(t){return\"string\"==typeof t},N:function(t){var r=A(t);if(\"number\"==typeof r)return r;var e=new Date(t);return e.getTime()?S(e):\"TRUE\"===t||!0===t?1:0}});function Ut(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a,i=F(t),u=F(r),f=F(e),s=F(n);if(0===i)a=(f+s)/u;else{var h=Math.pow(1+i,u);a=i*(f*h+s)/(h-1),1===o&&(a/=1+i)}return-a}function kt(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a,i=F(t),u=F(r),f=F(e),s=F(n);if(0!==i){var h=Math.pow(1+i,u);return a=s*h+f*(h-1)/i,1===o&&(a=s*h+f*(1+i)*(h-1)/i),-a}a=s+f*u}function Vt(t,r,e,n,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var i=F(t),u=F(e),f=F(r),s=F(n),h=Ut(i,u,s,F(o),a);return(1===f?1===a?0:-s:1===a?kt(i,f-2,h,s,1)-h:kt(i,f-1,h,s,0))*i}var Xt=Object.freeze({__proto__:null,ACCRINT:function(t,r,e,n,o,a,i){void 0===o&&(o=0),void 0===i&&(i=0);var u=P(t),f=P(e),s=F(n),h=F(o),c=F(a),p=F(i);if(1!==c)throw\"This function is only supported with frequency 1\";if(-1===[0,1,2,3,4].indexOf(p))throw\"Basis is \"+i+\". It's should be 0, 1, 2, 3 or 4\";if(f<=u)throw\"Settlement canot be before or equal to issue\";return h*s*Rt(t,e,p)},PMT:Ut,FV:kt,DB:function(t,r,e,n,o){void 0===o&&(o=12);var a=F(t),i=F(r),u=F(e),f=F(n),s=F(o);if(a<0||i<0||u<0||f<0)throw\"Parameters cannot be negative\";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(s))throw\"Month is \"+o+\". It's should be beetwen 1 and 12\";if(f>u)throw\"Period cannot be greater than life\";if(i>=a)return 0;for(var h=+(1-Math.pow(i/a,1/u)).toFixed(3),c=a*h*s/12,p=c,v=0,g=n===u?u-1:n,l=2;l<=g;l++)p+=v=(a-p)*h;return 1===n?c:n===u?(a-p)*h:v},DDB:function(t,r,e,n,o){void 0===o&&(o=2);var a=F(t),i=F(r),u=F(e),f=F(n),s=F(o);if(a<0||i<0||u<0||f<0||s<0)throw\"Parameters cannot be negative\";if(f>u)throw\"Period cannot be greater than life\";if(i>=a)return 0;for(var h=0,c=0,p=1;p<=n;p++)h+=c=Math.min(s/u*(a-h),a-i-h);return c},DOLLAR:function(t,r){void 0===r&&(r=2);var e=A(t),n=A(r);if(\"number\"==typeof e&&\"number\"==typeof n){if(n>=0)return\"$\"+e.toFixed(n);var o=Math.pow(10,-n);return\"$\"+Math.trunc(e/o)*o}},DOLLARDE:function(t,r){var e=F(t),n=F(r);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(\"\"+n,10);var o=parseInt(\"\"+t,10);o+=e%1*Math.pow(10,Math.ceil(Math.log(n)/Math.LN10))/n;var a=Math.pow(10,Math.ceil(Math.log(n)/Math.LN2)+1);return o=Math.round(o*a)/a},DOLLARFR:function(t,r){var e=F(t),n=F(r);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(\"\"+n,10);var o=parseInt(\"\"+t,10);return o+=e%1*Math.pow(10,-Math.ceil(Math.log(n)/Math.LN10))*n},EFFECT:function(t,r){var e=F(t),n=F(r);if(e<=0)throw\"Rate cannot be less than or equal to zero\";if(n<1)throw\"Periods cannot be less than 1\";return n=parseInt(\"\"+n,10),Math.pow(1+e/n,n)-1},FVSCHEDULE:function(t,r){for(var e=F(t),n=r.map((function(t){return F(t)})),o=n.length,a=e,i=0;i<o;i++)a*=1+n[i];return a},IRR:function(t,r){void 0===r&&(r=0);for(var e=O(t).map((function(t){return F(t)})),n=F(r),o=function(t,r,e){for(var n=e+1,o=t[0],a=1;a<t.length;a++)o+=t[a]/Math.pow(n,(r[a]-r[0])/365);return o},a=function(t,r,e){for(var n=e+1,o=0,a=1;a<t.length;a++){var i=(r[a]-r[0])/365;o-=i*t[a]/Math.pow(n,i+1)}return o},i=[],u=!1,f=!1,s=0;s<e.length;s++)i[s]=0===s?0:i[s-1]+365,e[s]>0&&(u=!0),e[s]<0&&(f=!0);if(!u||!f)throw\"Values should contain at least one positive value and one negative value\";var h,c,p,v=n=void 0===r?.1:n,g=!0;do{h=v-(p=o(e,i,v))/a(e,i,v),c=Math.abs(h-v),v=h,g=c>1e-10&&Math.abs(p)>1e-10}while(g);return v},IPMT:Vt,ISPMT:function(t,r,e,n){var o=F(t),a=F(r),i=F(e);return F(n)*o*(a/i-1)},NPV:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=O(t).map((function(t){return F(t)})),n=F(e[0]),o=0,a=1;a<e.length;a++)o+=e[a]/Math.pow(1+n,a);return o},NOMINAL:function(t,r){var e=F(t),n=F(r);if(e<=0)throw\"Rate cannot be less then or equal to zero\";if(n<1)throw\"Periods cannot be less then 1\";return n=parseInt(\"\"+n,10),(Math.pow(e+1,1/n)-1)*n},NPER:function(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=F(t),i=F(r),u=F(e),f=F(n),s=F(o),h=i*(1+a*s)-f*a,c=u*a+i*(1+a*s);return Math.log(h/c)/Math.log(1+a)},PDURATION:function(t,r,e){var n=F(t),o=F(r),a=F(e);if(n<=0)throw\"Rate cannot be less then or equal to zero\";return(Math.log(a)-Math.log(o))/Math.log(1+n)},PPMT:function(t,r,e,n,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var i=F(t),u=F(r),f=F(e),s=F(n),h=F(o),c=F(a);return Ut(i,f,s,h,c)-Vt(i,u,f,s,h,c)},PV:function(t,r,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=F(t),i=F(r),u=F(e),f=F(n),s=F(o);return 0===a?-u*i-f:((1-Math.pow(1+a,i))/a*u*(1+a*s)-f)/Math.pow(1+a,i)},SYD:function(t,r,e,n){var o=F(t),a=F(r),i=F(e);return(o-a)*(i-F(n)+1)*2/(i*(i+1))},TBILLPRICE:function(t,r,e){var n=P(t),o=P(r),a=F(e);if(\"number\"==typeof a&&o>n)return 100*(1-a*Math.round((o.getTime()-n.getTime())/864e5)/360)},TBILLYIELD:function(t,r,e){var n=P(t),o=P(r),a=F(e);if(\"number\"==typeof a&&o>n)return(100-a)/a*360/Math.round((o.getTime()-n.getTime())/864e5)}}),Yt={number:wt,string:It,date:Lt,other:Pt,information:Ft,financial:Xt},Ht=e(e(e(e(e(e({},wt),It),Lt),Pt),Ft),Xt);var jt=Math.pow(10,8);function Bt(t,r,e){e.add?t.has(r)||e.add(r):t.add(r)}function zt(t){if(t.keys)return Array.from(t.keys());var r=[];return t.forEach((function(t,e){return r.push(e)})),r}function Gt(t){if(t.values)return t.values();var r=[];t.forEach((function(t,e){return r.push(e)}));var e=0;return{add:function(t){r.push(t)},next:function(){var t=r[e];return{done:++e>r.length,value:t}}}}var qt=function(){function t(t){var r=this;(t=t||{get:null,set:null})&&(this._getter=t.get,this._setter=t.set),this._parser=m,this._printer=E,this._parseContext={name:function(){},pageName:function(){return\"\"},pageObj:function(){return null},page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={v:function(t){if(-1===t)throw new Error;var e=r._getter(t);return void 0===e?null:e},r:function(t,e){var n=[];return u(t,e,(function(t){return n.push(r._getter(t))})),n},m:Ht,e:function(t){throw t},p:function(t){return r.getPlaceholder(t)}}}return t.prototype.setValue=function(t,r,e,n){\"\"===r&&(r=null),this._removeTriggers(t,null),this._setter(t,r,e)&&(n||this.trigger(t))},t.prototype.clean=function(t){this._removeTriggers(t,null)},t.prototype.getValue=function(t){return this._getter(t)},t.prototype.setPlaceholder=function(t,r){var e=this;\"*\"===t?Object.entries(r).forEach((function(t){return e.setPlaceholder(t[0],t[1])})):(null===r?delete this._holders[t]:this._holders[t]=r,this.each((function(r,n){(function(t,r,e){for(var n=0;n<t.length;n+=3)if(2===t[n]&&r.substr(t[n+1],t[n+2])==e)return!0;return!1})(n.code,n.source,t)&&e.setMath(r,n.source,e._parseContext)})))},t.prototype.getPlaceholder=function(t){if(\"*\"===t)return this._holders;var r=this._holders[t];return void 0===r?null:r},t.prototype.setMath=function(t,r,e,n){var o=this._generate(r,e),a=this._setMathAt(t,o);n||this._execAndTrigger(a)},t.prototype.refresh=function(t){this._execAndTrigger(t)},t.prototype.getMath=function(t){return this._data.get(t)},t.prototype.trigger=function(t,r){var e=this._triggers.get(t);if(e){var n=!r;r||(r=new Set);for(var o=0;o<e.length;o++)r.add(e[o]);n&&this.triggerSet(r)}return null},t.prototype.triggerSet=function(t){for(var r=this,e=new Map;t.size;){var n=Gt(t),o=!1;t:for(var a=n.next();!a.done;a=n.next()){var i=this._data.get(a.value),u=e.get(a.value);if(!u||(1==u&&(u=this._check_for_loops(a.value,i.triggers,e)),2!=u)){var f=i.triggers;if(f)for(var s=0;s<f.length;s++)if(t.has(f[s]))continue t;this._execAndTrigger(a.value,t),u||e.set(a.value,1),t.delete(a.value),o=!0}}if(!o)return void t.forEach((function(e){return r._errorAndTrigger(e,t)}))}},t.prototype._check_for_loops=function(t,r,e){var n=new Set;r.forEach((function(t){return n.add(t)}));for(var o=Gt(n),a=o.next();!a.done;a=o.next()){if(a.value==t)return e.set(t,2),2;var i=e.get(a.value);if(i&&i>1)return e.set(t,i),i;var u=this._data.get(a.value);u&&u.triggers&&u.triggers.forEach((function(t){return Bt(n,t,o)}))}return e.set(t,3),3},t.prototype._setMathAt=function(t,r){if(this._removeTriggers(t,r)){if(r.triggers)if(-1===r.triggers.indexOf(t))for(var n=0;n<r.triggers.length;n++){var o=r.triggers[n],a=this._triggers.get(o);void 0===a&&(a=[],this._triggers.set(o,a)),a.push(t)}else r=e(e({},r),{broken:3});return this._data.set(t,r),t}},t.prototype._removeTriggers=function(t,r){var e=this._data.get(t);if(!e)return!0;if(e===r)return!1;var n=e.triggers;if(n&&3!==e.broken)for(var o=0;o<n.length;o++){var a=n[o],i=this._triggers.get(a);if(i){var u=i.findIndex((function(r){return r===t}));i.splice(u,1)}}return this._data.delete(t),!0},t.prototype.parse=function(t,r){return this._parser(t,r||this._parseContext)},t.prototype.exec=function(t,r){var e=this._generate(t,r);return this._exec(e)},t.prototype.each=function(t){var r=this;zt(this._data).forEach((function(e){return t(e,r._data.get(e))}))},t.prototype.setLogger=function(t){this._err_handler=t},t.prototype._setErr=function(t,e){return t.broken=2,e&&this._err_handler&&this._err_handler(e),r[t.broken]},t.prototype._exec=function(t){if(t.broken>0&&2!==t.broken)return r[t.broken];try{var e=t.exec(this._context);return t.broken=0,\"number\"==typeof e?isFinite(e)?Math.round(e*jt)/jt:this._setErr(t):e}catch(r){return this._setErr(t,r)}},t.prototype.toString=function(t,r){return f(t,r||this._parseContext)},t.prototype.regenerate=function(t,r,n){var o=this;n=e({},n||this._parseContext),zt(this._data).forEach((function(e){var a=!1,u=o._data.get(e),s=i(e);if(r&&s===t)o._removeTriggers(e,null);else{for(var h=0;h<u.code.length;h+=3)if(9===u.code[h]&&i(u.code[h+1])===t){a=!0;break}a&&(n.z=s,r?o.setMath(e,u.source,n):(u.source=f(u,n),u.code=o._parser(u.source,n).code))}}))},t.prototype.recalculate=function(t,r){var n=this;r=e({},r||this._parseContext);var o=new Set;this.each((function(e){if(t){var a=n._data.get(e);if(a.broken&&2!==a.broken)return r.z=i(e),void n.setMath(e,a.source,r)}o.add(e)})),this.triggerSet(o)},t.prototype._generate=function(t,r,e){var n=e||this._parser(t,r||this._parseContext);return this._printer(n),n.triggers=function(t){for(var r=[],e=t.code,n=e.length,o=0;o<n;o+=3){switch(e[o]){case 7:case 6:var a=e[o+4];r.push(a);break;case 8:u(e[o+4],e[o+7],(function(t){return r.push(t)}))}}if(r.length>10){var i=new Set;r=r.filter((function(t){return!i.has(t)&&(i.add(t),!0)}))}return r.length?r:null}(n),n},t.prototype._execAndTrigger=function(t,r){this.$count+=1;var e=this._data.get(t);if(e){var n=this._exec(e);this._setter(t,n)&&this.trigger(t,r)}},t.prototype._errorAndTrigger=function(t,r){var e=this._data.get(t),n=this._setErr(e);this._setter(t,n)&&this.trigger(t,r)},t.prototype.debug=function(t){console.log(function(t){for(var r=t.code,e=t.source,n=\"\",o=r.length,a=0;a<o;a+=3){var i=r[a],u=void 0;switch(i){case 4:u=\"method\";break;case 1:u=\"text\";break;case 5:u=\"page\";break;case 2:u=\"holder\";break;case 6:u=\"name\";break;case 7:u=\"arg\";break;case 8:u=\"range\";break;case 9:u=\"data\";break;case 10:u=\"op\";break;case 11:u=\"number\";break;case 3:u=\"error\";break;case 12:u=\"extra\"}n+=9===i?\"              \"+r[a+1]+\" x \"+r[a+2]+\")\\n\":\"[\"+u+\"]\"+_(u)+e.substr(r[a+1],r[a+2])+\"\\n\"}return n}(this.parse(t)))},t.prototype.transpose=function(t,r,e,a){var i=this;a=a||this._parseContext;var u=o(t),f=u[0],s=u[1],h=u[2],c=[],p=new Map,v=new Map;zt(this._data).forEach((function(t){var u=o(t),g=u[0],l=u[1],b=u[2],d=i._data.get(t),M=i._transpose(d,f,s,r,e,a),y=t;if(b===h&&(l>=s||g>=f)&&(y=n(g>=f?g+r:g,l>=s?l+e:l,b)),d!==M||t!==y){if(v.set(t,M),b===h&&(e<0&&l>=s&&l<s-e||r<0&&g>=f&&g<f-r))return;p.set(y,M),c.push(y)}})),zt(p).forEach((function(t){return i._setMathAt(t,p.get(t))})),Array.from(v.keys()).forEach((function(t){p.has(t)||i._removeTriggers(t,null)}));for(var g=new Set,l=0;l<c.length;l++)g.add(c[l]);this.triggerSet(g)},t.prototype.transposeMath=function(t,r,e,n){return\"string\"==typeof t&&(t=this.parse(t,n)),this._transpose(t,-1,-1,r,e,n||this._parseContext).source},t.prototype._transpose=function(t,r,e,a,i,u){for(var s=!0,h=t.code,c=!(r<0||e<0),p=0;p<h.length;p+=3)if(7===h[p]){var v=o(h[p+4]),g=v[0],l=v[1],b=v[2];if(u.z!==b)continue;var d=h[p+5];if(!c&&3==d)continue;(c||0==(1&d))&&g>=r&&(s&&(h=[].concat(h),s=!1),((g+=a)<r||g<0)&&(h[p]=3)),(c||0==(2&d))&&l>=e&&(s&&(h=[].concat(h),s=!1),((l+=i)<e||l<0)&&(h[p]=3)),s||(h[p+4]=n(g,l,b)),p+=3}else if(8===h[p]){var M=h[p+5],y=h[p+8];if(!c&&3===M&&3===y)continue;var m=o(h[p+4]),_=m[0],w=m[1],E=(b=m[2],o(h[p+7])),I=E[0],D=E[1];if(u.z!==b)continue;a&&((c||0==(1&M))&&(a>0?_>=r:_>r)&&(s&&(h=[].concat(h),s=!1),(_+=a)<0&&(h[p]=3)),(c||0==(1&y))&&I>=r&&(s&&(h=[].concat(h),s=!1),(I+=a)<_&&(h[p]=3))),i&&((c||0==(2&M))&&(i>0?w>=e:w>e)&&(s&&(h=[].concat(h),s=!1),(w+=i)<0&&(h[p]=3)),(c||0==(2&y))&&D>=e&&(s&&(h=[].concat(h),s=!1),(D+=i)<w&&(h[p]=3))),s||(h[p+4]=n(_,w,b),h[p+7]=n(I,D,b)),p+=6}if(s)return t;var T={code:h,broken:t.broken,source:t.source,triggers:null,exec:null};return T=this._parser(f(T,u),u),this._generate(T.source,u,T)},t}();var Wt=function(){function t(t,r,n){this._data=[],this._id=t,this._store=r,this._meta={},this._parseContext=e(e({},n),{z:t})}return t.prototype.getMeta=function(){return this._meta},t.prototype.setMeta=function(t){this._meta=e(e({},this._meta),t)},t.prototype.getID=function(){return this._id},t.prototype.cellID=function(t,r){return n(t,r,this._id)},t.prototype.getSize=function(){var t=this._data.length,r=0;return this._data.forEach((function(t){t&&t.length>r&&(r=t.length)})),[t,r]},t.prototype.getContext=function(){return this._parseContext},t.prototype.addRow=function(t,r){this._data.splice.apply(this._data,$t(t,r)),this._store.transpose(n(t,0,this._id),r,0,this._parseContext)},t.prototype.removeRow=function(t,r){this._data.splice(t,r),this._store.transpose(n(t,0,this._id),-r,0,this._parseContext)},t.prototype.addColumn=function(t,r){var e=$t(t,r);this._data.forEach((function(t){t&&t.splice.apply(t,e)})),this._store.transpose(n(0,t,this._id),0,r,this._parseContext)},t.prototype.removeColumn=function(t,r){this._data.forEach((function(e){e&&e.splice(t,r)})),this._store.transpose(n(0,t,this._id),0,-r,this._parseContext)},t.prototype.setCell=function(t,r,n){var o=this._data[t];o||(o=this._data[t]=[]);var a=o[r];o[r]=a?e(e(e({},a),n),{value:a.value}):n,void 0!==n.value&&this.setValue(t,r,n.value)},t.prototype.setValue=function(t,r,e,o){\"string\"==typeof e&&e.length>1&&\"=\"===e[0]?this._store.setMath(n(t,r,this._id),e.substr(1),this._parseContext):this._store.setValue(n(t,r,this._id),e,o)},t.prototype.getCell=function(t,r,e){var n=this._data[t],o=n?n[r]:null;return o||!e||(n||(n=this._data[t]=[]),(o=n[r])||(o=n[r]={value:\"\"})),o},t.prototype.getValue=function(t,r,e){if(e){var o=this._store.getMath(n(t,r,this._id));if(o)return\"=\"+o.source}var a=this.getCell(t,r,!1);return a?a.value:null},t.prototype.getRange=function(t,r,e,n){for(var o=[],a=t;a<=e;a++)for(var i=r;i<=n;i++)o.push(this.getValue(a,i,!1));return o},t.prototype.getCellRange=function(t,r,e,n){for(var o=[],a=t;a<=e;a++)for(var i=r;i<=n;i++)o.push(this.getCell(a,i));return o},t.prototype.eachCell=function(t){this._data.forEach((function(r,e){r&&r.forEach((function(r,n){r&&t(e,n,r)}))}))},t.prototype.serialize=function(t){var r=this,o=[];return this.eachCell((function(a,i,u){if(u=e({},u),t){var f=r._store.getMath(n(a,i,r.getID()));f&&(u.value=\"=\"+f.source)}o.push([a,i,u])})),o},t.prototype.parse=function(t,r){var o=this;this._store.each((function(t){i(t)===o._id&&o._store.clean(t)})),this._data=[];var a=new Set;t.forEach((function(t){var i=t[0],u=t[1],f=t[2],s=o._data[i];s||(s=o._data[i]=[]);var h=(f=s[u]=e({},f)).value;if(h)if(\"string\"==typeof h&&h.length>1&&\"=\"===h[0]){var c=n(i,u,o._id),p=h.substr(1);o._store.setMath(c,p,o.getContext(),!0),a.add(c)}else if(r){f.value=null;c=n(i,u,o._id);o._store.setValue(c,h,null,!0),o._store.trigger(c,a)}})),this._store.triggerSet(a)},t}();function $t(t,r){for(var e=[t,0],n=0;n<r;n++)e.push(null);return e}var Kt=function(){function t(t,r,e){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=t,this._page=r,this._pageGetter=e}return t.prototype.get=function(t){return this._store.getMath(this._ranges.get(t))},t.prototype.toId=function(t){return this._ranges.get(t)},t.prototype.add=function(t,r){var e=this._ranges.get(t)||this._next_id();this._store.setMath(e,r,this._page.getContext()),this._ranges.set(t,e),this._refresh(t)},t.prototype.remove=function(t){this._ranges.delete(t),this._counter=1,this._refresh(t)},t.prototype.serialize=function(){var t=this;return Array.from(this._ranges.keys()).map((function(r){return[r,t.get(r).source]}))},t.prototype.parse=function(t){var r=this;t.forEach((function(t){return r.add(t[0],t[1])}))},t.prototype._refresh=function(t){var r=this,e=t.indexOf(\"!\"),n=\"\";-1!==e&&(n=t.substr(0,e),t=t.substr(e+1)),this._store.each((function(e,o){if(function(t,r,e,n){for(var o=0;o<t.length;o+=3)if(6===t[o]){if(\"\"!==e){if(5===t[o-3]&&r.substr(t[o-2],t[o-1])!==e)continue;return!0}if(r.substr(t[o+1],t[o+2])===n)return!0}return!1}(o.code,o.source,n,t)){var a=i(e);r._store.setMath(e,o.source,r._pageGetter(a).getContext())}}))},t.prototype._next_id=function(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,n(this._counter,0,this._page.getID())},t.prototype.renamePage=function(t,r){var e=this;t+=\"!\",r&&(r+=\"!\"),this._ranges.forEach((function(n,o,a){0===o.indexOf(t)&&(r?a.set(o.replace(t,r),n):e._store.clean(n),a.delete(o))}))},t}();var Qt=function(){function t(){var t=this;this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:function(r){return t._pageName2ID.get(r)},pageName:function(r){return t._pageNames[r]},pageObj:function(r){return t._pages[r]},name:function(r,e,n){var o,a=r.length,i=e.substr(r[a-2],r[a-1]);if(5===r[a-6]){var u=e.substr(r[a-5],r[a-4]);o=t._ranges.toId(u+\"!\"+i)||t._ranges.toId(i)}else o=t._ranges.toId(n.pageName(n.z)+\"!\"+i)||t._ranges.toId(i);r.push(9,o||-1,0)},z:0},this._store=new qt({get:function(r){var e=o(r),n=e[0],a=e[1],i=e[2];return t._pages[i].getValue(n,a)},set:function(r,e,n){var a=o(r),i=a[0],u=a[1],f=a[2],s=t._pages[f].getCell(i,u,!0);return null==n&&(n=s.$format||0),s.$format=n,\"string\"==typeof e&&1!=n&&e&&parseFloat(e)==e&&(e=parseFloat(e)),s.value!==e&&(s.value=e,!0)}});var r=this._pages[63]=new Wt(63,this._store,this._parseContext);this._ranges=new Kt(this._store,r,this.getPage.bind(this))}return t.prototype.addPage=function(t){for(;this._pages[this._pCounter];)this._pCounter++;var r=this._pCounter,e=new Wt(r,this._store,this._parseContext);return this._pageName2ID.set(t,r),this._pages[r]=e,this._pageNames[r]=t,e},t.prototype.renamePage=function(t,r){if(t!==r){var e=this._pageName2ID.get(t);this._pageName2ID.delete(t),this._pageName2ID.set(r,e),this._pageNames[e]=r,this._ranges.renamePage(t,r);var n=this._pages[e].getContext();this._store.regenerate(e,!1,n)}},t.prototype.removePage=function(t){var r=this._pageName2ID.get(t),e=this._pages[r].getContext();this._pageName2ID.delete(t),this._pages[r]=this._pageNames[r]=null,this._pCounter=0,this._ranges.renamePage(t,null),this._store.regenerate(r,!0,e)},t.prototype.getPage=function(t){return\"string\"==typeof t&&(t=this._pageName2ID.get(t)),this._pages[t]},t.prototype.getRanges=function(){return this._ranges},t.prototype.getStore=function(){return this._store},t}();exports.D_COMMON=0,exports.D_STRING=1,exports.DataPage=Wt,exports.DataStore=Qt,exports.Store=qt,exports.T_ARG=7,exports.T_DATA=9,exports.T_ERROR=3,exports.T_METHOD=4,exports.T_NAME=6,exports.T_NUMBER=11,exports.T_OPERATOR=10,exports.T_PAGE=5,exports.T_PLACEHOLDER=2,exports.T_RANGE=8,exports.T_SPACE=12,exports.T_TEXT=1,exports.addMethod=function(t,r){Ht[t]=r},exports.column=function(t){return t>>6&4095},exports.fromId=o,exports.methodGroups=Yt,exports.methods=Ht,exports.page=i,exports.row=a,exports.str2id=function(t){var r=[];return y(r,t,0),r[1]},exports.str2pos=function(t){var r=[];return y(r,t,0),o(r[1]).slice(0,2)},exports.str2range=function(t){var r=[];t.split(\":\").map((function(t){return y(r,t,0)}));var e=o(r[1]),n=e[0],a=e[1],i=o(r[4]);return[n,a,i[0],i[1]]},exports.toId=n;\n//# sourceMappingURL=muon.js.map\n","import {addMethod} from \"@xbs/muon\";\n\nexport function init(view){\n\tconst math = {\n\t\tIMAGE: url => `<img class=\"webix_ssheet_cimage\" src=\"${webix.template.escape(url)}\">`,\n\t\tHYPERLINK: (url, text) => `<a target=\"blank\" href=\"${webix.template.escape(url)}\">${webix.template.escape(text || url)}</a>`,\n\t\tSPARKLINE: (arr, type, color1, color2) => {\n\t\t\tconst config = { type, color: color1, negativeColor:color2  };\n\t\t\tconst width = type == \"pie\"? 60: 150;\n\n\t\t\tfor(let i = 0 ; i < arr.length; i++)\n\t\t\t\tarr[i] = arr[i]||0;\n\n\t\t\treturn webix.Sparklines.getTemplate(config)(arr, { width, height: 35 });\n\t\t}\n\t};\n\n\tconst keys = Object.keys(math);\n\tkeys.forEach((key, i) => addMath(view, key, math[key], i == keys.length - 1));\n}\n\nexport function addMath(view, name, handler, sort){\n\tname = name.toUpperCase();\n\taddMethod(name, handler);\n\tif(view.$$(\"liveEditor\")){\n\t\tconst sid = view.$$(\"liveEditor\").config.suggest;\n\t\tconst list = webix.$$(sid).getList();\n\t\tif(!list.exists(name)){\n\t\t\tlist.add({id:name, value:name});\n\t\t\tif(sort)\n\t\t\t\tlist.sort(\"value\", \"asc\", \"string\");\n\t\t}\n\t}\n}\n\nexport function getJsDateFromExcel(excelDate) {\n\tconst date = new Date(Math.round((excelDate - 25569) * 86400 * 1000));\n\treturn new Date(date.getTime() + date.getTimezoneOffset() * 60000);\n}\n\nexport function getExcelDateFromJs(jsDate) {\n\tconst returnDateTime = 25569 + ((jsDate.getTime() - (jsDate.getTimezoneOffset() * 60000)) / (86400 * 1000));\n\treturn returnDateTime.toString();\n}","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\n\nfunction getJsDate(value){\n\tif ((value || value === 0) && !(value instanceof Date) && !isNaN(value)){\n\t\tvalue = getJsDateFromExcel(value);\n\t}\n\treturn value;\n}\n\nfunction getExcelDate(value){\n\tif (value && value instanceof Date){\n\t\tvalue = getExcelDateFromJs(value);\n\t}\n\treturn value;\n}\n\nwebix.protoUI({\n\t$cssName: \"datepicker\",\n\tname: \"ssheet-datepicker\",\n\tgetValue:function(){\n\t\tconst value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\treturn getExcelDate(value) || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tvalue = getJsDate(value);\n\t\treturn webix.ui.datepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.datepicker);\n\nwebix.protoUI({\n\t$cssName: \"daterangepicker\",\n\tname: \"ssheet-daterangepicker\",\n\tgetValue:function(){\n\t\tlet value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\tif (value){\n\t\t\tvalue = webix.copy(value);\n\t\t\tvalue.start = getExcelDate(value.start);\n\t\t\tvalue.end = getExcelDate(value.end);\n\t\t}\n\t\treturn value || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tif (!value){\n\t\t\tvalue = { start:null, end:null };\n\t\t}\n\t\telse if (!value.start && !value.end)\n\t\t\tvalue = { start:value };\n\n\t\tvalue.start = getJsDate(value.start);\n\t\tvalue.end = getJsDate(value.end);\n\n\t\treturn webix.ui.daterangepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.daterangepicker);","webix.protoUI({\n\t$cssName: \"window\",\n\tname: \"ssheet-dialog\",\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_dialog\";\n\t\tthis.config.buttons = config.buttons;\n\t\tthis.config.close = true;\n\t},\n\tgetBodyConfig: function(content){\n\t\tcontent.borderless = true;\n\t\tvar elements = this.getFormElements(content);\n\t\tvar config = {\n\t\t\tview: \"form\",\n\t\t\tcss: \"webix_ssheet_form\",\n\t\t\tpadding: webix.skin.$active.layoutPadding.form,\n\t\t\telements: elements\n\t\t};\n\t\treturn config;\n\t},\n\tgetFormElements: function(content){\n\t\tvar elements;\n\t\tif(webix.isArray(content))\n\t\t\telements= content;\n\t\telse{\n\t\t\telements = [];\n\t\t\telements.push(content);\n\t\t}\n\t\tif(this.config.buttons){\n\t\t\telements.push({height:1});\n\t\t\telements.push( {\n\t\t\t\tmargin: 10,\n\t\t\t\tcols:[\n\t\t\t\t\t{},\n\t\t\t\t\t{view: \"button\", css: \"ssheet_cancel_button\", label: webix.i18n.spreadsheet.labels.cancel, autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onCancelClick\",[]);\n\t\t\t\t\t}},\n\t\t\t\t\t{view: \"button\", label: webix.i18n.spreadsheet.labels.save, hotkey: \"enter\", autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onSaveClick\",[]);\n\t\t\t\t\t}}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t\treturn elements;\n\t},\n\tbody_setter: function(value){\n\t\tif(typeof value == \"object\"){\n\t\t\tif(webix.isUndefined(value.padding))\n\t\t\t\tvalue.padding = webix.skin.$active.layoutPadding.form;\n\t\t\tif(value.view == \"form\" && value.elements){\n\t\t\t\tvalue.elements = this.getFormElements(value.elements);\n\t\t\t\tif(!value.css)\n\t\t\t\t\tvalue.css = \"webix_ssheet_form\";\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this.getBodyConfig(value);\n\t\t}\n\n\t\treturn webix.ui.window.prototype.body_setter.call(this,value);\n\t},\n\tdefaults:{\n\t\tmove:true,\n\t\thead: \"Dialog\",\n\t\tbuttons: true,\n\t\tclose:true,\n\t\t//we need to retain focus in table area, so disabling the autofocusing feature\n\t\tautofocus:false,\n\t\twidth: 350\n\t}\n}, webix.ui.window, webix.IdSpace);\n\n\n\nwebix.protoUI({\n\t$cssName: \"datatable\",\n\tname: \"ssheet-dialog-table\",\n\t$init: function(config){\n\t\tif(!config.headerRowHeight)\n\t\t\tconfig.headerRowHeight = 34;\n\t\tthis.$view.className += \" webix_ssheet_dialog_table\";\n\t}\n},webix.ui.datatable);","webix.protoUI({\n\tname: \"ssheet-form-popup\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_form\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-form-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\t$cssName: \"colorpicker\",\n\tname: \"ssheet-colorpicker\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_colorpicker\";\n\t},\n\tdefaults:{\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\",\n\t\t\t}\n\t\t}\n\t}\n}, webix.ui.colorpicker);","webix.protoUI({\n\tname:\"formlate\",\n\tsetValue:function(a){ return this.setHTML(a); },\n\tgetValue:function(){ return \"\"; }\n}, webix.ui.template);","webix.protoUI({\n\tname:\"ssheet-icons\",\n\t$cssName: \"dataview\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_dataview\";\n\t},\n\tdefaults:{\n\t\tborderless: true,\n\t\ttemplate: \"<span class='webix_ssheet_button_icon #css#' ></span>\",\n\t\ttype:{\n\t\t\twidth: 36,\n\t\t\theight: 36\n\t\t}\n\t}\n},webix.ui.dataview);","webix.protoUI({\n\tname: \"ssheet-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tcss: \"webix_ssheet_suggest\"\n\t}\n},webix.ui.contextmenu);","const group = {\n\tvalue: null,\n\tset: function(method, master){\n\t\tif(!this.value){\n\t\t\tthis.start();\n\t\t\tmethod.call(master);\n\t\t\tthis.end();\n\t\t}\n\t\telse\n\t\t\tmethod.call(master);\n\t},\n\tstart(){\n\t\tthis.value = webix.uid();\n\t},\n\tend(){\n\t\tthis.value = null;\n\t}\n};\n\nexport default group;","export function init(view){\n\tconst events = [\n\t\t{name:\"onSheetAdd\", type:\"insert\"},\n\t\t{name:\"onSheetRemove\", type:\"remove\"},\n\t\t{name:\"onSheetRename\", type:\"rename\"},\n\t\t{name:\"onCellChange\"},\n\t\t{name:\"onStyleChange\"},\n\t\t{name:\"onAction\"},\n\t\t{name:\"onRowOperation\"},\n\t\t{name:\"onColumnOperation\"},\n\t\t{name:\"onAfterConditionSet\"},\n\t\t{name:\"onAfterRangeSet\"},\n\t\t{name:\"onAfterSpan\"},\n\t\t{name:\"onAfterSplit\"},\n\t\t{name:\"onAfterFilter\", view: \"cells\"},\n\t\t{name:\"onRowResize\", view: \"cells\"},\n\t\t{name:\"onColumnResize\", view: \"cells\"}\n\t];\n\n\tlet thread;\n\tfor (let i = 0; i < events.length; i++){\n\t\tconst handler = events[i];\n\t\t(handler.view ? view.$$(handler.view) : view).attachEvent(handler.name, function(name, newName){\n\t\t\tif (view._loading_data) return;\n\n\t\t\tlet params;\n\t\t\tif(handler.type)\n\t\t\t\tparams = handler.type == \"rename\" ? [handler.type, newName, name] : [handler.type, name];\n\t\t\telse\n\t\t\t\tparams = [\"update\", view.getActiveSheet()];\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(() => view.callEvent(\"onChange\", params));\n\t\t});\n\t}\n\n\tview.attachEvent(\"onChange\", function(){\n\t\tsave(view, \"all\");\n\t});\n}\n\nexport function save(view, name, data){\n\tvar save = view.config.save;\n\tvar url;\n\tif (!save) return;\n\n\tif(name == \"all\"){\n\t\tif(!save.all)\n\t\t\treturn;\n\t\tdata = { data: view.serialize({ sheets: true }) };\n\t\turl = save.all;\n\t}\n\telse{\n\t\turl = typeof save === \"string\" ? save + \"/\" + name : save[name];\n\t}\n\n\turl = webix.proxy.$parse(url);\n\n\tif(url){\n\t\tif (typeof url === \"function\")\n\t\t\treturn url(name, data);\n\n\t\tif (url.$proxy && url.save)\n\t\t\treturn url.save(view, data, null, null);\n\n\t\tvar ajax = webix.ajax();\n\t\tif (name === \"all\")\n\t\t\tajax.headers({ \"Content-type\" : \"application/json\" });\n\t\tajax.post(url, data);\n\t}\n}","export const decode = {};\nexport const encode = {};\n\nconst alpha = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\nfunction indexToHeader(index){\n\tconst chars = alpha.length;\n\tconst quotient = Math.floor(--index / chars);\n\tif (quotient > 0)\n\t\treturn indexToHeader(quotient) + alpha[index % chars];\n\n\treturn alpha[index % chars];\n}\n\nexport function updateMaxColumn(maxColumn){\n\tconst lastColumn = Object.keys(encode).length;\n\n\tfor(let i = lastColumn + 1; i <= maxColumn; i++){\n\t\tlet str = indexToHeader(i);\n\n\t\tdecode[str] = i;\n\t\tencode[i] = str;\n\t}\n}\n\nexport function adress(text){\n\tconst size = (text.charCodeAt(1) < 59) ? 1 : 2;\n\tconst col = text.substr(0, size);\n\tconst row = text.substr(size);\n\n\treturn [row*1, decode[col]];\n}\n\nexport function range(text, view, page){\n\tconst nind = text.indexOf(\"!\");\n\tlet sheet = page || \"\";\n\n\t//parse sheet names\n\tif (nind !== -1){\n\t\tsheet = text.substr(0, nind);\n\t\tif (sheet[0] === \"'\")\n\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\ttext = text.substr(nind+1);\n\t}\n\n\tlet parts = text.split(\":\");\n\tif (parts.length != 2){\n\t\tif(view){\n\t\t\tlet code = view.ranges.getCode(text, sheet);\n\t\t\tif(!code){\n\t\t\t\t// global named range\n\t\t\t\tcode = view.ranges.getCode(text, true);\n\t\t\t\tif(!code)\n\t\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst rangeParts = code.split(\"!\");\n\t\t\tif(rangeParts[0] != page || view.getActiveSheet())\n\t\t\t\tsheet = rangeParts[0].replace(/'/g,\"\");\n\t\t\tcode = rangeParts[1];\n\t\t\tparts = code.split(\":\");\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t} \n\n\tconst d1 = adress(parts[0]);\n\tconst d2 = adress(parts[1]);\n\n\tif(d1[0] && d1[1] && d2[0] && d2[1])\n\t\treturn [d1[0], d1[1], d2[0], d2[1], sheet];\n}\n\n\nexport function escapeSheet(sheet){\n\treturn sheet.indexOf(\" \") == -1 ? sheet : `'${sheet}'`;\n}\n\nexport function toRange(x,y,x2,y2,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+encode[y]+x+\":\"+encode[y2]+x2;\n}\nexport function toSheetRange(x,y,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+x+\":\"+y;\n}\n\nexport function rangeObj(text, view){\n\tif (typeof text === \"object\") return text;\n\tconst a = range(text, view);\n\treturn { start:{ row:a[0], column:a[1]}, end:{ row:a[2], column:a[3] }, sheet: a[4] };\n}\n\nexport function eachRange(text, view, callback, data){\n\tconst range = rangeObj(text);\n\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\tfor (let column = range.start.column; column <=  range.end.column; column++) {\n\t\t\tcallback(view, {row: row, column: column}, data);\n\t\t}\n\t}\n}\n\nconst cellTest = /[A-Z]+[0-9]+/;\nexport function isRange(text){\n\tif(typeof text == \"string\"){\n\t\tconst cells = text.split(\":\");\n\t\tif(cells.length == 2){\n\t\t\tfor(let i = 0; i < cells.length; i++){\n\t\t\t\tconst parts = cells[i].split(\"!\");\n\t\t\t\tif(!cellTest.test(parts.pop()))\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nexport function changeRange(text,name,inc,start){\n\tlet updated = false;\n\n\tif(isRange(text)){\n\t\tlet [r1,c1,r2,c2,sheet] = range(text);\n\n\t\t//ranges like B2:A1\n\t\tif(r1 > r2)\n\t\t\t[r1, r2] = [r2, r1];\n\t\tif(c1 > c2)\n\t\t\t[c1, c2] = [c2, c1];\n\n\t\tif (name === \"row\" && start.row <= r2){\n\t\t\tif((inc < 0 && start.row < r1) || (inc > 0 && start.row <= r1))\n\t\t\t\tr1 += inc;\n\t\t\tr2 += inc;\n\n\t\t\tif(r2<r1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\telse if (name === \"column\" && start.column <= c2){\n\t\t\tif((inc < 0 && start.column < c1) || (inc > 0 && start.column <= c1))\n\t\t\t\tc1 += inc;\n\t\t\tc2 += inc;\n\n\t\t\tif(c2<c1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\tif(updated)\n\t\t\ttext = toRange(r1,c1,r2,c2,sheet);\n\t}\n\n\treturn text;\n}","export const toolbarSizes = {\n\twidth:38,\n\tmargin: 7,\n\tpaddingY: 1,\n\tsectorPadding: 5,\n\tsectorMargin: 0\n};\n\n// default styles for toolbar elements\nexport const defaultStyles = {\n\t\"color\"         : \"#666666\",\n\t\"background\"    : \"#ffffff\",\n\t\"font-family\"   : \"'PT Sans', Tahoma\",\n\t\"font-size\" : \"15px\",\n\t\"text-align\": \"left\",\n\t\"vertical-align\": \"middle\",\n\t\"white-space\": \"nowrap\",\n};\n\nexport function setSkinDefaults(){\n\tconst skin = webix.skin.$name;\n\tconst material = skin == \"material\" || skin == \"mini\";\n\ttoolbarSizes.width = webix.skin.$active.inputHeight+2;\n\ttoolbarSizes.titleHeight = webix.skin.$name == \"mini\" ? 18 : 20;\n\n\tdefaultStyles[\"font-family\"] = material ? \"'Roboto', sans-serif\" : \"'PT Sans', Tahoma\";\n\n\tif(skin == \"contrast\"){\n\t\tdefaultStyles.background = \"#393939\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t}\n}","import group from \"./undo_group\";\nimport {save} from \"./save\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {defaultStyles} from \"../toolbar/defaults\";\n\n//do not change order, it will break server side compatibility\n//add new options to the end of this list\nexport const style_names = [\n\t\"color\",\"background\",\"text-align\",\n\t\"font-family\",\"font-size\",\n\t\"font-style\",\"text-decoration\",\"font-weight\",\n\t\"vertical-align\", \"wrap\", \"borders\", \"format\",\n\t\"border-right\", \"border-bottom\",\"border-left\", \"border-top\"\n];\n\nconst _style_map = {\n\t\"text-align\": {\n\t\tleft: () => \"justify-content:flex-start;\",\n\t\tcenter: () => \"justify-content:center;text-align:center;\",\n\t\tright: () => \"justify-content:flex-end;text-align:right;\"\n\t},\n\t\"vertical-align\": {\n\t\ttop: () => \"align-items:flex-start;\",\n\t\tmiddle: () => \"align-items:center;\",\n\t\tbottom: () => \"align-items:flex-end;\"\n\t},\n\twrap: {\n\t\twrap: ()=> {\n\t\t\treturn \"white-space: normal !important;\";\n\t\t}\n\t},\n\t\"border-left\": obj => {\n\t\treturn getBorderCss(\"border-left\", obj);\n\t},\n\t\"border-top\": obj => {\n\t\treturn getBorderCss(\"border-top\", obj);\n\t},\n\t\"border-right\": obj => {\n\t\treturn getBorderCss(\"border-right\", obj);\n\t},\n\t\"border-bottom\": obj => {\n\t\treturn getBorderCss(\"border-bottom\", obj);\n\t},\n\t\"font-weight\": obj => {\n\t\t//Roboto bold - font-weight:500 (looks better, than 700). Roboto is default font for material skins.\n\t\tif(obj[\"font-weight\"] == \"bold\"){\n\t\t\tconst family = obj[\"font-family\"] || defaultStyles[\"font-family\"];\n\t\t\treturn \"font-weight:\" + (family == \"'Roboto', sans-serif\" ? 500 : 700) + \";\";\n\t\t}\n\t\treturn \"\";\n\t}\n};\n\nfunction getBorderCss(pos, obj){\n\tlet border = obj[pos];\n\tif(border){\n\t\tlet [color, type] = border.split(\",\");\n\n\t\ttype = type || \"thin\";\n\t\tlet size = \"1px\";\n\t\tif(type == \"medium\")\n\t\t\tsize = \"2px\";\n\t\telse if(type == \"thick\" || type == \"double\")\n\t\t\tsize = \"3px\";\n\n\t\tif([\"thin\", \"medium\", \"thick\"].indexOf(type) != -1)\n\t\t\ttype = \"solid\";\n\n\t\treturn `${pos}: ${size} ${type} ${color} !important;`;\n\t}\n\treturn \"\";\n}\n\nconst border_checks = {\n\t\"border-left\":\t\tfunction(cell, area, mode){ return cell.column == area.start.column || mode ==\"no\"; },\n\t\"border-right\":\t\tfunction(cell, area, mode){ return cell.column == area.end.column || mode == \"all\" || mode ==\"no\"; },\n\t\"border-top\":\t\tfunction(cell, area , mode){ return cell.row == area.start.row || mode ==\"no\"; },\n\t\"border-bottom\":\tfunction(cell, area, mode){ return cell.row == area.end.row || mode == \"all\"|| mode ==\"no\"; }\n};\n\nconst _style_handlers = {\n\t\"borders\": function(view, style, value, cell){\n\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\tvalue = value.split(\",\");\n\t\tconst type = value[0];\n\t\tlet color = value[1];\n\t\tlet lineStyle = value[2];\n\n\t\tvar modes = [\"border-left\", \"border-right\", \"border-bottom\", \"border-top\"];\n\n\t\tif(type == \"top-bottom\"){\n\t\t\tmodes = [\"border-top\",\"border-bottom\"];\n\t\t}\n\t\telse if (type != \"no\" && type != \"all\" && type != \"outer\")\n\t\t\tmodes = [\"border-\"+type];\n\n\t\tfor (var i = 0; i < modes.length; i++){\n\t\t\tvar mode = modes[i];\n\t\t\tlet result = view.callEvent(\"onAction\", [\"check-borders\", {row:cell.row, column:cell.column, area, type, mode}]);\n\t\t\tif (result === true || border_checks[mode](cell, area, type)){\n\t\t\t\tconst border = type == \"no\" ? \"\" : `${color},${lineStyle}`;\n\t\t\t\tstyle = _updateStyle(view, style, mode, border, cell);\n\t\t\t}\n\t\t}\n\t\treturn style;\n\t}\n};\n\nvar sizeEl;\nexport function init(view){\n\tview.attachEvent(\"onStyleSet\", (name, value) => _applyStyles(view, name, value));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, style) => {\n\t\tif(type == \"style\")\n\t\t\t_undoStyle(view, row, column, style);\n\t});\n\n\treset(view);\n\n\tif (!sizeEl)\n\t\tsizeEl = webix.html.create(\"DIV\", { style:\"visibility:hidden; position:absolute; top:0px; left:0px; height:auto;\"}, \"\");\n}\n\nfunction reset(view){\n\tview._styles = {};\n\tview._styles_cache = {};\n\tview._styles_max = 1;\n\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.removeStyle(prefix);\n}\n\nexport function getStyle(view, cell){\n\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\n\tif(span){\n\t\tconst spanStyles = span[5].split(\" \");\n\t\tfor (let i = 0; i < spanStyles.length; i++){\n\t\t\tconst spanStyle = view._styles[spanStyles[i]];\n\t\t\tif(spanStyle)\n\t\t\t\treturn spanStyle;\n\t\t}\n\t}\n\n\tif (obj && obj.style)\n\t\treturn view._styles[obj.style];\n\n\treturn null;\n}\n\nexport function getFormat(view, row, column){\n\tvar obj = view._mPage.getCell(row-1, column-1);\n\treturn (obj && obj.format) || \"\";\n}\n\n// undo\nfunction _undoStyle(view, row, column, style){\n\tvar cell = {row: row, column: column};\n\tsetStyle(view, cell, style);\n}\n\nfunction _serialize(view, obj){\n\tvar styles = [];\n\n\tfor (var key in view._styles_cache)\n\t\tstyles.push([view._styles_cache[key].id, key]);\n\n\tobj.styles = styles;\n}\n\nexport function addStyle(view, props, origin){\n\tvar style = {\n\t\tprops:styleFromText(\";;;;;;;;;;;;;;;\")\n\t};\n\n\tif (origin)\n\t\tfor (var key in origin.props)\n\t\t\tstyle.props[key] = origin.props[key];\n\n\tfor (let  key in props)\n\t\tstyle.props[key] = props[key];\n\n\n\tstyle.text = styleToText(style);\n\tvar cache = view._styles_cache[style.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view, style);\n\n\treturn style;\n}\n\nfunction _parse(view, obj){\n\tif (obj.styles)\n\t\tfor (let i=0; i < obj.styles.length; i++){\n\t\t\tvar styleObj = obj.styles[i];\n\t\t\tvar style = {\n\t\t\t\tid: styleObj[0],\n\t\t\t\ttext:styleObj[1],\n\t\t\t\tprops: styleFromText(styleObj[1])\n\t\t\t};\n\n\t\t\t_addStyle(view, style, true);\n\t\t}\n\n\tfor (let i = 0; i < obj.data.length; i++){\n\t\tvar [row, column, , css] = obj.data[i];\n\n\t\tif (css)\n\t\t\tupdate_style_data(view, row, column, view._styles[css]);\n\t}\n}\n\nfunction _applyStyles(view, name, value){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell(function(cell){\n\t\t\t_applyCellStyles(view, cell, name, value);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _applyCellStyles(view, cell, name, value){\n\tvar ostyle = getStyle(view, cell);\n\tvar nstyle = _updateStyle(view, ostyle, name, value, cell);\n\n\tif (nstyle && nstyle != ostyle)\n\t\t_setStyle(view, cell, nstyle, ostyle);\n}\n\nfunction _updateStyle(view, style, name, value, cell){\n\n\tif(_style_handlers[name]){\n\t\treturn _style_handlers[name](view, style, value, cell);\n\t}\n\n\tif (style && style.props[name] == value) return style;\n\n\tvar nstyle = { text:\"\", id:0, props: (style?webix.copy(style.props):{}) };\n\tnstyle.props[name] = value;\n\tnstyle.text = styleToText(nstyle);\n\n\tvar cache = view._styles_cache[nstyle.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view,nstyle);\n\n\treturn nstyle;\n}\n\nfunction update_style_data(view, row, column, style){\n\tconst obj = view._mPage.getCell(row-1, column-1, true);\n\tobj.style = style && style.id;\n\tobj.format = style && style.props.format;\n}\n\nexport function setStyle(view, cell, style){\n\tvar old = getStyle(view, cell);\n\treturn _setStyle(view, cell, style, old);\n}\n\nexport function setRangeStyle(view, range, style) {\n\teachRange(range, view, _setStyle, style);\n}\n\nexport function getTextSize(view, text, css, baseWidth){\n\tsizeEl.innerHTML = text;\n\tsizeEl.style.width = baseWidth ? baseWidth+\"px\" : \"auto\";\n\n\tsizeEl.className = \"webix_table_cell webix_cell \"+css;\n\tview._table.$view.appendChild(sizeEl);\n\n\tconst width = Math.max(0, sizeEl.offsetWidth+1);\n\tconst height = Math.max(0, sizeEl.offsetHeight+1);\n\n\tview._table.$view.removeChild(sizeEl);\n\tsizeEl.innerHTML = \"\";\n\n\treturn { width, height };\n}\n\nfunction _setStyle(view, cell, style, old){\n\tif(view.callEvent(\"onBeforeStyleChange\", [cell.row, cell.column, style, old])){\n\t\tgroup.set(()=>{\n\t\t\tconst format = style && style.props.format || null;\n\t\t\tconst oldFormat = old && old.props.format || null;\n\t\t\tconst formatChanged = format != oldFormat;\n\t\t\tif(!formatChanged || formatChanged && view.callEvent(\"onBeforeFormatChange\", [cell.row, cell.column, format, oldFormat])){\n\t\t\t\tupdate_style_data(view, cell.row, cell.column, style);\n\t\t\t\tview.callEvent(\"onStyleChange\", [cell.row, cell.column, style, old]);\n\n\t\t\t\tif(formatChanged)\n\t\t\t\t\tview.callEvent(\"onFormatChange\", [cell.row, cell.column, format, oldFormat]);\n\n\t\t\t\tview.saveCell(cell.row,cell.column);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction _buildCssString(style) {\n\tlet css = \"\";\n\n\tfor (var key in style){\n\t\tif (style[key]){\n\t\t\tif( _style_map[key]){\n\t\t\t\tif(_style_map[key][style[key]])\n\t\t\t\t\tcss += _style_map[key][style[key]](style);\n\t\t\t\telse if(typeof  _style_map[key] == \"function\")\n\t\t\t\t\tcss += _style_map[key](style);\n\t\t\t}\n\t\t\telse\n\t\t\t\tcss+= key+\":\"+style[key]+\";\";\n\t\t}\n\t}\n\n\treturn css;\n}\n\nfunction _addStyle(view, style, silent){\n\tview._styles_cache[style.text] = style;\n\n\twhile (!style.id || view._styles[style.id])\n\t\tstyle.id = \"wss\"+(view._styles_max++);\n\tview._styles[style.id] = style;\n\n\tconst css = _buildCssString(style.props);\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.addStyle(prefix+\" .\"+style.id+\"{\"+css+\"}\", prefix);\n\n\tif (!silent)\n\t\tsave(view, \"styles\", { name:style.id, text: style.text } );\n}\n\nexport function styleToText(style){\n\tvar id = [];\n\tfor (var i=0; i<style_names.length; i++)\n\t\tid.push(style.props[style_names[i]]);\n\treturn id.join(\";\");\n}\n\nexport function styleFromText(text){\n\tvar parts = text.split(\";\");\n\tvar props = {};\n\tfor (var i=0; i<style_names.length; i++)\n\t\tprops[style_names[i]] = parts[i];\n\treturn props;\n}\n\n\n\nexport function clearRangeStyle(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tlet style = getStyle(view,cell);\n\t\t\tif (style)\n\t\t\t\tsetStyle(view, cell, null);\n\t\t});\n\t});\n}\n\nexport function compactStyles(view){\n\tconst serialized = view.serialize();\n\tserialized.styles = removeUnusedStyles(serialized);\n\n\treset(view);\n\t_parse(view, serialized);\n}\n\nexport function removeUnusedStyles(serialized){\n\tconst data = serialized.data;\n\tconst styles = serialized.styles;\n\n\tconst used = {};\n\tfor (let i=0; i<data.length; i++){\n\t\tconst name = data[i][3];\n\t\tif (name)\n\t\t\tused[name] = 1;\n\t}\n\n\tconst newStyles = [];\n\tfor(let i = 0; i<styles.length; i++){\n\t\tconst name = styles[i][0];\n\t\tif (used[name])\n\t\t\tnewStyles.push(styles[i]);\n\t}\n\n\treturn newStyles;\n}","export function find(arr, func){\n\tvar result = findIndex(arr, func);\n\treturn arr[result];\n}\n\nexport function findIndex(arr, func){\n\tvar result = -1;\n\tfor(var i =0; result<0 && i < arr.length; i++){\n\t\tif(func(arr[i]))\n\t\t\tresult = i;\n\t}\n\treturn result;\n}\n\nexport function getDimension(data, spans, rows, cols){\n\tfor(let i=0; i<data.length; i++){\n\t\t// data[i] - [ row, column, value, style]\n\t\tlet line = data[i];\n\t\tif (line[0]>rows) rows=line[0];\n\t\tif (line[1]>cols) cols=line[1];\n\t}\n\n\tif(spans)\n\t\tfor(let i = 0; i < spans.length; i++){\n\t\t\t// spans[i] - [ row, column, colCount, rowCount ]\n\t\t\tconst spanEndRow = spans[i][0] + spans[i][3] - 1;\n\t\t\tconst spanEndCol = spans[i][1] + spans[i][2] - 1;\n\n\t\t\tif(spanEndRow > rows) rows = spanEndRow;\n\t\t\tif(spanEndCol > cols) cols = spanEndCol;\n\t\t}\n\n\treturn [rows*1, cols*1];\n}","import {addStyle, styleFromText} from \"./styles\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport group from \"./undo_group\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onDataParse\", (data) => load(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => serialize(view, data, config));\n}\n\nexport let formatHelpers = {};\nexport let currencies = [];\nconst defaultFormats = {common:1};\n\nlet formats;\nlet formatsCount;\nlet formatSources;\nlet formatCache;\n\nfunction getCurrencySymbol(format){\n\treturn webix.template(format)(\"\");\n}\n\nexport function setDefaultFormats(){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\n\tcurrencies = [ webix.i18n.price ];\n\tcurrencies = currencies.concat(webix.copy(formatsLocale.currencies));\n\n\tcurrencies = currencies.map(format => {\n\t\tconst id = getCurrencySymbol(format);\n\t\treturn {\n\t\t\tformat,\n\t\t\tid,\n\t\t\tvalue: id.trim()\n\t\t};\n\t});\n\n\tformats = {};\n\tformatsCount = 0;\n\tformatSources = {};\n\tformatCache = {};\n\tformatHelpers = {\n\t\tprice : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_price\";\n\t\t\t\treturn webix.i18n.priceFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.priceSettings.decimalSize, \n\t\t\t\tsymbol: webix.i18n.priceFormat(\"\"),\n\t\t\t\tseparator: 1, negative:1, type: \"price\"\n\t\t\t}, getDelimiters(\"price\"))\n\t\t},\n\t\t\"int\" : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_int\";\n\t\t\t\treturn webix.i18n.numberFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.decimalSize,\n\t\t\t\tseparator: 1, negative:1, type: \"int\",\n\t\t\t}, getDelimiters(\"int\"))\n\t\t},\n\t\tpercent : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_percent\";\n\t\t\t\treturn Math.round(value*100)+\"%\";\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: 0, separator: 0, negative:1, type: \"percent\",\n\t\t\t}, getDelimiters(\"percent\"))\n\t\t},\n\t\tdate : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_date\";\n\t\t\t\treturn format2code(formatsLocale.dateFormat, getDelimiters(\"date\"))(value);\n\t\t\t},\n\t\t\tvalues: { type:\"date\", date:formatsLocale.dateFormat }\n\t\t},\n\t\tstring : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_text\";\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\tvalues: { type:\"string\" }\n\t\t}\n\t};\n\n\tfor(let i in formatHelpers){\n\t\tdefaultFormats[i] = 1;\n\t\tformatSources[i] = serializeFormat(formToValues(i, formatHelpers[i].values));\n\t\tformatCache[formatSources[i]] = i;\n\t}\n}\n\nexport function getDelimiters(type){\n\tif(type == \"price\")\n\t\treturn { groupSign:webix.i18n.priceSettings.groupDelimiter, decimalSign:webix.i18n.priceSettings.decimalDelimiter };\n\telse \n\t\treturn { groupSign:webix.i18n.groupDelimiter, decimalSign:webix.i18n.decimalDelimiter };\n}\n\nfunction serialize(view, data){\n\tconst formats = [];\n\n\tfor(let i in formatSources){\n\t\tif(defaultFormats[i]) //exclude default formats\n\t\t\tformats.push([i,formatSources[i]]);\n\t}\n\tdata.formats = formats;\n}\n\nfunction load(view,data){\n\tvar i,\n\t\tformats = data.formats;\n\n\tif(formats)\n\t\tfor(i = 0; i < formats.length; i++)\n\t\t\tcreateFormatName(formats[i][1],formats[i][0]);\n}\n\nexport function getFormat(name){\n\treturn formatHelpers[name] ? formatHelpers[name].getFormat : formatHelpers[name];\n}\n\nexport function getFormatSource(name, toexcel){\n\tif(toexcel){\n\t\tlet parsed = parseFormat({values: formatHelpers[name].values, format: formatSources[name]});\n\t\treturn serializeFormat(parsed, true);\n\t}\n\telse\n\t\treturn formatSources[name];\n}\n\nfunction createFormatName(str, values){\n\tif (formatCache[str]) return formatCache[str];\n\n\tlet name = typeof(values) == \"object\" ? \"fmt\"+(formatsCount) : values;\n\tformatsCount++;\n\n\tformats[name] = str;\n\n\tif(typeof(values) == \"string\")\n\t\tvalues = formatToForm(str);\n\n\twebix.extend(\n\t\tvalues,\n\t\tgetDelimiters(\"custom\")\n\t);\n\n\tformatHelpers[name] = {\n\t\tgetFormat:format2code(str, {decimalSign: values.decimalSign, groupSign: values.groupSign}),\n\t\tvalues: values\n\t};\n\n\tformatSources[name] = str;\n\tformatCache[str] = name;\n\n\treturn name;\n}\n\nexport function addFormat(view, row, column, format, type){\n\tif(!type)\n\t\ttype = {format:format, type: \"custom\"};\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:createFormatName(format, type) }, old);\n\tview.setStyle(row, column, nev);\n}\n\nexport function removeFormat(view, row, column){\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:\"\" }, old);\n\tview.setStyle(row, column, nev);\n}\n\nfunction splitFormat(str){\n\tvar conditional = str.match(/.*\\[[><=].*/g);\n\tvar parts = str.split(\";\");\n\tif (!conditional){\n\t\tif (parts.length > 1){\n\t\t\tparts[0] = (parts.length > 2 ? \"[>0]\" : \"[>=0]\")+parts[0];\n\t\t\tparts[1] = \"[<0]\"+parts[1];\n\t\t\tif (parts[2])\n\t\t\t\tparts[2] = \"[=0]\"+parts[2];\n\t\t}\n\t}\n\treturn parts;\n}\n\nexport function format2code(str, delimiters){\n\tconst errorMessage = webix.i18n.spreadsheet.table[\"format-error\"];\n\tlet parts = splitFormat(str);\n\tlet code = [\"var spaces = \\\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\";\"];\n\tfor (var i=0; i<parts.length; i++){\n\t\tvar separated = separateFmt(parts[i]);\n\t\tcode.push(genCode(separated.condition, separated.color.toLowerCase(), separated.symbol, separated.fmt, i, parts.length > 0, delimiters));\n\t}\n\n\treturn new Function(\"val\",\"extra\", `try{ ${code.join(\"\\n\")} return val; } catch(err) { return \"${errorMessage}\"; }`);\n}\n\nfunction genCode(check, color, symbol, line, ind, isAbs, delimiters){\n\tvar str = \"\";\n\tif (check){\n\t\tif (!ind) str+=\"if\"; else str+=\"else if\";\n\t\tif (check[0] === \"=\") check = \"=\"+check;\n\t\tstr+=\"(val\"+check+\"){\";\n\t\tif (isAbs) str+=\"val = Math.abs(val);\";\n\t}\n\tif (color)\n\t\tstr+=\"extra.css = \\\"webix_ssheet_format_\"+color+\"\\\";\";\n\n\tstr += genFormatCode(line, delimiters, symbol);\n\n\treturn str+(check?\"}\":\"\");\n}\n\nconst dateTypes = {\n\t\"yy\": \"%y\",\n\t\"yyyy\": \"%Y\",\n\t\"m\": \"%n\",\n\t\"mm\": \"%m\",\n\t\"mmm\": \"%M\",\n\t\"mmmm\": \"%F\",\n\t\"mmmmm\":\"%F\", //not supported by webix\n\t\"d\": \"%j\",\n\t\"dd\": \"%d\",\n\t\"ddd\": \"%D\",\n\t\"dddd\": \"%l\"\n};\n\nconst timeTypes = {\n\t\"h\": \"%G\",\n\t\"hh\": \"%H\",\n\t\"m\": \"%i\", //not supported by webix\n\t\"mm\": \"%i\",\n\t\"s\": \"%s\", //not supported by webix\n\t\"ss\": \"%s\",\n\t\"AM/PM\": \"%A\"\n};\n\nconst dateOrder = Object.keys(dateTypes).sort((a, b) => b.length - a.length);\nconst timeOrder = Object.keys(timeTypes).sort((a, b) => b.length - a.length);\n\nfunction excelDateToWebix(text, lastDateType){\n\tconst typesOrder = [\n\t\t{name:\"date\", order:dateOrder, types:dateTypes}, \n\t\t{name:\"time\", order:timeOrder, types:timeTypes}\n\t];\n\n\t// \"m\"/\"mm\" format can be either date (%n/%m) or time (%i), so check last date type\n\tconst basedOnLast = /^m{1,2}(?!m)/.test(text);\n\tif(basedOnLast && lastDateType != \"date\")\n\t\ttypesOrder.reverse();\n\n\tfor(let i = 0; i < typesOrder.length; i++){\n\t\tconst type = typesOrder[i];\n\t\tfor(let j = 0; j < type.order.length; j++)\n\t\t\tif(text.indexOf(type.order[j]) == 0)\n\t\t\t\treturn {\n\t\t\t\t\tformat: type.types[type.order[j]],\n\t\t\t\t\tlength: type.order[j].length,\n\t\t\t\t\ttype: type.name\n\t\t\t\t};\n\t}\n}\n\nfunction genFormatCode(line, delimiters, symbol){\n\tif (!line)\n\t\treturn \"return val;\";\n\n\tlet str = \"return \\\"\\\"\";\n\n\tlet isQuote;\n\tlet fmt = \"\";\n\tlet multiply = 1;\n\tlet comma, numberPlaceholder, textPlaceholder;\n\tlet date = [];\n\tlet lastDateType = \"date\";\n\n\tlet symbolPos;\n\tif(symbol){\n\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\tsymbolPos = \"left\";\n\n\t\tif(currency)\n\t\t\tsymbolPos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\t}\n\n\tfor (var i=0; i<line.length; i++){\n\t\tvar betweenPlaceholders = placeholder(line[i-1])&&placeholder(line[i+1]);\n\t\tif (line[i] == \"\\\"\"){\n\t\t\tif(webix.isUndefined(isQuote))\n\t\t\t\tisQuote = i;\n\t\t\telse {\n\t\t\t\tstr += `+\"${line.substr(isQuote+1, i-isQuote-1)}\"`;\n\t\t\t\tisQuote = undefined;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (!webix.isUndefined(isQuote))\n\t\t\tcontinue;\n\t\tif(line[i] == \"%\")\n\t\t\tmultiply = multiply*100;\n\n\t\tif(/[a-zA-Z]/.test(line[i])){\n\t\t\tconst datePart = excelDateToWebix(line.substr(i), lastDateType);\n\t\t\tif(datePart){\n\t\t\t\tif(numberPlaceholder || textPlaceholder)\n\t\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\t\tdate.push(datePart.format);\n\t\t\t\tstr += \"/*date*/\"; //update this value after date format is ready\n\t\t\t\tlastDateType = datePart.type;\n\t\t\t\ti += datePart.length-1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t\tstr += `+\"${line[i]}\"`;\n\t\t}\n\t\telse if (line[i] === delimiters.decimalSign && betweenPlaceholders){\n\t\t\tfmt+= delimiters.decimalSign;\n\t\t}\n\t\telse if(line[i]==\"@\"){\n\t\t\tif(numberPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\tif(!textPlaceholder){\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\ttextPlaceholder = true;\n\t\t\t}\n\t\t\tfmt+=line[i];\t\t\n\t\t}\n\t\telse if (placeholder(line[i])){\n\t\t\tif(textPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected text placeholder\\\";\";\n\t\t\tif (!numberPlaceholder) {\n\t\t\t\tif(symbolPos == \"left\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\tif(symbolPos == \"right\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tnumberPlaceholder=true;\n\t\t\t}\n\t\t\tfmt+=line[i];\n\t\t}\n\t\telse if (line[i] === delimiters.groupSign && betweenPlaceholders)\n\t\t\tcomma = true;\n\t\telse\n\t\t\tstr += `+\"${line[i]}\"`;\n\t}\n\n\tif(date.length){\n\t\t// 12-hour or 24-hour clock depends on AM/PM in format\n\t\tif(date.indexOf(\"%A\") != -1)\n\t\t\tdate = date.map(datePart => {\n\t\t\t\tswitch(datePart){\n\t\t\t\t\tcase \"%G\": return \"%g\";\n\t\t\t\t\tcase \"%H\": return \"%h\";\n\t\t\t\t\tdefault: return datePart;\n\t\t\t\t}\n\t\t\t});\n\n\t\tfor(let i = 0; i < date.length; i++)\n\t\t\tstr = str.replace(\"/*date*/\", `+dateParts[${i}]`);\n\t}\n\n\treturn `\n\t\t${date.length ? `val = (${getJsDateFromExcel})(val); var dateParts = webix.Date.dateToStr(\"${date.join(\";\")}\")(val).split(\";\");` : \"\"}\n\t\t${fmt ? `${numberFormat(fmt, comma, delimiters, multiply)};` : \"\"}\n\t\t${str};`;\n}\n\nfunction numberFormat(fmt, comma, delimiters, multiply){\n\tvar str = `if(/^@+$/.test(\"${fmt}\") || isNaN(val)){ var fmt = val; }else {`;\n\tvar decimal = delimiters.decimalSign;\n\tvar [left, right] = getParts(fmt, decimal);\n\tright = (right || \"\").split(\"\").reverse().join(\"\");\n\n\t//calculate indexes in mask\n\tvar lzeros = left.indexOf(\"0\"); if (lzeros>=0) lzeros = left.length - lzeros;\n\tvar lfills = left.indexOf(\"?\"); if (lfills>=0) lfills = left.length - lfills;\n\tvar rzeros = right.indexOf(\"0\"); if (rzeros>=0) rzeros = right.length - rzeros;\n\tvar rfills = right.indexOf(\"?\"); if (rfills>=0) rfills = right.length - rfills;\n\tvar rmax = right.length;\n\n\tstr += `\n\tval = val*${multiply};\n\tvar parts = val.toFixed(${rmax}).split(\".\");\n\tvar left = parts[0];\n\tvar lsize = left.length; \n\tvar right = parts[1] || \"\";\n\tif (left.length < ${lzeros}) left = \"0000000000\".substr(0, ${lzeros} - left.length)+left;\n\tif (left.length < ${lfills}) left = spaces.substr(0, 6*(${lfills} - left.length))+left;\n\tif (${comma}) {\n\t\tvar buf = [];\n\t\tvar start = 3;\n\t\twhile (lsize > start) { buf.push(left.substr(left.length-start,3)); start+=3; }\n\t\tvar last = left.substr(0,left.length-start+3);\n\t\tif (last !== \"-\")\n\t\t\tbuf.push(last);\n\t\telse\n\t\t\tbuf.push(\"-\"+buf.pop());\n\n\t\tleft = buf.reverse().join(\"${delimiters.groupSign}\");\n\t}\n\tif (right){\n\t\tvar zpoint = right.length-1;\n\t\twhile (zpoint >= ${rzeros}){\n\t\t\tif (right[zpoint] !== \"0\"){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tzpoint--;\n\t\t}\n\n\t\tif (zpoint <= right.length)\n\t\t\tright = right.substr(0, zpoint+1);\n\n\t\tif (right.length < ${rfills}){\n\t\t\tright += spaces.substr(0, 6*(${rfills} - right.length));\n\t\t}\n\t}\n\tvar fmt = left+(right?\"${decimal}\":\"\")+right;\n\t`;\n\n\treturn str+\"}\\n\";\n}\n\nfunction updateDecimals(fmt, inc, val){\n\tlet parsed = parseFormat(fmt);\n\tfor(let i = 0; i < parsed.length; i++){\n\t\tif(parsed[i].decimals){\n\t\t\tif(inc>0)\n\t\t\t\tparsed[i].right.placeholders += Array(inc+1).join(\"0\");\n\t\t\telse\n\t\t\t\tparsed[i].right.placeholders = parsed[i].right.placeholders.slice(0, inc);\n\t\t}\n\t\telse{\n\t\t\tconst withoutText = !parsed[i].left.text && !parsed[i].right.text;\n\t\t\tconst withoutPlaceholders = !parsed[i].left.placeholders && !parsed[i].right.placeholders;\n\t\t\t//check if cell value have decimals (not cell format)\n\t\t\tif(inc < 0 && withoutText && withoutPlaceholders && webix.rules.isNumber(val) && val.indexOf(\".\") > -1){\n\t\t\t\tparsed[i].left.placeholders = \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(val.split(\".\")[1].length).join(Array(inc+1).join(\"0\"));\n\t\t\t}\n\t\t\t//ignore text\n\t\t\telse if(inc > 0 && (parsed[i].left.placeholders || withoutText)){\n\t\t\t\tparsed[i].left.placeholders = parsed[i].left.placeholders || \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(inc+1).join(\"0\");\n\t\t\t\tparsed[i].decimals = true;\n\t\t\t}\n\t\t}\n\t\tparsed[i].decimals = parsed[i].right.placeholders.length > 0;\n\t}\n\n\treturn serializeFormat(parsed);\n}\n\nexport function changeAreaDecimals(view, inc, row, column){\n\tlet cells = getCells(view, row, column);\n\tif(cells.length == 0)\n\t\treturn;\n\n\tconst obj = view._mPage.getCell(cells[0].row-1, cells[0].column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\t\n\tif(webix.rules.isNumber(value) || oldFormat){\n\t\tgroup.set(function(){\n\t\t\tfor(let i = 0; i < cells.length; i++)\n\t\t\t\tchangeCellDecimals(view, inc, cells[i]);\n\t\t});\n\t\tview.refresh();\n\n\t\tlet format = getFormatName(view, cells[0].row, cells[0].column) || \"common\";\n\t\tformat = isCustom(format) ? \"custom\" : format;\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t}\n}\n\nexport function changeCellDecimals(view, inc, cell){\n\tlet format;\n\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\n\tif(oldFormat){\n\t\tformat = webix.copy({values:formatHelpers[oldFormat].values, format:getFormatSource(oldFormat)});\n\t\tformat.format = updateDecimals(format, inc, value);\n\n\t\tif(format.values && format.values.hasOwnProperty(\"zeros\"))\n\t\t\tformat.values.zeros = Math.max(format.values.zeros+inc, 0);\n\t}\n\t//add format for cell without format\n\telse{\n\t\tconst zeros = webix.rules.isNumber(value) && value.split(\".\")[1] ? Math.max(value.split(\".\")[1].length+inc, 0) : Math.max(inc, 0);\n\n\t\tformat = {values:{negative:1, zeros:zeros, separator:0, type:\"int\"}};\n\t\tformat.format = serializeFormat(formToValues(format.values.type, format.values));\n\t}\n\taddFormat(view, cell.row, cell.column, format.format, format.values);\n}\n\nexport function isCustom(name){\n\treturn !defaultFormats[name];\n}\n\nexport function formToValues(type, formValues){\n\tif(type == \"string\")\n\t\treturn [{left:{text:\"@\"}}];\n\tif(formValues.date)\n\t\treturn [{left:{text:formValues.date}}];\n\n\tlet values = [{condition:\">=0\", left:{text:\"\"},right:{text:\"\"}}, {condition:\"<0\", left:{text:\"\"}, right:{text:\"\"}}];\n\twebix.extend(values, getDelimiters(type));\n\tvalues[0].right.placeholders = values[1].right.placeholders = formValues.zeros ? Array(formValues.zeros + 1).join(\"0\") : \"\";\n\tvalues[0].separator = values[1].separator = formValues.separator && type != \"percent\";\n\tvalues[0].left.placeholders = values[1].left.placeholders = values[0].separator ? \"#\"+values.groupSign +\"0\" : \"0\";\n\tvalues[0].decimals = values[1].decimals = formValues.zeros ? true : false;\n\tvalues[1].color = formValues.negative != 1 ? \"red\" : \"\";\n\tvalues[1].left.text += formValues.negative < 3 ? \"-\" : \"\";\n\tif(formValues.negative == 4)\n\t\tvalues[1].left.text += \"(\";\n\n\tif(type === \"percent\")\n\t\tvalues[0].right.text = values[1].right.text += \"%\";\n\telse if(type === \"price\"){\n\t\tconst symbolId = formValues.symbol;\n\t\tconst currency = arr.find(currencies, val => val.id == symbolId);\n\t\tconst pos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\tvalues[0][pos].symbol = values[1][pos].symbol = symbolId;\n\t}\n\n\tif(formValues.negative == 4)\n\t\tvalues[1].right.text += \")\";\n\n\treturn values;\n}\n\nfunction formatToForm(format){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\tconst dates = [\n\t\tformatsLocale.dateFormat,\n\t\tformatsLocale.timeFormat,\n\t\tformatsLocale.fullDateFormat,\n\t\tformatsLocale.longDateFormat\n\t];\n\tconst form = {format, type:\"custom\"};\n\n\tif(arr.find(dates, date => date == format)){\n\t\twebix.extend(form, {\n\t\t\ttype:\"date\", date:format\n\t\t}, true);\n\t}\n\telse{\n\t\tlet [first, second] = format.split(\";\");\n\t\tif(first && second){\n\t\t\tif(first.indexOf(\"[>=0]\") == 0 && second.indexOf(\"[<0]\") == 0){\n\t\t\t\tfirst = first.replace(\"[>=0]\", \"\");\n\t\t\t\tsecond = second.replace(\"[<0]\", \"\");\n\n\t\t\t\tlet red;\n\t\t\t\tif(second.indexOf(\"[red]\") == 0){\n\t\t\t\t\tsecond = second.replace(\"[red]\", \"\");\n\t\t\t\t\tred = true;\n\t\t\t\t}\n\n\t\t\t\tif(second[0] == \"-\"){\n\t\t\t\t\tsecond = second.substring(1);\n\t\t\t\t\tform.negative = red ? 2 : 1;\n\t\t\t\t}\n\t\t\t\telse if(red){\n\t\t\t\t\tif(second[0] == \"(\" && second[second.length-1] == \")\"){\n\t\t\t\t\t\tform.negative = 4;\n\t\t\t\t\t\tsecond = second.substring(1, second.length-1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tform.negative = 3;\n\t\t\t\t}\n\n\t\t\t\tif(form.negative && first == second){\n\t\t\t\t\tlet type = \"int\";\n\t\t\t\t\tlet priceBrackets = first.indexOf(\"[$\") != -1;\n\n\t\t\t\t\tif(first[first.length-1] == \"%\"){\n\t\t\t\t\t\tfirst = first.substring(0, first.length-1);\n\t\t\t\t\t\ttype = \"percent\";\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(let i = 0; i < currencies.length; i++){\n\t\t\t\t\t\t\tconst currency = currencies[i].id;\n\t\t\t\t\t\t\tlet isPrice;\n\n\t\t\t\t\t\t\tif(priceBrackets){\n\t\t\t\t\t\t\t\tif(first.indexOf(`[$${currency}]`) != -1){\n\t\t\t\t\t\t\t\t\tfirst = first.replace(`[$${currency}]`, \"\");\n\t\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(first.indexOf(currency) != -1){\n\t\t\t\t\t\t\t\tfirst = first.replace(currency, \"\");\n\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(isPrice){\n\t\t\t\t\t\t\t\ttype = \"price\";\n\t\t\t\t\t\t\t\tform.symbol = currency;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst delimiters = getDelimiters(type);\n\n\t\t\t\t\tif(first.indexOf(\"#\"+delimiters.groupSign) == 0){\n\t\t\t\t\t\tfirst = first.replace(\"#\"+delimiters.groupSign, \"\");\n\t\t\t\t\t\tform.separator = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [integer, decimal] = first.split(delimiters.decimalSign);\n\t\t\t\t\tif((!integer || integer == \"0\") && (!decimal || /^[0]+$/.test(decimal))){\n\t\t\t\t\t\tform.type = type;\n\t\t\t\t\t\tform.delimiters = delimiters;\n\t\t\t\t\t\tform.zeros = decimal ? decimal.length : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn form;\n}\n\nexport function serializeFormat(values, toExcel){\n\tlet fmt = \"\";\n\tfor(let i = 0; i < values.length; i++){\n\t\tif(values[i].condition)\n\t\t\tfmt += \"[\"+values[i].condition+\"]\";\n\t\tif(values[i].color)\n\t\t\tfmt += \"[\"+values[i].color+\"]\";\n\n\t\tif(values[i].left){\n\t\t\tif(values[i].left.text){\n\t\t\t\tlet leftText = values[i].left.text;\n\t\t\t\tfmt += leftText;\n\t\t\t}\n\t\t\tif(values[i].left.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].left.symbol+\"]\";\n\t\t\tif(values[i].left.placeholders){\n\t\t\t\tlet leftPlaceholders = values[i].left.placeholders;\n\t\t\t\tfmt += toExcel ? leftPlaceholders.replace(values.groupSign, \",\") : leftPlaceholders;\n\t\t\t}\n\t\t}\n\n\t\tif(values[i].decimals)\n\t\t\tfmt += toExcel ? \".\" : values.decimalSign;\n\n\t\tif(values[i].right){\n\t\t\tif(values[i].right.placeholders)\n\t\t\t\tfmt += values[i].right.placeholders;\n\t\t\tif(values[i].right.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].right.symbol+\"]\";\n\t\t\tif(values[i].right.text){\n\t\t\t\tlet rightText = values[i].right.text;\n\n\t\t\t\tfmt += rightText;\n\t\t\t}\n\t\t}\n\t\tif(i != values.length - 1)\n\t\t\tfmt += \";\";\n\t}\n\treturn fmt;\n}\n\nfunction parseFormat(fmt){\n\tconst fmtParts = fmt.format.split(\";\");\n\tlet values = [];\n\n\tfor(let i = 0; i < fmtParts.length; i++){\n\t\tlet separated = separateFmt(fmtParts[i]);\n\t\tvalues[i] = {color:separated.color, condition:separated.condition ,left:{}, right:{}};\n\n\t\tconst format = separated.fmt;\n\n\t\tvalues.groupSign = fmt.values.groupSign;\n\t\tvalues.decimalSign = fmt.values.decimalSign;\n\n\t\tif(format.indexOf(values.groupSign) > -1)\n\t\t\tvalues[i].separator = true;\n\n\t\tconst sepFmtParts = getParts(format, values.decimalSign);\n\n\t\tlet left = sepFmtParts[0];\n\t\tlet right = sepFmtParts[1] || \"\";\n\n\t\tif(sepFmtParts[1])\n\t\t\tvalues[i].decimals = true;\n\n\t\tleft = getFmtPartValues(left, \"left\", values.groupSign);\n\t\tright = getFmtPartValues(right, \"right\", values.groupSign);\n\n\t\tvalues[i].left = {\n\t\t\ttext: left.leftText,\n\t\t\tplaceholders: left.placeholders\n\t\t};\n\n\t\tvalues[i].right = {\n\t\t\ttext: left.rightText + right.rightText,\n\t\t\tplaceholders: right.placeholders\n\t\t};\n\n\t\tconst symbol = separated.symbol;\n\t\tif(symbol){\n\t\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\t\tlet pos = \"left\";\n\n\t\t\tif(currency)\n\t\t\t\tpos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\t\tvalues[i][pos].symbol = symbol;\n\t\t}\n\t}\n\treturn values;\n}\n\nfunction getFmtPartValues(fmtPart, type, groupSign){\n\tlet firstPlaceholder;\n\tif(type == \"left\"){\n\t\tfirstPlaceholder = fmtPart.match(/[#?0]/);\n\t\tfirstPlaceholder = firstPlaceholder ? firstPlaceholder.index : Infinity;\n\t}\n\n\tlet leftText = \"\";\n\tlet rightText = \"\";\n\tlet placeholders = \"\";\n\tfor(let k = 0; k < fmtPart.length; k++){\n\t\tif(!placeholder(fmtPart[k])){\n\t\t\tif(fmtPart[k] == groupSign && placeholder(fmtPart[k+1]) && placeholder(fmtPart[k-1])){\n\t\t\t\tplaceholders += fmtPart[k];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(type == \"left\")\n\t\t\t\tif(k < firstPlaceholder){\n\t\t\t\t\tleftText += fmtPart[k];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\trightText += fmtPart[k];\n\t\t}\n\t\telse\n\t\t\tplaceholders += fmtPart[k];\n\t}\n\treturn {leftText: leftText, rightText: rightText, placeholders: placeholders};\n}\n\nfunction separateFmt(line){\n\tlet color = \"\";\n\tlet check = \"\";\n\tlet symbol = \"\";\n\n\tlet start = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tif (line[1].match(/[><=]/)){\n\t\t\tlet end = line.indexOf(\"]\");\n\t\t\tcheck = line.substr(start+1, end-start-1);\n\t\t\tline = line.substr(end+1);\n\t\t}\n\t}\n\n\tstart = line.indexOf(\"[$\");\n\tif(start != -1){\n\t\tlet end = start + line.substr(start).indexOf(\"]\");\n\t\tsymbol = line.substr(start+2, end-start-2);\n\t\tline = line.substr(0, start)+line.substr(end+1);\n\t}\n\n\tstart = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tlet end = line.indexOf(\"]\");\n\t\tcolor = line.substr(start+1, end-start-1);\n\t\tline = line.substr(end+1);\n\t}\n\treturn {condition:check, color, symbol, fmt:line};\n}\n\nfunction getCells(view, row, column){\n\tif(row && column){\n\t\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\t\tlet cells = [];\n\t\t\tfor (let r = row.row; r<=column.row; r++)\n\t\t\t\tfor (let c = row.column; c<=column.column; c++)\n\t\t\t\t\tcells.push({row: r, column: c});\n\t\t\treturn cells;\n\t\t}\n\t\telse\n\t\t\treturn [{row: row, column: column}];\n\t}\n\telse\n\t\treturn view.getSelectedId(true);\n}\n\nfunction placeholder(val){\n\treturn val === \"0\" || val === \"#\" || val === \"?\";\n}\n\nfunction getParts(str, decimal){\n\t// it is nessesary to use \"/\" before decimal to escape regex special characters\n\tconst match = str.match(\"[#?0][/\"+decimal+\"][#?0]\");\n\tif(match)\n\t\treturn [str.substring(0, match.index+1), str.substring(match.index+2)];\n\telse\n\t\treturn [str];\n}\n\n//simple check: take into account only first condition\nexport function checkFormat(format, type, checkTime){\n\tformat = format && format.fmt ? format.fmt : getFormatSource(format);\n\tif(!format) return;\n\tconst parts = splitFormat(format);\n\tconst separated = separateFmt(parts[0]).fmt;\n\n\tlet quot;\n\tif(separated)\n\t\tfor(let i = 0; i < separated.length; i++){\n\t\t\tif(separated[i] == \"\\\"\")\n\t\t\t\tquot = !quot;\n\t\t\tif(quot) continue;\n\n\t\t\tif(type == \"date\" && /[a-zA-Z]/.test(separated)){\n\t\t\t\tconst datePart = excelDateToWebix(separated.substr(i), \"date\");\n\t\t\t\tif(datePart){\n\t\t\t\t\tif(checkTime){\n\t\t\t\t\t\tif(datePart.type == \"time\")\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(type == \"string\" && separated[i] == \"@\")\n\t\t\t\treturn true;\n\t\t}\n}\n\nexport function getFormatName(view, row, col){\n\tconst item = view._mPage.getCell(row-1, col-1);\n\treturn (item && item.format) || null;\n}\n\nexport function isDateInvalid(value){\n\treturn value < -99974430.925 || value > 100025569.125;\n}\n\nexport function getDateEditFormat(view, row, col){\n\tconst formatName = getFormatName(view, row, col);\n\tconst locale = webix.i18n.spreadsheet.formats;\n\tconst isTime = checkFormat(formatName, \"date\", true);\n\n\treturn webix.Date.dateToStr( locale[isTime ? \"parseDateTime\" : \"parseDate\"] );\n}\n\nexport function getFormatFromData(data, array){\n\tconst styleName = array[3];\n\tlet fmt;\n\tif(styleName){\n\t\tlet style = arr.find(data.styles, arr => arr[0] == styleName);\n\t\tif(style){\n\t\t\tstyle = style[1];\n\t\t\tconst fmtName = styleFromText(style).format;\n\t\t\tif(fmtName){\n\t\t\t\tif(data.formats)\n\t\t\t\t\tfmt = arr.find(data.formats, arr => arr[0] == fmtName);\n\n\t\t\t\tif(fmt)\n\t\t\t\t\tfmt = fmt[1];\n\t\t\t\telse\n\t\t\t\t\tfmt = getFormatSource(fmtName); //default formats (int, percent, etc.)\n\t\t\t}\n\t\t}\n\t}\n\treturn fmt;\n}","import {getFormatName, getFormatSource} from \"../operations/formats\";\n\nexport function isChar(char) {\n\tconst code = char.charCodeAt(0);\n\treturn code <= 122 ? code >= 65 || code === 35 || code === 36 : code > 191;\n}\n\nexport function getLastCharIndex(str, includeNumbers){\n\tlet lastChar = str.length;\n\tfor(let i = lastChar - 1; i >= 0; i--){\n\t\tif(!isChar(str[i])){\n\t\t\tif(includeNumbers && isNumber(str[i]))\n\t\t\t\tcontinue;\n\t\t\treturn lastChar;\n\t\t}\n\t\telse\n\t\t\tlastChar = i;\n\t}\n}\n\nfunction isNumber(char){\n\tvar code = char.charCodeAt(0);\n\treturn code>=48 && code<=57;\n}\n\nfunction getWord(formula, i, passive){\n\tvar max = formula.length;\n\tvar sheet = passive;\n\tvar quotes = false;\n\n\tfor(var j=i; j<max; j++){\n\t\tvar key =  formula[j];\n\t\tif (key === \"'\"){\n\t\t\tquotes = !quotes;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!quotes){\n\t\t\tif (key == \"!\"){\n\t\t\t\tif(formula[i] == \"#\") //error\n\t\t\t\t\tcontinue;\n\t\t\t\telse{\n\t\t\t\t\t//multi-sheet math\n\t\t\t\t\tsheet = formula.substr(i, j-i);\n\t\t\t\t\tif (sheet[0] === \"'\")\n\t\t\t\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\t\t\t\ti=j+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!isChar(key) && !isNumber(key)){\n\t\t\t\treturn [formula.substr(i, j-i), j, i, sheet];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [formula.substr(i), j, i, sheet];\n}\n\nvar operand = /^[A-Z$]+[0-9]+$/;\nfunction isPosition(text){\n\treturn operand.test(text);\n}\n\nexport function position(word){\n\tvar row = 0, sum = 0, x = 1, mode = 1, flags = 0;  \n\tvar chars = false;\n\n\tfor (var j =word.length-1; j>=0; j--){\n\t\tvar key = word[j].charCodeAt(0);\n\t\tif (key === 36) {\n\t\t\tflags = flags+mode;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key < 58){\n\t\t\t//numeric\n\t\t\tsum += (key - 48)*x;\n\t\t\tx *= 10;\n\t\t} else {\n\t\t\tif (!chars){\n\t\t\t\tx = 1; row = sum; sum = 0; chars = true; mode += 1;\n\t\t\t}\n\t\t\t//alpha\n\t\t\tsum += (key - 64)*x;\n\t\t\tx*=26;\n\t\t}\n\t}\n\n\t/*\n\t\t$X$Y => flags = 3\n\t\t$XY  => flags = 2\n\t\tX$Y  => flags = 1\n\t\tXY   => flags = 0\n\t*/\n\treturn [row, sum, flags];\n}\n\nexport function split(formula, view, crosssheet){\n\tconst activeSheet = view.getActiveSheet();\n\tvar lines = [];\n\tvar index = 0;\n\tvar quotes = false, ph = false;\n\tfor (var i = formula[i] === \"=\" ? 1 : 0; i < formula.length; i++){\n\t\tvar key = formula[i];\n\t\tif (key == \"\\\"\"){\n\t\t\tquotes = !quotes;\n\t\t} else if (!quotes){\n\t\t\tif (key == \"{\" && formula[i+1] == \"{\"){\n\t\t\t\tph = true;\n\t\t\t} else if (key == \"}\" && formula[i+1] == \"}\"){\n\t\t\t\tph = false;\n\t\t\t} else if (!ph){\n\t\t\t\tconst escaped = key === \"'\";\n\t\t\t\tif (escaped || isChar(key)){\n\t\t\t\t\tlet [word, end, ,sheet] = getWord(formula, i, \"\");\n\t\t\t\t\tlet next = end - 1;\n\t\t\t\t\tlet value;\n\n\t\t\t\t\tif(formula[next+1] !== \"(\"){\n\t\t\t\t\t\tif(isPosition(word)){\n\t\t\t\t\t\t\tif(!sheet || sheet == activeSheet || crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlet range;\n\n\t\t\t\t\t\t\t\tif(sheet)\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, sheet);\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t//global range\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, true);\n\n\t\t\t\t\t\t\t\t\t//active sheet range\n\t\t\t\t\t\t\t\t\tif(!range)\n\t\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif(range){\n\t\t\t\t\t\t\t\t\tconst parts = range.split(\"!\");\n\t\t\t\t\t\t\t\t\tif(parts[0] == activeSheet){\n\t\t\t\t\t\t\t\t\t\tvalue = [sheet, word, escaped, parts[1]];\n\t\t\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ti = next;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (index!=formula.length)\n\t\tlines.push(formula.substr(index));\n\treturn lines;\n}\n\nfunction pushLine(lines, formula, i, index, value){\n\tif (i!==0)\n\t\tlines.push(formula.substr(index, i-index));\n\tlines.push(value);\n}\n\nexport function getMathFormat(view, value){\n\tlet level = 0;\n\tlet blockLevel;\n\n\tconst parts = split(value, view);\n\n\tfor(let i = 0; i < parts.length; i++){\n\t\t// parts[i] can contain numbers, math operators, formulas, etc.\n\t\tif(i%2 === 0){\n\t\t\t// check formulas and round brackets which are not in quotes\n\t\t\tconst methods = parts[i].match(/(([a-zA-Z]*\\()|\\))(?=(?:[^\"]|\"[^\"]*\")*$)/g);\n\t\t\tif(methods)\n\t\t\t\tmethods.forEach(part => {\n\t\t\t\t\tif(part.indexOf(\"(\") > -1){\n\t\t\t\t\t\tlevel++;\n\t\t\t\t\t\t// some methods block format addition (like count,odd,etc.)\n\t\t\t\t\t\tconst safeMethods = /^(SUM|AVERAGE|MAX|MIN|INT|ROUND|ROUNDDOWN|ROUNDUP|TRUNC)?\\($/gi;\n\t\t\t\t\t\tif(!blockLevel && !safeMethods.test(part))\n\t\t\t\t\t\t\tblockLevel = level;\n\t\t\t\t\t}\n\t\t\t\t\telse if(--level < blockLevel)\n\t\t\t\t\t\tblockLevel = null;\n\t\t\t\t});\n\t\t}\n\t\t// parts[i] can be named range, cell from the active / non-active sheet\n\t\telse if(!blockLevel){\n\t\t\tif(webix.isArray(parts[i])){\n\t\t\t\tif(/^[A-Za-z]+$/.test(parts[i][1]))\n\t\t\t\t\tparts[i] = parts[i][3].split(\":\")[0];\n\t\t\t\telse if(parts[i][0] == view.getActiveSheet())\n\t\t\t\t\tparts[i] = parts[i][1];\n\t\t\t\telse\n\t\t\t\t\tcontinue; // ignore non-active sheets\n\t\t\t}\n\n\t\t\t// if range - check first cell position\n\t\t\tconst cell = position(parts[i]);\n\t\t\tconst name = getFormatName(view, cell[0], cell[1]);\n\n\t\t\t// first cell with number format\n\t\t\tif(name)\n\t\t\t\treturn {fmt: getFormatSource(name)};\n\t\t}\n\t}\n}","import {getFormatName, checkFormat, isDateInvalid, getFormatFromData, getFormatSource} from \"./formats\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getMathFormat} from \"../mathematics/parser\";\n\nexport function init(view){\n\tview.attachEvent(\"onCellChange\", function(row, col, value, type){\n\t\tif(!this._setType){\n\t\t\tconst formatName = getFormatName(this, row, col);\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue,\n\t\t\t\tfmt: formatName ? {fmt: getFormatSource(formatName)} : null,\n\t\t\t\ttype\n\t\t\t};\n\t\t\tsetType(this, cell);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeFormatChange\", function(row, col, formatName){\n\t\tif(!this._setType){\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue: view.getCellValue(row, col),\n\t\t\t\tfmt: {fmt:getFormatSource(formatName)}\n\t\t\t};\n\t\t\tsetType(this, cell, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", function(action, values){\n\t\tif(action == \"dropdown\" && values.newValue && values.newValue.editor == \"excel_date\"){\n\t\t\tconst format = getFormatName(this, values.row, values.column);\n\t\t\tif(getFormatType(format) != \"date\")\n\t\t\t\tthis.setFormat(values.row, values.column, webix.i18n.spreadsheet.formats.dateFormat);\n\t\t}\n\t});\n}\n\nexport function loadCell(view, data, item){\n\tconst fmt = getFormatFromData(data, item);\n\tconst cell = {\n\t\tvalue: item[2],\n\t\tfmt: fmt ? {fmt} : null,\n\t\ttype: item[4]\n\t};\n\tsetType(view, cell);\n\treturn cell;\n}\n\nfunction getExpectType(view, cell, parseDate, isFormula, formatType, style){\n\t//date based math\n\tlet type = \"string\";\n\tif(!webix.isUndefined(cell.value)){\n\t\tif(isFormula){\n\t\t\ttype = \"number\";\n\n\t\t\tif(/^=(now|date|time)\\(/i.test(cell.value))\n\t\t\t\ttype = \"date\";\n\t\t\telse if(/^=(sparkline|image)\\(/i.test(cell.value))\n\t\t\t\ttype = \"string\";\n\t\t}\n\t\telse if(!isNaN(cell.value))\n\t\t\ttype = \"number\";\n\t\telse if(formatType != \"string\" && parseDate){\n\t\t\t//if user types a date string, or it comes from Excel import\n\t\t\t//set date type and convert string to Excel date\n\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\tconst value  = parser(cell.value);\n\t\t\tif(value != \"\" && !isNaN(value)){\n\t\t\t\t//change cell style - value changes once (some value -> 35767.5)\n\t\t\t\t//change cell value - value changes twice (some value -> \"12/03/97\" -> 35767.5)\n\t\t\t\t//so ignore undo for cell value change\n\t\t\t\tif(style)\n\t\t\t\t\tdateToExcel(view, cell, value);\n\t\t\t\telse\n\t\t\t\t\tview.ignoreUndo(() => dateToExcel(view, cell, value));\n\n\t\t\t\ttype = \"date\";\n\t\t\t}\n\t\t}\n\t}\n\treturn type;\n}\n\nfunction dateToExcel(view, cell, date){\n\tdate = getExcelDateFromJs(date);\n\tcell.value = date;\n\n\tif(!view._loading_data)\n\t\tview.setCellValue(cell.row, cell.col, date);\n}\n\nfunction checkType(type, expectType, formatType, isFormula, value){\n\ttype = type || expectType;\n\n\t//strings will always have string type regardless of format\n\tif(expectType == \"string\")\n\t\ttype = \"string\";\n\telse if(formatType)\n\t\ttype = formatType;\n\n\tif(type == \"date\" && !isFormula && isDateInvalid(value))\n\t\ttype = \"number\";\n\n\treturn type;\n}\n\nfunction getFormatType(format){\n\tlet formatType = format ? \"number\" : null;\n\tif(checkFormat(format, \"string\"))\n\t\tformatType = \"string\";\n\telse if(checkFormat(format, \"date\"))\n\t\tformatType = \"date\";\n\treturn formatType;\n}\n\nexport function getType(view, row, column){\n\tconst item = view._mPage.getCell(row-1, column-1);\n\treturn (item && item.type) || null;\n}\n\nfunction setType(view, cell, style){\n\tconst parseToStore = !(cell.row && cell.col);\n\n\t//prevent type change during value or format change\n\tview._setType = true;\n\n\tconst isFormula = typeof cell.value == \"string\" && cell.value[0] == \"=\";\n\tconst parseDate = (!style || cell.fmt == getFormatSource(\"date\")) && (!view._loading_data || cell.type == \"date\");\n\n\tlet mathFormat;\n\tif(!parseToStore)\n\t\tmathFormat = isFormula && !cell.fmt ? getMathFormat(view, cell.value) : null;\n\n\tconst formatType = getFormatType(cell.fmt || mathFormat);\n\tconst expectType = getExpectType(view, cell, parseDate, isFormula, formatType, style);\n\n\tcell.type = checkType(cell.type, expectType, formatType, isFormula, cell.value);\n\n\tif(!parseToStore){\n\t\tconst item = view._mPage.getCell(cell.row-1, cell.col-1, true);\n\t\titem.$format = formatType == \"string\" ? 1 : 0;\n\t\tupdateCell(view, cell, expectType, formatType, mathFormat);\n\t\titem.type = cell.type;\n\t}\n\n\tdelete view._setType;\n}\n\nfunction updateCell(view, cell, expectType, formatType, mathFormat){\n\tconst row = cell.row;\n\tconst col = cell.col;\n\tconst isString = typeof cell.value == \"string\";\n\n\tconst isFormula = isString && cell.value[0] == \"=\";\n\tconst cellEditor = view.getCellEditor(row, col);\n\n\t//update cell value if set number format (5e5 -> 500000, 005 -> 5)\n\tif(!view._loading_data && cell.type === \"number\" && isString && !isFormula && cell.value !== \"\")\n\t\tview.setCellValue(row, col, cell.value*1);\n\n\tif(mathFormat)\n\t\tview.setFormat(row, col, mathFormat.fmt);\n\telse if(cell.type == \"date\"){\n\t\t// add default date format\n\t\tif(formatType != \"date\"){\n\t\t\tconst isTime = isFormula && cell.value.toUpperCase().indexOf(\"=TIME(\") == 0;\n\t\t\tconst locale = webix.i18n.spreadsheet.formats;\n\t\t\tconst format = isTime ? locale.timeFormat : locale.dateFormat;\n\t\t\tview.setFormat(row, col, format);\n\t\t}\n\n\t\t//set date editor for cells with date type\n\t\tif(!isFormula && !cellEditor)\n\t\t\tview.setCellEditor(row, col, {editor: \"excel_date\"});\n\t}\n\telse if(formatType != \"string\" && cell.type == \"string\" && expectType != \"string\"){\n\t\t//force text format for numbers typed as strings\n\t\tview.setFormat(row, col, \"@\");\n\t}\n\n\t//remove date editor\n\tif((cell.type != \"date\" || isFormula) && cellEditor && cellEditor.editor == \"excel_date\")\n\t\tview.setCellEditor(row, col, null);\n}\n","import {isChar, getLastCharIndex} from \"../mathematics/parser\";\n\nwebix.protoUI({\n\tname: \"suggest-formula\",\n\tdefaults: {\n\t\tfitMaster: false,\n\t\twidth: 200,\n\t\tfilter(item, value) {\n\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\n\t\t\tif(val.charAt(0) !== \"=\") return;\n\n\t\t\tconst str = val.substring(0, cursor);\n\t\t\tconst search = str.substring( getLastCharIndex(str, true) );\n\t\t\tconst nextSymbol = val.charAt(cursor);\n\n\t\t\tif(search && (cursor === val.length || !(isChar(nextSymbol) || /^[0-9]/.test(nextSymbol))))\n\t\t\t\tvalue = search;\n\n\t\t\treturn item.value.toString().toLowerCase().indexOf(value.toLowerCase()) === 0;\n\t\t}\n\t},\n\t$init() {\n\t\tthis.attachEvent(\"onBeforeShow\", (node) => {\n\t\t\tif(node.tagName){\n\t\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\t\tconst text = editor.getValue();\n\n\t\t\t\t//only for formulas\n\t\t\t\tif(!text || text.charAt(0) !== \"=\") return false;\n\n\t\t\t\tconst sizes = webix.html.offset(node);\n\n\t\t\t\tconst selectionStart = editor.getInputNode().selectionStart;\n\t\t\t\tconst textWidth = webix.html.getTextSize(text.substring(0, selectionStart), \"webix_ssheet_formula\").width;\n\n\t\t\t\tconst y = sizes.y + sizes.height;\n\t\t\t\tconst x = sizes.x + textWidth;\n\n\t\t\t\twebix.ui.popup.prototype.show.apply(this, [{x, y}]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\tsetMasterValue(data, refresh) {\n\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\n\t\twebix.$$(this.config.master).setValueHere(text);\n\n\t\tif (!refresh)\n\t\t\tthis.hide(true);\n\n\t\tthis.callEvent(\"onValueSuggest\", [data, text]);\n\t},\n\t$enterKey: function() {\n\t\tif (this.isVisible())\n\t\t\treturn webix.ui.suggest.prototype.$enterKey.apply(this, arguments);\n\t}\n}, webix.ui.suggest);","webix.protoUI({\n\tname: \"ssheet-button\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 40\n\t},\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_button\"+(config.arrow?\" webix_ssheet_button_menu\":\"\");\n\t\tif(config.label || config.icon){\n\t\t\tlet icon = (config.icon||config.name),\n\t\t\t\ttext = config.label||\"\";\n\t\t\tif(config.arrow)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon_arrow webix_icon wxi-menu-down'></span>\";\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+icon+\"'></span> \"+text;\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nwebix.protoUI({\n\tname: \"ssheet-button-icon-top\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 70,\n\t\theight: 70\n\t},\n\t$init: function(config){\n\t\tthis.$view.className += \" ssheet_button_icon_top\";\n\t\tif(config.label) {\n\t\t\tlet icon = (config.icon || config.name||\"\"),\n\t\t\t\ttext = config.label;\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + icon + \"'></span><br/>\";\n\t\t\tconfig.label += \"<span class='ssheet_button_icon_top_text'>\"+text+\"</span>\";\n\t\t\tif (config.arrow)\n\t\t\t\tconfig.label += \"<br/><span class='ssheet_button_icon_top_arrow webix_icon wxi-menu-down'></span>\";\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nfunction getPopupConfig(options){\n\treturn {\n\t\tview: \"ssheet-suggest\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\tautowidth:true,\n\t\ttemplate: function(obj){\n\t\t\tvar text = \"\";\n\t\t\tif(obj.icon)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + obj.icon + \"'></span> \";\n\t\t\ttext += obj.value || webix.i18n.spreadsheet.menus[obj.id] || obj.id;\n\t\t\treturn text;\n\t\t},\n\t\tdata: options,\n\t\ton:{\n\t\t\tonItemClick: function(id){\n\t\t\t\tvar button = this.config.master;\n\t\t\t\tif(button){\n\t\t\t\t\tlet view = webix.$$(button).getTopParentView();\n\t\t\t\t\tvar params = [this.getItem(id)];\n\t\t\t\t\tif(webix.$$(button).config.area){\n\t\t\t\t\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\t\t\t\t\tif(area)\n\t\t\t\t\t\t\tparams = params.concat([area.start,area.end]);\n\t\t\t\t\t}\n\t\t\t\t\tview.callEvent(\"onCommand\",params);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}","import \"./suggest_formula\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport {getType} from \"../operations/types\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {split, position, getLastCharIndex} from \"../mathematics/parser\";\n\nwebix.protoUI({\n\tname: \"live-editor\",\n\t$cssName:\"texthighlight\",\n\t$init(config){\n\t\tconfig.suggest = {\n\t\t\tview: \"suggest-formula\",\n\t\t\tdata: config.suggestData\n\t\t};\n\t\tconfig.highlight = this.highlight;\n\n\t\tthis._highlightedCells = {};\n\t\tthis.$view.className += \" webix_ssheet_formula\";\n\n\t\tthis.attachEvent(\"onKeyPress\", (code, e) => {\n\t\t\tdelete this._update_range;\n\t\t\tif(code == 13) {\n\t\t\t\t//ignore Enter key if it was pressed to select some value from suggest\n\t\t\t\tif ((new Date() - (this._last_value_set || 0)) > 300){\n\t\t\t\t\tconst cell = this.config.activeCell;\n\t\t\t\t\tthis.showActiveSheet(true);\n\t\t\t\t\tthis.updateCellValue(cell);\n\t\t\t\t\t//blur to avoid calling highlight function after selection move\n\t\t\t\t\tthis.getInputNode().blur();\n\t\t\t\t\t//we have 'enter' hot key to activate editor\n\t\t\t\t}\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t}\n\t\t\t//esc - cancel editing\n\t\t\telse if(code == 27){\n\t\t\t\tthis.showActiveSheet();\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tconst master = this.getTopParentView();\n\t\t\t\t\tconst cell = master.getSelectedId();\n\t\t\t\t\tconst oldVal = this.getCellValue(cell.row, cell.column);\n\n\t\t\t\t\tif(this.getValue() == oldVal)\n\t\t\t\t\t\tmaster.$$(\"cells\").refresh(cell.row);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.setValue(oldVal);\n\n\t\t\t\t\tdelete master.$handleSelection;\n\n\t\t\t\t\twebix.UIManager.setFocus(master.$$(\"cells\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.attachEvent(\"onAfterRender\", function(){\n\t\t\twebix.eventRemove(this.keydownEv);\n\n\t\t\tthis.keydownEv = webix.event(this.getInputNode(), \"keydown\", e => {\n\t\t\t\tthis.endEdit(e);\n\t\t\t});\n\t\t});\n\t},\n\thighlight(value){\n\t\tlet html = \"\";\n\t\tconst master = this.getTopParentView();\n\t\tconst escapeText = webix.template.escape;\n\n\t\tfor(let area in this._highlightedCells){\n\t\t\tconst cells = this._highlightedCells[area];\n\t\t\tthis.changeCellCss(cells[0], cells[1], cells[2], true);\n\t\t}\n\t\tthis._highlightedCells = {};\n\n\t\t//value can be null\n\t\tif(value && value[0]==\"=\"){\n\t\t\tconst parts = split(value, master);\n\t\t\tconst sheet = master.getActiveSheet();\n\n\t\t\tlet colorIndex = 1;\n\n\t\t\tfor(let i = 0; i < parts.length; i++){\n\t\t\t\tif(i%2 === 0)\n\t\t\t\t\thtml += escapeText(parts[i]);\n\t\t\t\telse{\n\t\t\t\t\tconst crossheet = webix.isArray(parts[i]);\n\t\t\t\t\tconst cellSheet = crossheet ? this.prepareSheet(parts[i][0], parts[i][2]) : \"\";\n\t\t\t\t\tconst activeMath = this._activeMath;\n\n\t\t\t\t\tconst activeSheet = !crossheet && (!activeMath || activeMath == sheet);\n\t\t\t\t\tlet cell = position(crossheet ? parts[i][1] : parts[i]);\n\t\t\t\t\tconst cellText = crossheet ? cellSheet+parts[i][1] : parts[i];\n\n\t\t\t\t\tconst rangeName = crossheet && !getLastCharIndex(parts[i][1]);\n\n\t\t\t\t\tif(rangeName || activeSheet || (crossheet && parts[i][0] == sheet)){\n\t\t\t\t\t\tlet repeatedColor;\n\t\t\t\t\t\t//range\n\t\t\t\t\t\tif((parts[i+1] == \":\" && parts[i+2]) || rangeName){\n\t\t\t\t\t\t\tlet nextCell, nextCellText;\n\n\t\t\t\t\t\t\tif(rangeName){\n\t\t\t\t\t\t\t\tconst cells = parts[i][3].split(\":\");\n\n\t\t\t\t\t\t\t\tcell = position(cells[0]);\n\t\t\t\t\t\t\t\tnextCell = position(cells[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnextCell = position(webix.isArray(parts[i+2]) ? parts[i+2][1] : parts[i+2]);\n\t\t\t\t\t\t\t\tnextCellText = webix.isArray(parts[i+2]) ? cellSheet+parts[i+2][1] : parts[i+2];\n\t\t\t\t\t\t\t\ti+=2;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], nextCell[0], nextCell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${rangeName ? cellText : cellText+\":\"+nextCellText}</span>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//OtherSheet!A1:A3 - do not highlight A3\n\t\t\t\t\t\telse if(parts[i-1] && parts[i-1][ parts[i-1].length-1 ] == \":\"){\n\t\t\t\t\t\t\thtml += cellText;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//cell\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], cell[0], cell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${cellText}</span>`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst colors = 7;\n\t\t\t\t\t\tif(!repeatedColor)\n\t\t\t\t\t\t\tcolorIndex += colorIndex == colors ? -1*(colors-1) : 1;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\thtml += cellText;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\thtml = escapeText(value);\n\n\t\tmaster.$$(\"cells\").refresh();\n\n\t\tif(document.activeElement == this.getInputNode())\n\t\t\tthis.paintValue();\n\t\treturn html;\n\t},\n\tshowActiveSheet(enter){\n\t\tconst master = this.getTopParentView();\n\t\tconst grid = master._table;\n\n\t\tif(this._activeMath){\n\t\t\tif(this._activeMath != master.getActiveSheet()){\n\t\t\t\tconst cell = this.config.activeCell;\n\n\t\t\t\tthis.define({activeCell:null});\n\n\t\t\t\tmaster.showSheet(this._activeMath);\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tgrid.select(cell.row + (enter ? 1 : 0), cell.column);\n\t\t\t\t});\n\t\t\t}\n\t\t\tdelete this._activeMath;\n\t\t}\n\t\telse if(enter){\n\t\t\twebix.delay(()=>{\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t},\n\tchangeCellCss(row, col, index, remove){\n\t\tconst css = `webix_ssheet_highlight_background_${index}`;\n\t\tfor (let r = row.start; r <= row.end; r++)\n\t\t\tfor (let c = col.start; c <=  col.end; c++)\n\t\t\t\tthis.getTopParentView().$$(\"cells\")[remove?\"removeCellCss\":\"addCellCss\"](r, c, css, true);\n\t},\n\tendEdit(e){\n\t\tconst code = e.which || e.keyCode;\n\n\t\t//if it is a formula - force user to finish it by click outside or 'enter'\n\t\tif(code == 9){\n\t\t\twebix.html.preventEvent(e);\n\n\t\t\tthis.getInputNode().blur();\n\t\t\tthis.updateCellValue();\n\t\t\tthis.getTopParentView()._table.moveSelection(e.shiftKey ? \"left\" : \"right\");\n\t\t}\n\t},\n\tpaintValue(){\n\t\tconst master = this.getTopParentView();\n\t\tif(!this._activeMath || this._activeMath == master.getActiveSheet()){\n\t\t\tconst cell = this.config.activeCell;\n\t\t\tconst node = master._table.getItemNode(cell);\n\t\t\tif(cell && node) \n\t\t\t\tnode.innerHTML = `<div>${webix.template.escape(this.getValue())}</div>`;\n\t\t}\n\t},\n\tupdateCellValue(cell) {\n\t\tconst newv = this.getValue();\n\t\tconst master = this.getTopParentView();\n\t\tcell = cell || this.config.activeCell;\n\n\t\tif (!cell)\n\t\t\tthis.setValue(\"\");\n\t\telse{\n\t\t\tconst val = master.getCellValue(cell.row, cell.column);\n\n\t\t\tif(newv !== val){\n\t\t\t\tthis.config.value = newv;\n\t\t\t\tmaster.setCellValue(cell.row, cell.column, newv);\n\t\t\t\tmaster.refresh();\n\t\t\t}\n\t\t}\n\n\t\tdelete master.$handleSelection;\n\t},\n\t$setValueHere(value){\n\t\tthis.setValueHere(value);\n\t},\n\tsetValueHere(value) {\n\t\tthis._last_value_set = new Date();\n\n\t\tconst formula = this.getValue();\n\t\tif(formula && formula.charAt(0)===\"=\"){\n\t\t\tconst cursor = this.getInputNode().selectionStart;\n\t\t\tlet str1 = formula.substring(0, cursor);\n\t\t\tconst str2 = formula.substring(cursor);\n\n\t\t\tif(str1[str1.length-1] == \"(\")\n\t\t\t\tstr1 = str1.substring(0, str1.length-1);\n\n\t\t\tstr1 = str1.substring(0, getLastCharIndex(str1, true));\n\n\t\t\t//suggest called via up/down key\n\t\t\tstr1 += value + (str2[0] == \"(\" ? \"\" : \"(\");\n\n\t\t\tthis.setValue(str1 + str2);\n\t\t\tthis.getInputNode().setSelectionRange(str1.length, str1.length);\n\t\t}\n\t},\n\texpectOperator(){\n\t\tconst text = this.getValue();\n\n\t\tif(text[0] == \"=\"){\n\t\t\tlet cursor = this.getInputNode().selectionStart;\n\t\t\twhile(text[cursor-1] == \" \")\n\t\t\t\tcursor--;\n\t\t\treturn text[cursor-1] && text[cursor-1].match(/[+&\\-/*%=(:,]/);\n\t\t}\n\t},\n\tsetRange(range, replace){\n\t\tconst cursor = this.getInputNode().selectionStart;\n\t\tconst formula = this.getValue();\n\n\t\tlet str1, str2;\n\n\t\t//check if range was added by click\n\t\tif(replace)\n\t\t\treplace = this._update_range && cursor == this._update_range.pos + this._update_range.len;\n\n\t\tconst lastPos = replace ? this._update_range.pos : cursor;\n\n\t\tstr1 = formula.substring(0, lastPos) + range;\n\t\tstr2 = formula.substring(cursor);\n\n\t\tthis._update_range = {pos: lastPos, len: range.length};\n\n\t\tthis.setValue(str1 + str2);\n\t},\n\tprepareSheet(sheet, escaped){\n\t\tif(!sheet)\n\t\t\treturn \"\";\n\t\tconst condition = webix.isUndefined(escaped) ? sheet.indexOf(\" \") != -1 : escaped;\n\t\treturn (condition ? `'${sheet}'` : sheet) + \"!\";\n\t},\n\tprepareArea(first, second){\n\t\treturn {\n\t\t\tstart: Math.min(first, second),\n\t\t\tend: Math.max(first, second)\n\t\t};\n\t},\n\tsetColor(row1, col1, row2, col2, color){\n\t\tconst row = this.prepareArea(row1, row2);\n\t\tconst col = this.prepareArea(col1, col2);\n\t\tconst index = [row.start, row.end, col.start, col.end].join(\",\");\n\t\tconst coloredArea = this._highlightedCells[index];\n\n\t\tif(!coloredArea){\n\t\t\tthis._highlightedCells[index] = [row, col, color];\n\t\t\tthis.changeCellCss(row, col, color);\n\t\t}\n\t\telse\n\t\t\treturn coloredArea[2];\n\t},\n\tgetCellValue(row, column){\n\t\tconst master = this.getTopParentView();\n\t\tlet value = master.getCellValue(row, column);\n\t\tif(getType(master, row, column) == \"date\" && value[0] != \"=\"){\n\t\t\tconst format = getDateEditFormat(master, row, column);\n\t\t\tvalue = format(getJsDateFromExcel(value));\n\t\t}\n\t\treturn value;\n\t}\n}, webix.ui.texthighlight);","webix.protoUI({\n\tname: \"ssheet-separator\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_toolbar_spacer\",\n\t\ttemplate: \" \",\n\t\twidth: 1,\n\t\tborderless: true\n\t}\n},webix.ui.view);","webix.protoUI({\n\tname: \"sheets\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tborderless: true,\n\t\tcss:\"ssheet_list_sheets\",\n\t\tselect: true,\n\t\tdrag: \"order\",\n\t\tdragscroll:\"x\",\n\t\tscroll:false\n\t}\n},webix.EditAbility,webix.ui.list);","// toolbar: toogle button\nwebix.protoUI({\n\t$cssName: \"toggle\",\n\tname:\"ssheet-toggle\",\n\ttoggle:function(){\n\t\tvar value = this.getValue() == this.config.onValue?true:false;\n\t\tthis.setValue(!value);\n\t},\n\t$setValue:function(value){\n\t\tif(value == this.config.offValue)\n\t\t\tvalue = false;\n\t\telse if(value == this.config.onValue)\n\t\t\tvalue = true;\n\t\twebix.ui.toggle.prototype.$setValue.call(this,value);\n\t},\n\tgetValue:function(){\n\t\tvar config = this.config;\n\t\tvar value = config.value;\n\t\treturn  !value || value==config.offValue?(config.offValue||false):(config.onValue||true);\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tvar css = (obj.value === true ||obj.value == obj.onValue) ? \" webix_pressed\" : \"\";\n\t\t\tvar inp = common.$renderInput(obj, common);\n\t\t\treturn \"<div class='webix_el_box\"+css+\"' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+inp+\"</div>\";\n\t\t}\n\t}\n}, webix.ui.toggle);\n\n\n// toolbar: silent toggle button\nwebix.protoUI({\n\tname:\"ssheet-toggle-silent\",\n\t$cssName:\"toggle\",\n\t$allowsClear:false,\n\tsetValue:function(){\n\t\tthis.blockEvent();\n\t\twebix.ui.toggle.prototype.setValue.apply(this, arguments);\n\t\tthis.unblockEvent();\n\t}\n}, webix.ui.toggle);","webix.protoUI({\n\tname: \"ssheet-bar-title\",\n\tdefaults:{\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_subbar_title\";\n\t}\n},webix.ui.template);","webix.protoUI({\n\tname:\"multicheckbox\",\n\tdefaults:{\n\t\tpadding:0,\n\t\ttype:\"clean\",\n\t\tborderless:true,\n\t\telementsConfig:{\n\t\t\tlabelWidth:10\n\t\t}\n\t},\n\t$init:function(config){\n\t\tconfig.rows = [{height:0.000001}];\n\t\tthis.$ready.push(function(){\n\t\t\tthis._initOnChange();\n\t\t});\n\t},\n\t_initOnChange(){\n\t\tthis.attachEvent(\"onChange\", function(newv){\n\t\t\tconst name = this.$eventSource.config.name;\n\n\t\t\tthis.blockEvent();\n\t\t\tif(name == \"$all\"){\n\t\t\t\tfor(let i in this.elements)\n\t\t\t\t\tthis.elements[i].setValue(newv);\n\t\t\t\tif(!newv)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconst count = this.getValue().length;\n\t\t\t\tthis.elements.$all.setValue(count == this._count ? 1 : 0);\n\t\t\t\tif(!count)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\tthis.unblockEvent();\n\t\t});\n\t},\n\tsetValue:function(value){\n\t\tthis.elements = {};\n\t\tthis._count = value.length;\n\n\t\tif(value.length > 1){\n\t\t\tlet elements = [];\n\t\t\tlet base = [];\n\t\t\tconst maxHeight = 400;\n\n\t\t\tvalue.forEach(sheet => {\n\t\t\t\tbase.push({ view: \"checkbox\", labelRight: sheet.name, name: sheet.name, value: sheet.active});\n\t\t\t});\n\n\t\t\tconst baseHeight = base.length * webix.skin.$active.inputHeight;\n\t\t\tconst scroll = baseHeight > maxHeight;\n\n\t\t\telements.push({\n\t\t\t\tview:\"scrollview\", body:{rows:base},\n\t\t\t\tscroll: scroll,\n\t\t\t\theight: scroll ? maxHeight : baseHeight\n\t\t\t});\n\n\t\t\telements.push({ template:\"<div class='ss_sep_line'></div>\", height:10 });\n\t\t\telements.push({ view:\"checkbox\", labelRight:webix.i18n.spreadsheet.labels[\"export-all-sheets\"], name:\"$all\", value:0 });\n\n\t\t\twebix.ui(elements, this);\n\t\t}\n\t\telse if(this.getChildViews().length > 1){\n\t\t\twebix.ui([{height:0.000001}], this);\n\t\t}\n\t},\n\tgetValue:function(){\n\t\tconst checkboxes = this._getCheckboxes();\n\t\tlet output = [];\n\n\t\t//save order\n\t\tfor(let i = 0; i < checkboxes.length; i++)\n\t\t\tif(checkboxes[i].getValue())\n\t\t\t\toutput.push(checkboxes[i].config.name);\n\n\t\treturn output;\n\t},\n\t_getCheckboxes(){\n\t\tconst scrollview = this.queryView(\"scrollview\");\n\t\treturn scrollview ? scrollview.getBody().getChildViews() : [];\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"formlist\",\n\tdefaults:{\n\t\tpaddingY: 5,\n\t\theight: 120,\n\t},\n\t$init:function(config){\n\n\t\tconfig.cols = [\n\t\t\t{\n\t\t\t\tcss:\"webix_inp_label\",\n\t\t\t\ttemplate:config.label,\n\t\t\t\twidth:config.labelWidth,\n\t\t\t\tborderless:true\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"list\",\n\t\t\t\tdata:config.data,\n\t\t\t\tcss:config.css,\n\t\t\t\ttemplate:config.template,\n\t\t\t\tselect: true,\n\t\t\t\tscroll:false,\n\t\t\t\tborderless:true,\n\t\t\t\ton:{\n\t\t\t\t\tonSelectChange:()=>{\n\t\t\t\t\t\tthis.getParentView().callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t},\n\tsetValue:function(value){this.getChildViews()[1].select(value);},\n\tgetValue:function(){return this.getChildViews()[1].getSelectedId();},\n\trefresh: function(){this.getChildViews()[1].refresh();},\n\tfocus:function(){}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-ui\",\n\tdefaults:{\n\t\tmove:true,\n\t\tcss:\"webix_shadow_none webix_ssheet_ui\",\n\t\thead:false,\n\t\tresize:true,\n\t\ttoFront:true,\n\t\tminWidth:50,\n\t\tminHeight:200,\n\t\tescHide:false,\n\t\tautofit:false\n\t},\n\t$init:function(){\n\t\t// prevent block selection\n\t\tthis.$view.setAttribute(\"webixignore\", \"1\");\n\n\t\tthis.$ready.push(function(){\n\t\t\twebix.UIManager.addHotKey(\"delete\", webix.bind(this._removeView, this));\n\t\t\twebix.UIManager.addHotKey(\"backspace\", webix.bind(this._removeView, this));\n\t\t\tthis.getMenu();\n\t\t});\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\twebix.eventRemove(this._clickEv);\n\t\t\tthis._menu.destructor();\n\t\t});\n\t},\n\tmove_setter:function(value){\n\t\tif (value){\n\t\t\twebix.DragControl.addDrag(this.$view, this);\n\t\t}\n\t\treturn value;\n\t},\n\t$dragPos:function(pos, e){\n\t\tthis.callEvent(\"onViewMove\", [pos, e]);\n\t\treturn pos;\n\t},\n\t$dragCreate:function(object, e){\n\t\tconst trg = e.target;\n\t\tif (!trg.getAttribute || trg.getAttribute(\"webix_disable_drag\") || trg.getAttribute(\"webixignore\"))\n\t\t\treturn;\n\n\t\tthis.getMenu().hide();\n\t\tconst elOffset = webix.html.offset(object);\n\t\tconst elPos = webix.html.pos(e);\n\t\tconst pOffset = webix.html.offset(object.parentNode);\n\t\tconst state = webix.$$(this.config.master).getScrollState();\n\n\t\twebix.DragControl.top = elOffset.y - elPos.y - pOffset.y;\n\t\twebix.DragControl.left = elOffset.x - elPos.x - pOffset.x + state.x;\n\n\t\treturn webix.toNode(this.$view);\n\t},\n\t$dragDestroy:function(node, drag){\n\t\tconst x = this.config.left = parseInt(drag.style.left,10);\n\t\tconst y = this.config.top = parseInt(drag.style.top,10);\n\n\t\twebix.DragControl.top = webix.DragControl.left = 0;\n\n\t\tthis.callEvent(\"onViewMoveEnd\", [x, y]);\n\t\treturn;\n\t},\n\tgetMenu:function(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tif(!this._menu){\n\t\t\tlet data = [\n\t\t\t\t{ value:labels[\"export-view\"], submenu:[\n\t\t\t\t\t{ id:\"pdf\", value:labels[\"export-view-pdf\"] },\n\t\t\t\t\t{ id:\"png\", value:labels[\"export-view-png\"] },\n\t\t\t\t\t{ id:\"excel\", value:labels[\"export-view-excel\"] }\n\t\t\t\t] }\n\t\t\t];\n\n\t\t\tif(!webix.$$(this.config.master).getTopParentView().config.readonly)\n\t\t\t\tdata = [\n\t\t\t\t\t{ id:\"edit\", value:labels[\"edit-view\"] },\n\t\t\t\t\t...data,\n\t\t\t\t\t{ id:\"del\", value:labels[\"remove-view\"] }\n\t\t\t\t];\n\n\t\t\tthis._menu = webix.ui({\n\t\t\t\tview:\"contextmenu\",\n\t\t\t\tsubmenuConfig:{\n\t\t\t\t\texternalUI: this.config.id\n\t\t\t\t},\n\t\t\t\tdata:data,\n\t\t\t\ton:{\n\t\t\t\t\tonMenuItemClick: id => this._menuActions(id),\n\t\t\t\t\tonBeforeShow: () => this._toggleExcel()\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst dots = webix.html.create(\"span\", {\"class\":\"webix_ssheet_view_menu webix_icon wxi-dots\"});\n\t\t\tthis._clickEv = webix.event(dots, \"click\", ()=> {\n\t\t\t\tif(this._menu.isVisible())\n\t\t\t\t\tthis._menu.hide();\n\t\t\t\telse\n\t\t\t\t\tthis._menu.show(dots);\n\t\t\t});\n\t\t\tthis.$view.firstChild.appendChild(dots);\n\t\t}\n\t\treturn this._menu;\n\t},\n\t_menuActions:function(id){\n\t\tswitch(id){\n\t\t\tcase \"del\":\n\t\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"edit\":\n\t\t\t\tthis.callEvent(\"onViewEdit\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"pdf\":\n\t\t\t\twebix.toPDF(this.getBody(), {display:\"image\"});\n\t\t\t\tbreak;\n\t\t\tcase \"png\":\n\t\t\t\twebix.toPNG(this.getBody());\n\t\t\t\tbreak;\n\t\t\tcase \"excel\":\n\t\t\t\twebix.toExcel(this.getBody(), {header: false});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\t_toggleExcel:function(){\n\t\tconst view = this.getBody();\n\t\tif(view.data && view.data.pull)\n\t\t\tthis._menu.showItem(\"excel\");\n\t\telse\n\t\t\tthis._menu.hideItem(\"excel\");\n\t},\n\t_removeView:function(view){\n\t\tif(view && view.getTopParentView() == this)\n\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t}\n}, webix.ui.window);","webix.protoUI({\n\tname: \"ssheet-series\",\n\t$init: function(config){\n\t\tconfig.rows = [\n\t\t\t{\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tborderless: true,\n\t\t\t\tbody: {\n\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\tmulti: true,\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [\n\t\t\t\t\t\tthis.getSectionConfig()\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonAfterScroll:function(){\n\t\t\t\t\t\t//close possibly open selector popups\n\t\t\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ view:\"button\", label:webix.i18n.spreadsheet.labels[\"add-line\"], click:()=>{\n\t\t\t\tthis.addSection();\n\t\t\t}}\n\t\t];\n\t},\n\tgetSectionConfig: function(i){\n\t\tconst view = this;\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tconst trashIcon = \"<span class='webix_icon webix_ssheet_series_icon wxi-trash'></span>\";\n\t\tconst padding = webix.skin.$active.dataPadding-2;\n\n\t\treturn {\n\t\t\tview:\"accordionitem\",\n\t\t\theader:`${labels[\"chart-item\"]} ${i ? i+1 : 1} ${trashIcon}`,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\tpadding,\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\", range:true, on:{\n\t\t\t\t\t\tonChange: function(val, oldVal) {\n\t\t\t\t\t\t\tconst upper = val.toUpperCase();\n\t\t\t\t\t\t\tif(val != upper){\n\t\t\t\t\t\t\t\tthis.blockEvent();\n\t\t\t\t\t\t\t\tthis.setValue(upper);\n\t\t\t\t\t\t\t\tthis.unblockEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tview.callEvent(\"onRangeChange\", [upper, oldVal]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-series-color\"], name:\"color\"},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-tooltip\"], name:\"tooltip\" },\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-label\"], name:\"label\", hidden: !this.labelsVisible },\n\t\t\t\t\t{ view:\"richselect\", label:labels[\"chart-markers\"], value:\"square\", name:\"marker\", hidden: !this.markersVisible,\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t{id:\"square\", value:labels[\"chart-markers-square\"]},\n\t\t\t\t\t\t\t\t{id:\"triangle\", value:labels[\"chart-markers-triangle\"]},\n\t\t\t\t\t\t\t\t{id:\"diamond\", value:labels[\"chart-markers-diamond\"]},\n\t\t\t\t\t\t\t\t{id:\"round\", value:labels[\"chart-markers-round\"]}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tonClick:{\n\t\t\t\t\"wxi-trash\": function(){\n\t\t\t\t\tconst layout = this.getParentView();\n\t\t\t\t\tlayout.removeView(this);\n\n\t\t\t\t\tconst childs = layout.getChildViews();\n\n\t\t\t\t\tfor (let i = 0; i < childs.length; i++) {\n\t\t\t\t\t\tchilds[i].define({header:`${labels[\"chart-item\"]} ${i+1} ${trashIcon}`});\n\t\t\t\t\t\tchilds[i].refresh();\n\t\t\t\t\t}\n\n\t\t\t\t\tview.callEvent(\"onChange\", []);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\taddSection: function(){\n\t\tconst layout = this.getLayout();\n\t\tconst lastIndex = layout.getChildViews().length;\n\t\tconst layoutId = layout.addView(this.getSectionConfig(lastIndex));\n\n\t\twebix.$$(layoutId).queryView({name: \"range\"}).focus();\n\t},\n\tsetValue: function(value){\n\t\tvalue = value || [];\n\n\t\tconst layout = this.getLayout();\n\t\tconst childs = layout.getChildViews();\n\t\tconst count = childs.length;\n\n\t\tif(count > value.length)\n\t\t\tfor(let i = count; i > value.length; i--)\n\t\t\t\tthis.getLayout().removeView(childs[i-1]);\n\t\telse if(value.length > count)\n\t\t\tfor(let i = value.length; i > count; i--)\n\t\t\t\tthis.addSection();\n\n\t\tfor(let i = 0; i < childs.length; i++){\n\t\t\tconst form = childs[i].getChildViews()[0];\n\t\t\tconst range = form.queryView({name: \"range\"});\n\n\t\t\t//block range events to ignore onRangeChange\n\t\t\trange.blockEvent();\n\t\t\tform.setValues(value[i]);\n\t\t\trange.unblockEvent();\n\t\t}\n\t},\n\tsetSubValue: function(sub, value){\n\t\tsub.blockEvent();\n\t\tsub.setValue(value);\n\t\tsub.unblockEvent();\n\t},\n\tgetLayout(){\n\t\treturn this.queryView(\"scrollview\").getBody();\n\t},\n\thideSubviews(name, show){\n\t\tif(name == \"marker\")\n\t\t\tthis.markersVisible = show;\n\t\telse\n\t\t\tthis.labelsVisible = show;\n\n\t\tthis.queryView({ name }, \"all\").forEach(view => {\n\t\t\tif(show)\n\t\t\t\tview.show();\n\t\t\telse\n\t\t\t\tview.hide();\n\t\t});\n\t},\n\tgetValue: function(){\n\t\tconst value = [];\n\n\t\tconst layout = this.getLayout();\n\t\tlayout.getChildViews().forEach(child => {\n\t\t\tvalue.push(child.getChildViews()[0].getValues());\n\t\t});\n\t\treturn value;\n\t}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-toolbar-scrollview\",\n\t$getSize: function(){\n\t\tconst size = webix.ui.scrollview.prototype.$getSize.apply(this, arguments);\n\t\tconst bodySize = this.getBody().$getSize(0, 0);\n\n\t\tlet scroll = 0;\n\t\tif(this.config.scroll)\n\t\t\tscroll = webix.env.scrollSize;\n\t\telse\n\t\t\tthis.$view.style[\"overflow-x\"] = \"hidden\";\n\n\t\tsize[2] = size[3] = bodySize[2] + scroll;\n\n\t\treturn size;\n\t},\n\t$setSize: function(x,y){\n\t\tconst bodySize = this.getBody().$getSize(0, 0);\n\t\tconst oldScroll = this.config.scroll;\n\t\tconst scroll = x < bodySize[0] ? \"x\" : false;\n\n\t\tif(scroll != oldScroll){\n\t\t\tthis.define({scroll});\n\t\t\treturn webix.delay(()=>{\n\t\t\t\tthis.resize();\n\t\t\t});\n\t\t}\n\n\t\twebix.ui.scrollview.prototype.$setSize.apply(this, [x, y]);\n\t}\n},webix.ui.scrollview);","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getDateEditFormat} from \"../operations/formats\";\n\nwebix.editors.excel_date = webix.extend({\n\tcreatePopup:function(){\n\t\tconst editor = webix.editors.excel_date;\n\n\t\tif(!editor.popup){\n\t\t\tconst popup = webix.ui({\n\t\t\t\tview:\"popup\",\n\t\t\t\tbody:{ \n\t\t\t\t\tview:\"calendar\",\n\t\t\t\t\ticons:true,\n\t\t\t\t\ttimepicker:true,\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonChange: function(val){\n\t\t\t\t\t\t\tval = val[0];\n\t\t\t\t\t\t\tthis.getParentView()._last_input_target.value = val ? getExcelDateFromJs(val) : \"\";\n\t\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonEnter: function(){\n\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\teditor.popup = popup.config.id;\n\t\t}\n\n\t\treturn editor.popup;\n\t},\n\trender:function(){\n\t\tconst node = webix.html.create(\"div\", {\n\t\t\t\"class\":\"webix_dt_editor\"\n\t\t}, \"<input type='text'>\");\n\n\t\tthis.popup = this.createPopup();\n\n\t\twebix.event(node.firstChild, \"click\", ()=> this.getPopup().show(node));\n\n\t\treturn node;\n\t},\n\tgetPopup(){\n\t\treturn webix.$$(this.popup);\n\t},\n\tshowPopup:function(){\n\t\tconst input = this.getInputNode();\n\t\tconst popup = this.getPopup();\n\n\t\tpopup._last_input_target = input;\n\t\tpopup.show(input);\n\n\t\tinput.setAttribute(\"aria-expanded\", \"true\");\n\t},\n\tupdateCalendar(value){\n\t\tconst calendar = this.getPopup().getBody();\n\n\t\tcalendar.blockEvent();\n\t\tcalendar.setValue(value);\n\t\tcalendar.unblockEvent();\n\t},\n\tafterRender:function(){\n\t\tthis.showPopup();\n\t},\n\tsetValue:function(value){\n\t\tconst noDate = (value === \"\" || isNaN(value*1));\n\t\tvalue = noDate ? new Date() : getJsDateFromExcel(value);\n\t\tthis.updateCalendar(value);\n\n\t\tconst view = webix.$$(this.config.node).queryView(a => a.name === \"spreadsheet\", \"parent\");\n\t\tconst format = getDateEditFormat(view, this.config.row.id, this.config.id);\n\t\tthis.getInputNode().value = format(value);\n\t},\n\tgetValue:function(){\n\t\tconst value = this.getInputNode().value;\n\t\tthis.getPopup().hide();\n\t\treturn value;\n\t}\n}, webix.editors.text);","webix.editors.ss_richselect = webix.extend({\n\tgetFormat:function(value){\n\t\tconst list = this.getInputNode();\n\t\tlet item;\n\n\t\tif (value && list.exists(value))\n\t\t\titem = list.getItem(value);\n\t\treturn item && item.format;\n\t},\n\tpopupInit:function(popup){\n\t\twebix.editors.richselect.popupInit.apply(this, arguments);\n\n\t\tpopup.getList().define(\"template\", function(obj){\n\t\t\treturn obj.$value || obj.value;\n\t\t});\n\t}\n}, webix.editors.richselect);","import {changeAreaDecimals} from \"../operations/formats\";\n\nexport const actions = {\n\tspan: function(view){\n\t\tvar range = view.$$(\"cells\").getSelectArea();\n\t\tif(range){\n\t\t\tif(isMerged(view,range)){\n\t\t\t\tview.splitCell();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlet values = [];\n\t\t\t\tfor(let r = range.start.row; r<=range.end.row; r++){\n\t\t\t\t\tfor(let c = range.start.column; c<=range.end.column; c++){\n\t\t\t\t\t\tlet value = view.getCellValue(r,c);\n\t\t\t\t\t\tif(value) values.push(value);\n\t\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t}\n\t\t\t\tif(values.length>1){\n\t\t\t\t\tview.confirm({\n\t\t\t\t\t\ttext:webix.i18n.spreadsheet.labels[\"merge-cell-confirm\"]\n\t\t\t\t\t}).then(()=> view.combineCells() );\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tview.combineCells();\n\t\t\t}\n\t\t}\n\t},\n\tundo: function(view){\n\t\tview.undo();\n\t},\n\tredo: function(view){\n\t\tview.redo();\n\t},\n\t\"hide-gridlines\": function(view){\n\t\tview.hideGridlines(\"toggle\");\n\t},\n\t\"hide-headers\": function(view){\n\t\tview.hideHeaders(\"toggle\");\n\t},\n\t\"freeze-columns\": function(view){\n\t\tvar table = view.$$(\"cells\");\n\t\tvar select = table.getSelectedId();\n\t\tview.freezeColumns(select && select.column!=\"rowId\"?select.column : 0);\n\t},\n\t\"freeze-rows\":function(view){\n\t\tvar table = view.$$(\"cells\");\n\t\tvar select = table.getSelectedId();\n\t\tview.freezeRows(select ? select.row : 0);\n\t},\n\t\"increase-decimals\": function(view){\n\t\tchangeAreaDecimals(view, 1);\n\t},\n\t\"decrease-decimals\": function(view){\n\t\tchangeAreaDecimals(view, -1);\n\t},\n};\n\nfunction isMerged(view,range){\n\tvar i, j,\n\t\tc0 = range.start,\n\t\tc1 = range.end;\n\n\tfor( i = c0.row*1; i <= c1.row*1; i++ ){\n\t\tfor( j = c0.column*1; j <= c1.column*1; j++ ){\n\t\t\tif(view.$$(\"cells\").getSpan(i, j))\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n","import {toolbarSizes, defaultStyles} from \"./defaults\";\nimport {formatHelpers} from \"../operations/formats\";\n\n// options for 'font-family' select\nexport const fontFamily = [\n\t{id: \"Arial\", value: \"Arial\"},\n\t{id: \"'Roboto', sans-serif\", value: \"Roboto\"},\n\t{id: \"'PT Sans', Tahoma\", value: \"PT Sans\"},\n\t{id: \"Tahoma\", value: \"Tahoma\"},\n\t{id: \"Verdana\", value: \"Verdana\"},\n\t{id: \"Calibri, Tahoma\", value:\"Calibri\"}\n];\n\n// options for 'format' select\nfunction getCellFormats(){\n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn [\n\t\t{id: \"common\", value: locale.common },\n\t\t{id: \"price\", value: locale.currency, example: \"98.20\"},\n\t\t{id: \"int\", value: locale.number, example: \"2120.02\"},\n\t\t{id: \"percent\", value: locale.percent, example:\"0.5\"},\n\t\t{id: \"date\", value: locale.date, example:\"45000\"},\n\t\t{id: \"string\", value: locale.string, example:\"012345\"},\n\t\t{id: \"custom\", value: locale[\"custom-format\"]},\n\t];\n}\n\nexport function getColumnOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet colOperations = [\n\t\t{ id:\"add\",    group:\"column\", value:locale[\"insert-column\"]},\n\t\t{ id:\"del\",    group:\"column\", value:locale[\"delete-column\"]},\n\t\t{ id:\"show\",   group:\"column\", value:locale[\"show-column\"], neighbors:true},\n\t\t{ id:\"hide\",   group:\"column\", value:locale[\"hide-column\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\tcolOperations.push({ id:\"resize\", group:\"column\", value:locale[\"resize-column\"]});\n\treturn colOperations;\n}\n\nexport function getRowOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet rowOperations = [\n\t\t{ id:\"add\",    group:\"row\", value:locale[\"insert-row\"]},\n\t\t{ id:\"del\",    group:\"row\", value:locale[\"delete-row\"]},\n\t\t{ id:\"show\",   group:\"row\", value:locale[\"show-row\"], neighbors:true},\n\t\t{ id:\"hide\",   group:\"row\", value:locale[\"hide-row\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\trowOperations.push({ id:\"resize\", group:\"row\", value:locale[\"resize-row\"]});\n\treturn rowOperations;\n}\n\n// options for 'clear' select\nexport function getClearOperation(){\n\treturn [\n\t\t{id: \"clear-value\",               value: getLocaleClear(\"value\")},\n\t\t{id: \"clear-style\",               value: getLocaleClear(\"style\")},\n\t\t{id: \"clear-conditional-formats\", value: getLocaleClear(\"conditional-formats\")},\n\t\t{id: \"clear-dropdown-editors\",    value: getLocaleClear(\"dropdown-editors\")},\n\t\t{id: \"clear-comments\",            value: getLocaleClear(\"comments\")},\n\t\t{ $template: \"Separator\" },\n\t\t{id: \"clear-all\",                 value: getLocaleClear(\"all\")}\n\t];\n}\n\n// options for 'borders' select\nconst borders = [\n\t{id: \"no\", value: \"no\"},\n\t{id: \"left\", value: \"left\"},\n\t{id: \"top\", value: \"top\"},\n\t{id: \"right\", value: \"right\"},\n\t{id: \"bottom\", value: \"bottom\"},\n\t{id: \"all\", value: \"all\"},\n\t{id: \"outer\", value: \"outer\"},\n\t{id: \"top-bottom\", value: \"top-bottom\"}\n];\n\nfunction getLocaleClear(value){\n\tvar locale = webix.i18n.spreadsheet.menus;\n\treturn locale[\"clear\"] + \" \" + locale[\"clear-\"+value].toLowerCase();\n}\n\n// options for 'font-size' select\nfunction getFontSize(){\n\tvar numbers = [\n\t\t\"8\",\"9\",\"10\",\"11\",\"12\",\"14\",\"15\",\n\t\t\"16\",\"18\",\"20\",\"22\",\"24\",\"28\",\"36\"\n\t];\n\tvar  fontSize = [];\n\n\tfor(var i =0; i < numbers.length; i++){\n\t\tfontSize.push({id: numbers[i]+webix.i18n.spreadsheet.labels.px, value: numbers[i]});\n\t}\n\treturn fontSize;\n}\n\nexport const styleFormats = {\n\t\"font-weight\": \"bold\",\n\t\"font-style\": \"italic\",\n\t\"text-decoration\": \"underline\"\n};\n\nexport const ui = {\n\tbutton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle\", width: config.width||toolbarSizes.width, id: config.name, name: config.name,  label: config.label,\n\t\t\tcss: config.css||\"\", onValue: styleFormats[config.name], offValue: \"normal\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\tcolorButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-color\",  css: config.css,  name: config.name, width: config.width||toolbarSizes.width+24,\n\t\t\ttitle: \"<span class='webix_ssheet_button_icon webix_ssheet_color_button_icon webix_ssheet_icon ssi-\"+config.name+\"' ></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ttoggleButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle-silent\", width: toolbarSizes.width, id: config.name, name: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+config.name+\"'></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ticonButton: function(config){\n\t\tvar btn = webix.copy(config);\n\t\twebix.extend(btn, {view: \"button\", width: toolbarSizes.width, id: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+config.name+\"'></span>\",\n\t\t\tcss: \"\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||webix.i18n.spreadsheet.menus[config.name]||\"\"\n\t\t});\n\t\tif(config.onValue){\n\t\t\twebix.extend(btn,{view: \"ssheet-toggle\", onValue: config.onValue, offValue: config.offValue},true);\n\t\t}\n\n\t\treturn btn;\n\t},\n\tsegmented: function(config){\n\t\treturn  {\n\t\t\tview: \"segmented\", name: config.name, css:config.css||\"\", width: config.width||toolbarSizes.width+76,  options:config.options\n\t\t};\n\t},\n\tselect: function(config){\n\t\twebix.extend(config,{\n\t\t\tview: \"richselect\",\n\t\t\tid: config.name,\n\t\t\tvalue: defaultStyles[config.name],\n\t\t\tsuggest: {\n\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t//fitMaster: false,\n\t\t\t\tpadding: 0,\n\t\t\t\tdata: config.options\n\t\t\t}\n\t\t});\n\n\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\tif(config.popupWidth){\n\t\t\tconfig.suggest.fitMaster = false;\n\t\t\tconfig.suggest.width = config.popupWidth;\n\t\t}\n\t\tif(config.popupTemplate)\n\t\t\tconfig.suggest.body = {\n\t\t\t\ttemplate: config.popupTemplate\n\t\t\t};\n\t\tif(config.popupEvents){\n\t\t\tconfig.suggest.body = config.suggest.body || {};\n\t\t\tconfig.suggest.body.on = config.popupEvents;\n\t\t}\n\t\treturn config;\n\t},\n\tseparator: function(){\n\t\treturn {\n\t\t\tview: \"ssheet-separator\"\n\t\t};\n\t},\n\ttitle: function(config){\n\t\tvar title = config.title;\n\t\tif(title.indexOf(\"$\") === 0)\n\t\t\ttitle = \"\";\n\t\ttitle = webix.i18n.spreadsheet.labels[config.title]||title;\n\n\t\treturn {\n\t\t\ttemplate: title, view: \"ssheet-bar-title\", height: toolbarSizes.titleHeight\n\t\t};\n\t},\n\tborders: function(config){\n\t\treturn {view: \"ssheet-borders\", width:config.width||toolbarSizes.width+24, data: borders, id: config.name, name: config.name,\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\talign: function(config){\n\t\treturn {view: \"ssheet-align\", value: defaultStyles[config.name], width:config.width||toolbarSizes.width+24, data: config.options,\n\t\t\tname: config.name, tooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\tcondFormat: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-cond-format\",\n\t\t\twidth: 40,\n\t\t\tid: config.name,\n\t\t\tname: config.name\n\t\t};\n\t}\n};\n\nexport const buttonsMap = {\n\t\"font-family\": function(){\n\t\treturn  ui.select({name: \"font-family\", options:fontFamily, width: 100});\n\t},\n\t\"font-size\": function(){\n\t\treturn  ui.select({name: \"font-size\", options:getFontSize(), width: 64});\n\t},\n\t\"font-weight\": function(){\n\t\treturn ui.button({name:\"font-weight\",label: \"B\", css: \"webix_ssheet_bold\"});\n\t},\n\t\"font-style\": function(){\n\t\treturn ui.button({name: \"font-style\",label: \"I\",css:\"webix_ssheet_italic\"});\n\t},\n\t\"text-decoration\": function(){\n\t\treturn ui.button({name: \"text-decoration\",label: \"U\",css: \"webix_ssheet_underline\"});\n\t},\n\t\"color\": function(){\n\t\treturn ui.colorButton({name: \"color\",icon:\"font\",css:\"webix_ssheet_color\"});\n\t},\n\t\"background\": function(){\n\t\treturn  ui.colorButton({name: \"background\",icon:\"paint-brush\",css:\"webix_ssheet_background\", width: 64});\n\t},\n\t\"borders\": function(){\n\t\treturn ui.borders({ name: \"borders\" });\n\t},\n\t\"text-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn ui.align({name: \"text-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"left\", css: \"webix_ssheet_icon ssi-left\", tooltip: locale[\"align-left\"]},\n\t\t\t{id: \"center\", css: \"webix_ssheet_icon ssi-center\", tooltip: locale[\"align-center\"]},\n\t\t\t{id: \"right\", css: \"webix_ssheet_icon ssi-right\", tooltip: locale[\"align-right\"]}\n\t\t]});\n\t},\n\t\"vertical-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn  ui.align({name: \"vertical-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"top\", css: \"webix_ssheet_icon ssi-top\", tooltip: locale[\"align-top\"]},\n\t\t\t{id: \"middle\", css: \"webix_ssheet_icon ssi-middle\", tooltip: locale[\"align-middle\"]},\n\t\t\t{id: \"bottom\", css: \"webix_ssheet_icon ssi-bottom\", tooltip: locale[\"align-bottom\"]}\n\t\t]});\n\t},\n\t\"wrap\": function(){\n\t\treturn ui.iconButton({name: \"wrap\", onValue:\"wrap\", offValue:\"nowrap\"});\n\t},\n\t\"format\": function(){\n\t\treturn ui.select({\n\t\t\tname: \"format\", width: 106, options:getCellFormats(), popupWidth: 180,\n\t\t\tpopupTemplate: function(obj){\n\t\t\t\t//make it look like an actual cell\n\t\t\t\tvar format =  formatHelpers[obj.id] ? formatHelpers[obj.id].getFormat : \"\";\n\t\t\t\tvar cell = {css:\"\"};\n\t\t\t\tvar example = format && obj.example?format(obj.example, cell):\"\";\n\t\t\t\treturn obj.value + (format?\"<span class='webix_ssheet_right\"+(cell.css?\" \"+cell.css:\"\")+\"'>\"+example+\"</span>\":\"\");\n\t\t\t},\n\t\t\tpopupEvents:{\n\t\t\t\tonItemClick: function(id){\n\t\t\t\t\tif(id == \"custom\")\n\t\t\t\t\t\tthis.getTopParentView().callEvent(\"onCommand\", [{id:id}]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"column\": function(view){\n\t\treturn {\n\t\t\tname: \"column\",\n\t\t\tview: \"ssheet-button\", icon: \"column\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getColumnOperation(view)\n\t\t};\n\t},\n\t\"row\": function(view){\n\t\treturn {\n\t\t\tname: \"row\", view: \"ssheet-button\", icon: \"row\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getRowOperation(view)\n\t\t};\n\t},\n\t\"clear\": function(){\n\t\treturn {\n\t\t\tname: \"clear\", view: \"ssheet-button\", icon: \"clear-styles\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getClearOperation()\n\t\t};\n\t},\n\t\"image\":function(){\n\t\treturn {\n\t\t\tname:\"image\", view:\"ssheet-button\", icon:\"add-image\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-image-cell\", value: webix.i18n.spreadsheet.labels[\"add-image-cell\"]},\n\t\t\t\t{id:\"add-image-top\", value: webix.i18n.spreadsheet.labels[\"add-image-top\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"graph\":function(){\n\t\treturn {\n\t\t\tname:\"graph\", view:\"ssheet-button\", icon:\"add-sparkline\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-sparkline\", value:webix.i18n.spreadsheet.labels[\"add-sparkline\"]},\n\t\t\t\t{id:\"add-chart\", value: webix.i18n.spreadsheet.labels[\"add-chart\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"comment\": function(){\n\t\treturn {\n\t\t\tname: \"comment\",\n\t\t\tview: \"ssheet-button\", icon: \"comments\",\n\t\t\tarrow: true, area: true, width: 55\n\t\t};\n\t},\n\t\"create-filter\": function(){\n\t\treturn ui.toggleButton({name: \"create-filter\"});\n\t},\n\t\"hide-gridlines\": function(){\n\t\treturn ui.toggleButton({name: \"hide-gridlines\"});\n\t},\n\t\"hide-headers\": function(){\n\t\treturn ui.toggleButton({name: \"hide-headers\"});\n\t}\n};","import {toolbarSizes} from \"./defaults\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet;\n\treturn locale.menus[text] || locale.labels[text] || locale.tooltips[text] || text;\n}\nfunction calcButtons(){\n\tvar i, name, width,\n\t\tgroups = {\n\t\t\t\"undo\":[\"undo\",\"redo\"],\n\t\t\t\"insert\":[\"add-sparkline\",\"add-image\",\"add-comment\"]\n\t\t},\n\t\tresult = {};\n\n\tfor( name in groups){\n\t\tresult[name] = 0;\n\t\tfor(i=0; i < groups[name].length; i++){\n\t\t\twidth = webix.html.getTextSize(getText(groups[name][i]), \"webix_ssheet_button_measure\").width + 7;\n\t\t\tresult[name] = Math.max(width,result[name]);\n\t\t}\n\t}\n\treturn result;\n}\nexport function getAllElements(){\n\tvar sizes = calcButtons();\n\tvar titleHeight = toolbarSizes.titleHeight;\n\n\treturn [\n\t\t{\n\t\t\tpadding: 3,\n\t\t\tmargin: 0,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"sheet\", view: \"ssheet-button-icon-top\", label: getText(\"sheet\"), arrow: true,\n\t\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t\t{id: \"new-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"copy-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"remove-sheet\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"excel-import\"},\n\t\t\t\t\t\t\t\t{$button: \"excel-export\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"print\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"file\"), view: \"ssheet-bar-title\", height: titleHeight, width: 85}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"undo\", view: \"ssheet-button\", label: getText(\"undo\"), width: sizes.undo },\n\t\t\t\t{$button: \"redo\", view: \"ssheet-button\", label: getText(\"redo\"), width: sizes.undo},\n\t\t\t\t{template: getText(\"undo-redo\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-family\", width: (webix.skin.$active.inputHeight+2)*3+4},\n\t\t\t\t\t\t\t\t{$button: \"font-size\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{$button: \"borders\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-weight\"},\n\t\t\t\t\t\t\t\t{$button: \"font-style\"},\n\t\t\t\t\t\t\t\t{$button: \"text-decoration\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{$button: \"background\"},\n\t\t\t\t\t\t{$button: \"color\"}\n\t\t\t\t\t]\n\n\t\t\t\t},\n\t\t\t\t{template: getText(\"font\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"text-align\"},\n\t\t\t\t\t\t{$button: \"span\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"vertical-align\"},\n\n\t\t\t\t\t\t{$button: \"wrap\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"align\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"format\"},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"increase-decimals\"},\n\t\t\t\t\t\t{$button: \"decrease-decimals\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\n\t\t\t\t{template: getText(\"number\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-asc\"},\n\t\t\t\t\t{ $button: \"create-filter\"},\n\t\t\t\t\t{ $button: \"conditional-format\"},\n\t\t\t\t\t{ $button: \"add-link\"},\n\t\t\t\t\t{ $button: \"clear\"}\n\t\t\t\t]},\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-desc\"},\n\t\t\t\t\t{ $button: \"add-range\"},\n\t\t\t\t\t{ $button: \"lock-cell\"},\n\t\t\t\t\t{ $button: \"add-dropdown\"}\n\t\t\t\t]},\n\t\t\t\t{template: getText(\"edit\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"image\", view: \"ssheet-button\", label: getText(\"image\"), width:sizes.insert},\n\t\t\t\t\t\t{$button: \"add-comment\", view: \"ssheet-button\", label: getText(\"comment\"), width:sizes.insert},\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{$button: \"graph\", view: \"ssheet-button\", label: getText(\"graph\"), width:sizes.insert},\n\t\t\t\t{template: getText(\"insert\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{rows:[\n\t\t\t\t\t\t\t{$button:\"row\"},\n\t\t\t\t\t\t\t{$button:\"column\"}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"hide-gridlines\"},\n\t\t\t\t\t\t\t\t{$button:\"hide-headers\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"freeze-rows\"},\n\t\t\t\t\t\t\t\t{$button:\"freeze-columns\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"view\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{}\n\t];\n}","import {actions} from \"./toolbar/actions\";\nimport {defaultStyles} from \"./toolbar/defaults\";\nimport {toolbarButtons, getButtons} from \"./toolbar/helpers\";\nimport * as elm from \"./toolbar/all_elements\";\nimport {isCustom} from \"./operations/formats\";\nimport {getStyle, getFormat} from \"./operations/styles\";\n\nconst buttons = {\n\t\"undo-redo\": [\"undo\",\"redo\"],\n\t\"font\": [\"font-family\",\"font-size\",\"font-weight\",\"font-style\",\"text-decoration\",\"color\",\"background\",\"borders\"],\n\t\"align\": [\"text-align\",\"vertical-align\",\"wrap\",\"span\"],\n\t\"format\": [\"format\"]\n};\n\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"toolbar-update\")\n\t\t\tupdateValue(view, action.name, action.value);\n\t});\n\n\tlet elements = [];\n\n\tif(view.config.toolbar){\n\t\tlet allElements =  view.config.toolbar;\n\t\tif(allElements == \"full\"){\n\t\t\tallElements = elm.getAllElements();\n\t\t\tif(webix.isUndefined(view.config.bottombar))\n\t\t\t\tview.config.bottombar = true;\n\t\t}\n\t\telements =   toolbarButtons(view, allElements);\n\t}\n\telse\n\t\telements =   getButtons(view, view.config.buttons || buttons);\n\n\tconst bar = {\n\t\tview: webix.env.$customScroll ? \"scrollview\" : \"ssheet-toolbar-scrollview\",\n\t\tscroll: \"x\",\n\t\tbody: {\n\t\t\tview:\"toolbar\",\n\t\t\tcss: \"webix_ssheet_toolbar webix_layout_toolbar\",\n\t\t\tid:\"bar\",\n\t\t\tpadding:0,\n\t\t\telements,\n\t\t\ton: {\n\t\t\t\tonChange: function (){\n\t\t\t\t\tvar source = this.$eventSource;\n\t\t\t\t\tvar value = source.getValue();\n\t\t\t\t\tvar name = source.config.name;\n\t\t\t\t\tif(name == \"format\" && value == \"common\")\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\tif(!(name == \"format\" && value == \"custom\"))\n\t\t\t\t\t\tview.callEvent(\"onStyleSet\", [name, value]);\n\t\t\t\t},\n\t\t\t\tonItemClick: function (id){\n\t\t\t\t\tvar viewId = view.innerId(id);\n\t\t\t\t\tif (actions[viewId])\n\t\t\t\t\t\tactions[viewId].call(this, view);\n\t\t\t\t\telse\n\t\t\t\t\t\tview.callEvent(\"onCommand\", [{ id: viewId }]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"toolbar\", bar]);\n\treturn bar;\n\n}\n\nfunction ready(view){\n\tview.attachEvent(\"onAfterSelect\", (selected) => setValues(view, selected));\n}\n\nfunction setValues(view, selected) {\n\tconst barStyles = getBarStyles(view, selected);\n\tview.$$(\"bar\").setValues(barStyles);\n}\n\nfunction updateValue(view, name, value){\n\tconst element = view.$$(\"bar\").elements[name];\n\n\tif (element)\n\t\telement.setValue(value);\n}\n\nfunction getBarStyles(view, selected){\n\tconst dropdowns = [\n\t\t\"font-family\",\n\t\t\"font-size\",\n\t\t\"text-align\",\n\t\t\"vertical-align\",\n\t\t\"format\",\n\t\t\"background\",\n\t\t\"color\"\n\t];\n\n\tconst cell = selected[0];\n\tconst barStyles = getCellStyles(view, cell);\n\n\tfor(let i = 1; i < selected.length; i++){\n\t\tconst cellStyle = getCellStyles(view, selected[i]);\n\n\t\tfor(let k = dropdowns.length-1; k >= 0; k--){\n\t\t\tconst property = dropdowns[k];\n\t\t\tif(barStyles[property] != cellStyle[property]){\n\t\t\t\tdelete barStyles[property];\n\t\t\t\tdropdowns.splice(k, 1);\n\t\t\t}\n\t\t}\n\n\t\tif(!dropdowns.length)\n\t\t\tbreak;\n\t}\n\n\treturn barStyles;\n}\n\nfunction getCellStyles(view, cell){\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span)\n\t\t[cell.row, cell.column] = span;\n\n\tconst obj = getStyle(view, cell);\n\tconst styles = obj ? webix.copy(obj.props) : {};\n\n\tfor (let i in defaultStyles)\n\t\tif(!styles[i])\n\t\t\tstyles[i] = defaultStyles[i];\n\n\tconst format = getFormat(view, cell.row, cell.column) || \"common\";\n\tstyles.format = isCustom(format) ? \"custom\" : format;\n\n\treturn styles;\n}","import {ui, buttonsMap} from \"./buttons\";\n\nexport function toolbarButtons(view,structure){\n\tvar checkButtons = function(cells){\n\t\tfor(var i =0; i < cells.length; i++){\n\t\t\tvar name = cells[i].$button;\n\t\t\tif (name){\n\t\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\t\twebix.extend(cells[i], base);\n\t\t\t}\n\t\t\t\n\t\t\tif(cells[i].rows)\n\t\t\t\tcheckButtons(cells[i].rows);\n\t\t\tif(cells[i].cols)\n\t\t\t\tcheckButtons(cells[i].cols);\n\t\t}\n\t};\n\tcheckButtons(structure);\n\treturn structure;\n}\n\nexport function getButtons(view,structure){\n\tvar config = [];\n\tfor(var block in structure){\n\t\tconfig.push(elementsBlock(view, block, structure[block]));\n\t\tconfig.push(ui.separator());\n\t}\n\treturn config;\n}\n\nfunction blockColumns(view, buttons){\n\tvar cols = [];\n\tfor(var i =0; i < buttons.length; i++){\n\t\tlet name = buttons[i];\n\t\tif(typeof name == \"object\"){\n\t\t\tcols.push(name);\n\t\t}\n\t\telse {\n\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\tcols.push(base);\n\t\t}\n\t}\n\treturn cols;\n}\n\n\nfunction elementsBlock(view, name, columns){\n\tvar block = {\n\t\trows:[\n\t\t\t{\n\t\t\t\tpadding:2,\n\t\t\t\tcols:[{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: blockColumns(view, columns)\n\t\t\t\t}]\n\t\t\t},\n\t\t\tui.title({title:name})\n\t\t]\n\t};\n\treturn block;\n}","import {getTextSize} from \"./styles\";\n\nexport function selectRow(row, view, endRow){\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow:row,\n\t\tcolumn:columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: (endRow || row),\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectAll(view){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow: order[0],\n\t\tcolumn: columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: order[order.length-1],\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectColumn(column, view, endColumn){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar startRow = order[0];\n\tvar lastRow = order[order.length-1];\n\n\tvar start = {row: startRow, column: column};\n\tvar last = {row: lastRow, column: (endColumn || column) };\n\n\t_selectRange(start, last, view);\n}\n\nexport function isColSelected(column, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (column >= selectedArea.start.column && column <= selectedArea.end.column)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function isCellSelected(row, column, view){\n\treturn isRowSelected(row, view) && isColSelected(column, view);\n}\n\nexport function isRowSelected(row, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (row >= selectedArea.start.row && row <= selectedArea.end.row)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function selectColumns(column, view) {\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\n\tif (!selectedArea)\n\t\tselectColumn(column, view);\n\telse {\n\t\tlet col1 = Math.min(selectedArea.start.column, selectedArea.end.column, column);\n\t\tlet col2 = Math.max(selectedArea.start.column, selectedArea.end.column, column);\n\t\tselectColumn(col1, view, col2);\n\t}\n}\n\nfunction _selectRange(a, b, view){\n\tview.$$(\"cells\").addSelectArea(a, b);\n}\n\n\nexport function adjustColumn(column, view) {\n\tlet width = 25;\n\tconst columnWidth = view._table.getColumnConfig(column).width;\n\n\tview._table.eachRow(function(row) {\n\t\tconst span = view._table.getSpan(row, column);\n\t\tif(span && span[2] > 1)\n\t\t\treturn;\n\n\t\tconst text = this.getText(row, column);\n\t\tconst style = view.getStyle(row, column);\n\t\tconst css = style ? style.id : \"\";\n\n\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\tconst size = getTextSize(view, text, css);\n\n\t\t\tif(view.getCellEditor(row, column))\n\t\t\t\tsize.width += 20;\n\t\t\tif(view.getCellFilter(row, column))\n\t\t\t\tsize.width += 20;\n\n\t\t\tif(style && style.props.wrap == \"wrap\" && size.width > columnWidth)\n\t\t\t\tsize.width = columnWidth;\n\t\t\tif (size.width > width)\n\t\t\t\twidth = size.width;\n\t\t}\n\t});\n\tview._table.setColumnWidth(column, width);\n}\n\nexport function adjustRow(row, view) {\n\tlet height = 25;\n\n\tview._table.eachColumn(function(column) {\n\t\tif(column != \"rowId\"){\n\t\t\tconst text = this.getText(row, column);\n\n\t\t\t// if there is text wrap in cell we need to know width to get correct height\n\t\t\tlet width = this.getColumnConfig(column).width;\n\t\t\tconst span = view._table.getSpan(row, column);\n\t\t\tif(span)\n\t\t\t\twidth = view._table.getSpanNode({row:span[0], column:span[1]}).offsetWidth;\n\n\t\t\tlet style = view.getStyle(row, column);\n\t\t\tlet css = style ? style.id : \"\";\n\n\t\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\t\tlet size = getTextSize(view, text, css, width);\n\t\t\t\tif (size.height > height) height = size.height;\n\t\t\t}\n\t\t}\n\t});\n\tview._table.setRowHeight(row, height);\n}\n\nexport function highlightColRow(start, end, view){\n\tif(!view._table.config.header) return;\n\n\tconst grid = view._table;\n\n\tconst css = \"webix_highlight\";\n\n\tlet sr = start.row, er = end.row, sc = start.column, ec = end.column;\n\n\tconst columns = grid.config.columns;\n\tconst firstColumn = columns[1].id;\n\n\tif(sc == \"rowId\"){\n\t\tif(sc == ec){\n\t\t\tstart.column = sc = firstColumn;\n\t\t\tend.column = ec = columns[ columns.length-1 ].id;\n\t\t}\n\t\telse\n\t\t\tstart.column = sc = firstColumn;\n\t}\n\telse if(ec == \"rowId\")\n\t\tend.column = ec = firstColumn;\n\n\tif(er<sr) [sr, er] = [er, sr];\n\tif(ec<sc) [sc, ec] = [ec, sc];\n\n\tgrid.eachRow(function(row){\n\t\tif(row < sr || row > er)\n\t\t\tgrid.removeCellCss(row, \"rowId\", css, true);\n\t\telse\n\t\t\tgrid.addCellCss(row, \"rowId\", css, true);\n\t});\n\twebix.delay(() => grid.refresh());\n\n\tgrid.eachColumn(function(col){\n\t\tconst node = grid.getHeaderNode(col);\n\t\tif(col == \"rowId\" || !node) return;\n\n\t\tif(col < sc || col > ec)\n\t\t\twebix.html.removeCss(node, css);\n\t\telse\n\t\t\twebix.html.addCss(node, css, true);\n\t});\n}","import group from \"./undo_group\";\n\nexport const lockCss = \"webix_lock\";\n\nexport function init(view){\n\tview._locks = {};\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, mode) => {\n\t\tif (type === \"lock\") lockCell(view, row, column, !!mode, true);\n\t});\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"lock-cell\")\n\t\t\tlock(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._locks = {};\n}\n\nexport function lockCell(view, row, column, mode, silent){\n\tvar table = view.$$(\"cells\");\n\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\tgroup.set(function() {\n\t\t\t_mapCellsCalls(row, column, function(row, column){\n\t\t\t\tlockCell(view, row, column, mode, true);\n\t\t\t});\n\t\t});\n\t} else {\n\t\tmode = ((mode === false) ? false : true);\n\t\tvar objrow = view._locks[row] = view._locks[row] || {};\n\t\tobjrow[column] = mode;\n\t\tif (mode)\n\t\t\ttable.addCellCss(row, column, lockCss, true);\n\t\telse\n\t\t\ttable.removeCellCss(row, column, lockCss, true);\n\n\t\tview.callEvent(\"onAction\", [\"lock\", { row, column, value: !mode, newValue: mode }]);\n\t}\n\n\tif (!silent)\n\t\ttable.refresh();\n}\n\nfunction _mapCellsCalls(start, end, handler,master){\n\tfor (let x = start.row; x<=end.row; x++)\n\t\tfor (let y = start.column; y<=end.column; y++)\n\t\t\thandler.call(master||this, x, y);\n}\n\nexport function isCellLocked(view, row, column){\n\treturn view._locks[row]?view._locks[row][column]:false;\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tlocked = [];\n\tfor(row in view._locks){\n\t\tfor(column in view._locks[row])\n\t\t\tif(view._locks[row][column])\n\t\t\t\tlocked.push([row,column]);\n\t}\n\tdata.locked = locked;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tlocked = data.locked;\n\n\tif(locked)\n\t\tfor(i = 0; i < locked.length; i++)\n\t\t\tlockCell(view, locked[i][0],locked[i][1],true, true);\n}\n\nfunction lock(view){\n\tvar block = view.$$(\"cells\").getSelectArea();\n\tif (block){\n\t\tvar mode = view.isCellLocked(block.start.row, block.start.column);\n\t\tview.lockCell(block.start, block.end, !mode);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet locked = data.locked,\n\t\ti = locked.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = locked[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tlocked.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tlocked[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tlocked.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tlocked[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","import {lockCss} from \"./lock_cell\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onStyleChange\", (row, column, style) => {\n\t\tvar span = getSpan(view, row, column);\n\t\tif (span){\n\t\t\tvar extraCss = getExtraCss(view, row, column);\n\t\t\tspan[3] = (style ? style.id : \"\") + (extraCss ? (\" \" + extraCss) : \"\");\n\t\t}\n\t});\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tparse(view, data);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view, data);\n\t});\n\t\n\tview.attachEvent(\"onUndo\", (type, row, column, value, isUndo) => {\n\t\tif(type == \"span\" || type == \"split\"){\n\t\t\tif (type == \"span\") \n\t\t\t\tisUndo = !isUndo;\n\t\t\tundoSpan(view, row, column, value, isUndo);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (name, options) => {\n\t\tif(name == \"lock\")\n\t\t\tsetSpanCss(view, options.row, options.column, lockCss, options.newValue);\n\t\telse if(name == \"before-grid-change\")\n\t\t\tupdatePosition(view, options.name, options.inc, options.data, options.start);\n\t\telse if(name == \"check-borders\")\n\t\t\treturn checkSpanBorders(view, options.row, options.column, options.area, options.mode);\n\t});\n}\n\nfunction getSpan(view, row, column){\n\tvar item = view.$$(\"cells\").getSpan()[row];\n\tif (item)\n\t\treturn item[column];\n}\n\nfunction parse(view, data){\n\tif (data.spans)\n\t\tfor (var i = 0; i < data.spans.length; i++) {\n\t\t\tvar span = data.spans[i];\n\t\t\taddSpan( view,\n\t\t\t\t{ row: span[0], column: span[1] },\n\t\t\t\tspan[2]*1,\n\t\t\t\tspan[3]*1,\n\t\t\t\ttrue \n\t\t\t);\n\t\t}\n}\n\nfunction serialize(view, data){\n\tvar spans = [];\n\tvar pull = view.$$(\"cells\").getSpan();\n\tif (pull){\n\t\tfor (var rid in pull){\n\t\t\tvar row = pull[rid];\n\t\t\tfor (var cid in row){\n\t\t\t\tvar span = row[cid];\n\t\t\t\tspans.push([rid*1, cid*1, span[0], span[1]]);\n\t\t\t}\n\t\t}\n\n\t\tdata.spans = spans;\n\t}\n}\n\nexport function addSpan(view, cell, x, y, silent){\n\tif (x<2 && y<2) return;\n\n\tif(silent || view.callEvent(\"onBeforeSpan\", [cell.row, cell.column, [x, y]])){\n\t\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\t\tlet css = ( obj && obj.style ) || \"\";\n\t\tvar extraCss = getExtraCss(view, cell.row, cell.column);\n\t\tif (extraCss)\n\t\t\tcss += \" \" + extraCss;\n\n\t\tsetSpanValue(view, cell, x, y);\n\t\tview.$$(\"cells\").addSpan(cell.row, cell.column, x, y, null, css);\n\t\tif (!silent){\n\t\t\tview.callEvent(\"onAfterSpan\", [cell.row, cell.column, [x, y]]);\n\t\t\tsave(view, \"spans\", {\n\t\t\t\trow:cell.row, column: cell.column,\n\t\t\t\tx:x, y:y\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function removeSpan(view, cell){\n\tvar span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span && view.callEvent(\"onBeforeSplit\", [ cell.row, cell.column, [span[2], span[3]] ])){\n\t\tview.$$(\"cells\").removeSpan(cell.row, cell.column);\n\t\tview.callEvent(\"onAfterSplit\", [ cell.row, cell.column, [span[2], span[3]] ]);\n\t\tsave(view, \"spans\", {\n\t\t\trow:cell.row, column: cell.column,\n\t\t\tx:0, y:0\n\t\t});\n\t}\n}\n\nexport function getRange(sel){\n\tvar lx, ly, rx, ry;\n\trx = ry = 0;\n\tlx = ly = Infinity;\n\n\tfor (var i=0; i<sel.length; i++){\n\t\tvar cx = sel[i].column*1;\n\t\tvar cy = sel[i].row*1;\n\n\t\tlx = Math.min(cx, lx);\n\t\trx = Math.max(cx, rx);\n\t\tly = Math.min(cy, ly);\n\t\try = Math.max(cy, ry);\n\t}\n\n\treturn {\n\t\tcell:{ row:ly, column:lx },\n\t\tx: rx-lx+1,\n\t\ty: ry-ly+1\n\t};\n}\n\nexport function setSpanCss(view, row, column, css, add){\n\tconst span = getSpan(view, row, column);\n\tif (span){\n\t\tif (add){\n\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\tspan[3] += \" \" + css;\n\t\t} else {\n\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t}\n\t}\n}\n\nfunction getExtraCss(view, row, column){\n\tlet extraCss = [];\n\tif(view.getCellEditor(row, column))\n\t\textraCss.push(\"ss_editor\");\n\tif(view.getCellFilter(row, column))\n\t\textraCss.push(\"ss_filter\");\n\treturn extraCss.join(\" \");\n}\n\nfunction undoSpan(view,row, column,value,isUndo){\n\tif(isUndo){\n\t\tremoveSpan(view,{row: row, column: column});\n\t}\n\telse{\n\t\taddSpan(view, {row: row, column: column}, value[0], value[1]);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet spans = data.spans;\n\tif(inc){\n\t\tfor(let i = spans.length-1;i >=0;i--){\n\t\t\tlet [row,column] = spans[i];\n\n\t\t\tif(inc < 0){//deleting\n\t\t\t\tif(name == \"row\" && row <= start.row-inc-1)\n\t\t\t\t\tinc = start.row - spans[i][0];\n\t\t\t\telse if (name == \"column\" && column <= start.column-inc-1)\n\t\t\t\t\tinc = start.column - spans[i][1];\n\t\t\t}\n\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tspans[i][0] =  name == \"row\"?row*1 + inc:row;\n\t\t\t\tspans[i][1] = name == \"column\"?column*1 + inc:column;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar borderChecks = {\n\t\"border-right\":\t\tfunction(row, column, span, area){\n\t\treturn area.end.column == column+span[0]-1;\n\t},\n\t\"border-bottom\":\tfunction(row, column, span, area){\n\t\treturn area.end.row == row+span[1]-1;\n\t}\n};\n\nfunction checkSpanBorders(view, row, column, area, mode){\n\tvar span = getSpan(view, row, column);\n\treturn span&&borderChecks[mode]?borderChecks[mode](row, column, span, area):false;\n}\n\n// clear merged cells except the first one\nfunction setSpanValue(view, cell, x, y){\n\tvar i,j,value,\n\t\trow = cell.row*1,\n\t\tcolumn = cell.column*1,\n\t\tisEmpty = !view.getCellValue(row,column);\n\tfor(i = row; i < row+y; i++){\n\t\tfor(j = column; j < column+x; j++) {\n\t\t\tvalue = view.getCellValue(i,j);\n\t\t\tif(value!==\"\" && (j != column || i != row)){\n\t\t\t\tif(isEmpty){\n\t\t\t\t\tisEmpty = false;\n\t\t\t\t\tview.setCellValue(row,column,value);\n\t\t\t\t}\n\t\t\t\tview.setCellValue(i,j,\"\");\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function adjustSpan (span, action, start, end, view, data, spanData){\n\tvar length = action.group == \"row\" ? span[3] : span[2];\n\tvar checkSpan = action.group == \"row\" ? [span[0]*1, span[0]*1+span[3]-1] : [span[1]*1, span[1]*1+span[2]-1];\n\tvar selection = action.group == \"row\" ? [start.row, end.row] : [start.column, end.column];\n\n\t//if we add, the number of selected rows/cols is added to span, so we need original selection length\n\tvar inc = selection[1] - selection[0] + 1;\n\n\tselection[0] = Math.max(selection[0], checkSpan[0]);\n\tselection[1] = Math.min(selection[1], checkSpan[1]);\n\n\tvar isFirstCell = selection[0] == checkSpan[0];\n\n\tif(selection[0] <= selection[1]){ //selection is in span\n\t\tif(action.id == \"del\") //if we delete, only rows/cols included into span\n\t\t\tinc = (selection[1] - selection[0]+ 1) * -1;\n\t\t//delete smth which starts as span and less than it's length\n\t\tif(action.id == \"del\" && isFirstCell && length > -1*inc){\n\t\t\tconst item = arr.find(data, arr => arr[0] == span[0] && arr[1] == span[1]);\n\t\t\tif(item)\n\t\t\t\tspanData.push(item);\n\t\t}\n\n\t\tif(!(isFirstCell && action.id == \"add\")){\n\t\t\tspan[2] = action.group == \"column\" ? span[2]+inc : span[2];\n\t\t\tspan[3] = action.group == \"row\" ? span[3]+inc : span[3];\n\t\t}\n\t}\n\treturn span;\n}\n\nexport function pasteSpan(view, extra, row, col, cutted, translate){\n\t//existing span\n\tvar s = view._table.getSpan(row, col);\n\tif(extra && extra.span){\n\t\tvar span = extra.span;\n\t\t//if we are on start position for the future span\n\t\tif(row == span[0]*1+translate.row && col == span[1]*1+translate.column){\n\t\t\t//delete spans in future paste zone \n\t\t\tview._table.mapCells(row, col, span[3], span[2], (value, rid, cid) => {\n\t\t\t\ts = view._table.getSpan(rid,cid);\n\t\t\t\tif(s) removeSpan(view, {row:s[0], column:s[1]});\n\t\t\t}, true);\n\t\t\taddSpan(view, {row:row, column:col}, span[2], span[3]);\n\t\t\tif(cutted === 1)\n\t\t\t\tremoveSpan(view, {row:extra.row, column:extra.col});\n\t\t}\n\t}\n\telse if(s)\n\t\tremoveSpan(view, {row:s[0], column:s[1]});\n}","import {isDateInvalid} from \"../operations/formats\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet.labels;\n\treturn locale[text] || text;\n}\nexport function getDefaultStyles(){\n\treturn [\n\t\t{name: getText(\"normal\"), css: \"webix_ssheet_condition_regular\"},\n\t\t{name: getText(\"neutral\"), css: \"webix_ssheet_condition_neutral\"},\n\t\t{name: getText(\"bad\"), css: \"webix_ssheet_condition_bad\"},\n\t\t{name: getText(\"good\"), css: \"webix_ssheet_condition_good\"}\n\t];\n}\n\nfunction isDate(value){\n\treturn value && !isNaN(value) && !isDateInvalid(value);\n}\n\nexport const conditions = {\n\tnumber:[\n\t\t{ id:\"greater\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 > b*1);\n\t\t}},\n\t\t{ id:\"less\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 < b*1);\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 >= b*1);\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 <= b*1);\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){ return a == b; }},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){ return a != b; }},\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}}\n\t],\n\ttext: [\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() === b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() !== b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"beginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) === 0;\n\t\t}},\n\t\t{ id:\"notBeginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) !== 0;\n\t\t}},\n\t\t{ id:\"endsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) !== -1;\n\t\t}},\n\t\t{ id:\"notEndsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) === -1;\n\t\t}}\n\t],\n\tdate: [\n\t\t{ id:\"greater\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a > b;\n\t\t}},\n\t\t{ id:\"less\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a < b;\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a >= b;\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a <= b;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a == b;\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn !isDate(a) || a != b;\n\t\t}},\n\t\t{ id:\"between\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]\n};","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {setSpanCss} from \"./spans\";\nimport {conditions} from \"../helpers/conditional\";\nimport {getType} from \"./types\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.conditions = {\n\t\t_empty:true,\n\t\t_pull: {},\n\t\thandlers: createRules(),\n\t\tadd: function(rId, cId, cond, val, style){\n\t\t\tadd.apply(this, [view, rId, cId, cond, val, style]);\n\t\t},\n\t\tupdate: function(r, c, data){\n\t\t\tupdate.apply(this, [view, r, c, data]);\n\t\t},\n\t\tremove,\n\t\tget,\n\t\tparse,\n\t\tserialize,\n\t\tclear\n\t};\n\n\tview.attachEvent(\"onConditionSet\", (data) => _setCondition(view, data));\n\n\tview.attachEvent(\"onUndo\", (type_action, row, column, value) => {\n\t\tif(type_action == \"condition\")\n\t\t\t_undoCondition(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\n\tview.attachEvent(\"onReset\", () => view.conditions.clear() );\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\treset(view);\n}\n\nfunction createRules(){\n\tconst rules = webix.copy(conditions);\n\trules.number = rules.number.concat([\n\t\t{ id:\"between\", handler: function(a, b){\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", handler: function(a, b){\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]);\n\treturn rules;\n}\n\nfunction getCellValue(view, value){\n\tif(isNaN(value*1)){\n\t\tif (value.charAt(0) == \"=\" && value.length > 1){\n\t\t\tvalue = view._mData.getStore().exec(value.substring(1));\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t}\n\t}\n\telse {\n\t\tvalue = value*1;\n\t}\n\treturn value;\n}\n\nfunction reset(view){\n\tview.conditions.clear();\n}\n\nfunction _setCondition(view, data){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell((cell) => {\n\t\t\tconst collection = view.conditions.get(cell.row, cell.column);\n\t\t\tif(collection)\n\t\t\t\tfor (let i = 0; i < collection.length; i++)\n\t\t\t\t\tsetSpanCss(view, cell.row, cell.column, collection[i][2], false);\n\t\t\t_changeCondition(\"update\", cell.row, cell.column, (collection||null), data, view);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _undoCondition(view, row, column, value){\n\tif(view.conditions.get(row, column))\n\t\tview.conditions.remove(row, column);\n\tif(value)\n\t\tview.conditions.update(row, column, value);\n}\n\nfunction _serialize(view, obj){\n\tobj.conditions = view.conditions.serialize();\n}\n\nfunction _parse(view, obj){\n\tview.conditions.parse(obj.conditions);\n}\n\nexport function getConditionCss(view, row, column, rendered){\n\tlet css = \"\";\n\n\tif (!view.conditions._empty){\n\t\tconst collection = view.conditions.get(row, column);\n\t\tif(collection){\n\t\t\tconst span = view.$$(\"cells\").getSpan(row, column);\n\t\t\tlet value = view.getCellValue(row,column,false);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tvalue = \"\";\n\n\t\t\tlet type = getType(view, row, column);\n\t\t\tif(!type || type == \"string\")\n\t\t\t\ttype = \"text\";\n\n\t\t\tfor (let i = collection.length - 1; i >= 0; i--){\n\t\t\t\tlet currentValue = value;\n\t\t\t\tconst rule = collection[i][0];\n\t\t\t\tconst handlers = view.conditions.handlers;\n\t\t\t\tlet handler;\n\n\t\t\t\tlet checkOrder = [\"text\", type, \"number\", \"date\"];\n\t\t\t\tcheckOrder = checkOrder.filter((v, i) => checkOrder.indexOf(v) == i);\n\n\t\t\t\tfor(let k = 0; k < checkOrder.length; k++){\n\t\t\t\t\tconst checkType = checkOrder[k];\n\n\t\t\t\t\thandler = arr.find(handlers[checkType], obj => obj.id == rule);\n\t\t\t\t\tif(handler){\n\t\t\t\t\t\thandler = handler.handler;\n\t\t\t\t\t\tif(checkType == \"text\" && rule != \"equal\" && rule != \"notEqual\")\n\t\t\t\t\t\t\tcurrentValue = rendered;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet compare = collection[i][1];\n\t\t\t\tif(webix.isArray(compare))\n\t\t\t\t\tcompare = {\n\t\t\t\t\t\tstart: getCellValue(view, compare[0]),\n\t\t\t\t\t\tend: getCellValue(view, compare[1])\n\t\t\t\t\t};\n\t\t\t\telse\n\t\t\t\t\tcompare = getCellValue(view, compare);\n\n\t\t\t\tif(!css && handler && handler(currentValue, compare)){\n\t\t\t\t\tcss = collection[i][2];\n\t\t\t\t\tif(!span)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], false);\n\t\t\t}\n\t\t}\n\t}\n\treturn css;\n}\n\n\nfunction addEmptyCollection(pull, row, column, state){\n\tstate._empty = false;\n\tif(!pull[row])\n\t\tpull[row] = {};\n\tif(!pull[row][column])\n\t\tpull[row][column] = [];\n\treturn pull[row][column];\n}\n\n\nfunction parse(data){\n\t//backward compatibility\n\tconst oldConditions = {\n\t\t\">\": \"greater\",\n\t\t\"<\": \"less\",\n\t\t\"=\": \"equal\",\n\t\t\"!=\": \"notEqual\",\n\t\t\"<>\": \"between\"\n\t};\n\n\tthis._empty = true;\n\tif (!data) return;\n\n\tlet i = data.length;\n\twhile(i--){\n\t\tconst c = data[i];\n\t\tconst collection = addEmptyCollection(this._pull,c[0],c[1],this);\n\t\tc[2] = oldConditions[ c[2] ] || c[2];\n\t\tcollection.push([c[2],c[3],c[4]]);\n\t}\n}\n\nfunction clear(){\n\tthis._pull = {};\n}\n\nfunction update(view, row, column, newData){\n\tvar collection = this.get(row, column);\n\tif(!collection)\n\t\taddEmptyCollection(this._pull, row, column, this);\n\n\tnewData.map(item => _normalizeValue(view, item) );\n\tthis._pull[row][column] = newData;\n}\n\nfunction get(rowId, columnId){\n\tif(!rowId)\n\t\treturn this._pull;\n\tif(!columnId)\n\t\treturn this._pull[rowId];\n\treturn this._pull[rowId]?this._pull[rowId][columnId]:null;\n}\n\nfunction add(view, rowId, columnId, condition, value, style){\n\tconst collection = addEmptyCollection(this._pull, rowId, columnId, this);\n\tcollection.push( _normalizeValue(view, [condition, value, style]) );\n}\n\nfunction remove(rowId, columnId){\n\tvar collection = this.get(rowId, columnId);\n\tif(collection)\n\t\tdelete this._pull[rowId][columnId];\n}\n\nfunction serialize(){\n\tvar column, condition, i, row,\n\t\tdata = [];\n\n\tfor( row in this._pull)\n\t\tfor( column in this._pull[row])\n\t\t\tfor(i=0; i < this._pull[row][column].length; i++){\n\t\t\t\tcondition = this._pull[row][column][i];\n\t\t\t\tdata.push([row,column, condition[0],condition[1],condition[2]]);\n\t\t\t}\n\n\treturn data;\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet conditions = data.conditions,\n\t\ti = conditions.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = conditions[i];\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tconditions.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tconditions[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tconditions.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tconditions[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function clearConditionalFormats(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tvar condition = view.conditions.get(cell.row, cell.column);\n\t\t\tif(condition)\n\t\t\t\t_changeCondition(\"remove\", cell.row, cell.column, condition, null, view);\t\t\t\t\n\t\t});\n\t\tview.refresh();\n\t});\n}\n\nexport function pasteCondition(view, extra, row, col, cutted){\n\tvar condition = extra.condition;\n\tvar collection = view.conditions.get(row,col);\n\t_changeCondition(\"update\", row, col, (collection||null), condition, view);\n\tif(cutted === 1)\n\t\t_changeCondition(\"remove\", extra.row, extra.col, condition, null, view);\n}\n\nexport function _changeCondition(name, row, column, oldCondition, newCondition, view){\n\tif (view.callEvent(\"onBeforeConditionSet\", [row, column, oldCondition, newCondition])){\n\t\tview.conditions[name].apply(view.conditions, [row, column, newCondition]);\n\t\tview.callEvent(\"onAfterConditionSet\", [row, column, oldCondition, newCondition]);\n\t}\n}\n\nfunction _normalizeValue(view, condition){\n\tconst val = condition[1];\n\tif(val[0] == \"=\")\n\t\tcondition[1] = view._mData.getStore().parse(val).source; //fixes formula\n\treturn condition;\n}","import * as cop from \"./operations/column_operations\";\nimport {getConditionCss} from \"./operations/conditional_formats\";\nimport * as nms from \"./helpers/column_names\";\nimport * as fmt from \"./operations/formats\";\n\nexport function init(view, extra){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar datatable = {\n\t\tview:\"datatable\", id:\"cells\", css:\"webix_ssheet_table webix_data_border wss_\"+view.$index,\n\t\theaderRowHeight: webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20,\n\t\tspans: true,\n\t\tleftSplit: 1,\n\t\tareaselect:true,\n\t\tminColumnWidth:38,\n\t\teditable:true,\n\t\teditaction:(extra.liveEditor ? \"custom\" : \"dblclick\"),\n\t\tminRowHeight:1,\n\t\tnavigation:true\n\t};\n\n\tif (extra)\n\t\tdatatable = webix.extend(datatable, extra, true);\n\n\treturn datatable;\n}\n\nfunction ready(view){\n\tvar grid = view._table;\n\n\tvar showCommentHandler = webix.event(document.body, \"pointermove\", function(){\n\t\tvar thread;\n\t\treturn function(e) {\n\t\t\tif (e.pointerType !== \"mouse\") return;\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(function(e){\n\t\t\t\tif(view.comments._activeComment.editStatus)\n\t\t\t\t\treturn;\n\n\t\t\t\tvar cell = grid.locate(e);\n\t\t\t\tvar visible = view.comments.commentsView && view.comments.commentsView.isVisible();\n\n\t\t\t\tif(cell && view.comments.get(cell.row, cell.column)){\n\t\t\t\t\tvar activeCell = view.comments._activeComment.cell;\n\t\t\t\t\tif((activeCell && (activeCell.row != cell.row || activeCell.column != cell.column)) || !visible)\n\t\t\t\t\t\tview.callEvent(\"onCommand\",[{id: \"add-comment\", cell, viewonly: true }]);\n\t\t\t\t}\n\t\t\t\telse if(visible && !view.comments.commentsView.$view.contains(e.target))\n\t\t\t\t\tview.callEvent(\"onCommentHide\", []);\n\t\t\t}, true, [e], 250);\n\t\t};\n\t}());\n\n\t//in grid math\n\tif (view.config.math){\n\t\tgrid.config.editMath = true;\n\t}\n\n\t//saving value after edit\n\tgrid.attachEvent(\"onBeforeEditStop\", (st, ed) => {\n\t\tgrid.$anyKey = false;\n\t\t//ignore empty cells\n\t\tif (st.old === webix.undefined && st.value === \"\") return;\n\n\t\tif (st.value != st.old){\n\t\t\tview.setCellValue(ed.row, ed.column, st.value);\n\t\t\tgrid.refresh();\n\t\t}\n\t\tst.value = st.old;\n\t});\n\n\tgrid.attachEvent(\"onEnter\", function(ev){\n\t\tif (grid.getEditor()){\n\t\t\twebix.delay(function(){\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t\twebix.html.preventEvent(ev);\n\t});\n\n\t//prevent editing of locked cells\n\tview.attachEvent(\"onBeforeEditStart\", (row, column) => !view.isCellLocked(row, column));\n\tgrid.attachEvent(\"onAfterEditStart\", ({row, column}) => {\n\t\tlet v = view.getCellValue(row, column);\n\n\t\tif(grid.$anyKey){\n\t\t\tgrid.$anyKey = false;\n\t\t\tv = \"\";\n\t\t}\n\n\t\tgrid.getEditor().setValue(v);\n\t});\n\tgrid.attachEvent(\"onBeforeEditStart\", (editor) => \n\t\tview.callEvent(\"onBeforeEditStart\", [editor.row, editor.column]) );\n\n\t//column drag event checking\n\tlet dragStartColumn;\n\tlet dragEndColumn;\n\n\t//column and row selection\n\tgrid.attachEvent(\"onBeforeSelect\", (id) => id.column != \"rowId\" );\n\tgrid.attachEvent(\"onBeforeBlockSelect\", (start, end, finalStep) => {\n\t\tcop.highlightColRow(\n\t\t\tfinalStep ? start : webix.copy(start),\n\t\t\tfinalStep ? end : webix.copy(end),\n\t\t\tview\n\t\t);\n\t});\n\n\tfunction highlightHeaders(){\n\t\tlet ids = grid.getSelectedId(true);\n\t\tif(ids.length){\n\t\t\tlet start = ids[0];\n\t\t\tlet end = ids[ids.length-1]?ids[ids.length-1]:ids[0];\n\t\t\tcop.highlightColRow(start, end, view);\n\t\t}\n\t\telse {\n\t\t\tlet data = {row:0, column:0};\n\t\t\tcop.highlightColRow(data, data, view);\n\t\t}\n\t}\n\n\tgrid.attachEvent(\"onSelectChange\", () => highlightHeaders());\n\tgrid.attachEvent(\"onAfterColumnShow\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\tgrid.attachEvent(\"onColumnResize\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousedown\", e => {\n\t\tconst resizeColumn = grid.config.resizeColumn;\n\t\tconst col = grid.locate(e);\n\n\t\tif(col && col.cind){\n\t\t\tif(resizeColumn){\n\t\t\t\tconst dx = grid.getColumnConfig(col.column).width;\n\t\t\t\tconst pos = webix.html.posRelative(e);\n\t\t\t\tif(pos.x < resizeColumn.size || dx-pos.x < resizeColumn.size+1)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tdragStartColumn = col.cind;\n\t\t}\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousemove\", e => {\n\t\tif(dragStartColumn){\n\t\t\tconst col = grid.locate(e);\n\n\t\t\tif(col){\n\t\t\t\tdragEndColumn = col.cind;\n\t\t\t\tcop.highlightColRow(\n\t\t\t\t\t{column: grid.columnId(dragStartColumn)},\n\t\t\t\t\t{column: grid.columnId(dragEndColumn||1)},\n\t\t\t\t\tview\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst selectColumnHandler = webix.event(document.body, \"mouseup\", () => {\n\t\tif(dragStartColumn){\n\t\t\tif(dragEndColumn != null){\n\t\t\t\tcop.selectColumn(\n\t\t\t\t\tgrid.columnId(dragStartColumn),\n\t\t\t\t\tview,\n\t\t\t\t\tgrid.columnId(dragEndColumn||1)\n\t\t\t\t);\n\t\t\t\tdragEndColumn = null;\n\t\t\t}\n\t\t\tdragStartColumn = null;\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onItemDblClick\", (id) => {\n\t\tif (id.column === \"rowId\")\n\t\t\tcop.adjustRow(id.row, view);\n\t});\n\n\tlet lastHeaderClick = 0;\n\tgrid.attachEvent(\"onHeaderClick\", (id, e) => {\n\t\tif(id.column == \"rowId\"){\n\t\t\tcop.selectAll(view);\n\t\t\treturn;\n\t\t}\n\t\tlet headerClick = new Date();\n\t\tlet dblClick = (headerClick - lastHeaderClick <= 300);\n\n\t\tif (dblClick) {\n\t\t\tcop.adjustColumn(id.column, view);\n\t\t} else {\n\t\t\tlastHeaderClick = headerClick;\n\t\t\tif (e.shiftKey) {\n\t\t\t\tcop.selectColumns(id.column, view);\n\t\t\t} else {\n\t\t\t\tcop.selectColumn(id.column, view);\n\t\t\t}\n\t\t}\n\t});\n\n\t//select rows by shift click\n\tvar lastClickedRow = null;\n\tgrid.attachEvent(\"onItemClick\", (cell, e) => {\n\t\tif (cell.column === \"rowId\") {\n\t\t\tif (!e.shiftKey)\n\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\telse {\n\t\t\t\tif (!lastClickedRow)\n\t\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\t\telse\n\t\t\t\t\tcop.selectRow(lastClickedRow, view, cell.row);\n\t\t\t}\n\t\t\tlastClickedRow = cell.row;\n\t\t}\n\t});\n\n\t//reset API\n\tview.attachEvent(\"onReset\", () => reset(view));\n\n\tview.attachEvent(\"onBeforeSheetShow\", () => grid.editStop());\n\n\tgrid.attachEvent(\"onBlur\", function(){\n\t\t//after focus moved out, check and if it is somewhere\n\t\t//on the spreadsheet controls them move focus back to datatable\n\t\twebix.delay(function(){\n\t\t\tvar target = document.activeElement;\n\n\t\t\tif (target && target.tagName == \"INPUT\") return;\n\n\t\t\tvar focus = webix.UIManager.getFocus();\n\t\t\tvar need_focus = focus &&\n\t\t\t\tfocus != grid &&\n\t\t\t\tfocus.getTopParentView &&\n\t\t\t\tfocus.getTopParentView() === view;\n\n\t\t\tif (need_focus)\n\t\t\t\twebix.UIManager.setFocus(grid);\n\n\t\t}, this, [], 100);\n\t});\n\n\tsetDefaultCss(view);\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\twebix.eventRemove(showCommentHandler);\n\t\twebix.eventRemove(selectColumnHandler);\n\t});\n}\n\nexport function cell_template(view, obj, common, _v, column, valueOnly){\n\tconst col = column.id;\n\tconst row = obj.id;\n\n\tif (!view._mPage) return \"\";\n\tconst cell = view._mPage.getCell(row-1, col-1);\n\n\tlet value = cell ? cell.value : \"\";\n\tconst format = cell ? cell.format : \"\";\n\n\tconst math = view.getCellValue(row, col);\n\tif(math != value){\n\t\tconst locale = webix.i18n.spreadsheet.table;\n\t\tif(value == \"#REF!\")\n\t\t\tvalue = locale[\"math-ref-error\"];\n\t\telse if(value == \"#ERROR\")\n\t\t\tvalue = locale[\"math-error\"];\n\t}\n\n\tlet css = \"\";\n\tconst text = (!value && value !== 0) || isNaN(value);\n\tconst invalidDate = fmt.checkFormat(format, \"date\") && fmt.isDateInvalid(value);\n\n\tlet extra = \"\";\n\tif (!valueOnly){\n\t\textra += view.comments.get(row, col) ? \"<div class='ssheet_commented_sign'></div>\" : \"\";\n\t\textra += view.getCellFilter(row, col) ? \"<div class='ssheet_filter_sign'></div>\" : \"\";\n\t}\n\n\t//text can be formatted only in case of string number format\n\tif(!invalidDate && (!text || fmt.checkFormat(format, \"string\"))){\n\t\tif (format){\n\t\t\tconst cell = { css:\"\" };\n\t\t\tconst helper = fmt.getFormat(format);\n\t\t\tif (helper){\n\t\t\t\tlet newValue = helper(value, cell);\n\n\t\t\t\tif(newValue != webix.i18n.spreadsheet.table[\"format-error\"]){\n\t\t\t\t\tif (cell.css)\n\t\t\t\t\t\tcss = `class=\"${cell.css}\"`;\n\t\t\t\t\tvalue = newValue;\n\t\t\t\t}\n\t\t\t\telse if(!text)\n\t\t\t\t\tvalue = value * 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue = value * 1;\n\t}\n\n\t//print only cell values (td with position:relative ignores borders while printing)\n\tif(view._print && !(value || value === 0))\n\t\treturn \"\";\n\n\tif(webix.isUndefined(value) || value === null)\n\t\tvalue = \"\";\n\n\treturn `<div ${css}>${value}</div>${view._print ? \"\" : extra}`;\n}\n\nexport function reset(view){\n\tconst grid = view.$$(\"cells\");\n\tgrid.clearAll();\n\n\tconst columns = view.config.columnCount;\n\tconst rows = view.config.rowCount;\n\n\tconst cols = [{\n\t\tid:\"rowId\", header:\"\", width:40,\n\t\tcss:\"sheet_column_0\",\n\t\ttemplate:(el) => {\n\t\t\treturn el.id;\n\t\t}\n\t}];\n\n\tfor (let i=1; i<=columns; i++){\n\t\tcols.push({\n\t\t\tid:i,\n\t\t\teditor:\"text\",\n\t\t\theader:{\n\t\t\t\ttext: nms.encode[i]\n\t\t\t},\n\t\t\ttemplate:function(obj, common, value, column){\n\t\t\t\treturn cell_template(view, obj, common, value, column);\n\t\t\t},\n\t\t\tcssFormat:function(value, obj, row, column){\n\t\t\t\tconst rendered = getRenderedValue(view, row, column);\n\t\t\t\tconst cell = view._mPage.getCell(row-1, column-1);\n\t\t\t\tconst style = cell ? cell.style : \"\";\n\n\t\t\t\tconst conditional = getConditionCss(view, row, column, rendered);\n\n\t\t\t\treturn `${style} ${conditional}`;\n\t\t\t}\n\t\t});\n\t\tview.callEvent(\"onColumnInit\",[cols[i]]);\n\t}\n\tgrid.refreshColumns(cols);\n\n\tconst data = [];\n\tfor (let i=1; i<=rows; i++)\n\t\tdata.push({ id:i });\n\n\tgrid.parse(data);\n}\n\nexport function getRenderedValue(view, row, col){\n\tconst htmlFilter = /<[^>]*>/gi;\n\treturn cell_template(view, {id: row}, null, null, {id: col}, true).replace(htmlFilter, \"\");\n}\n\n// nowrap by default\nfunction setDefaultCss(view){\n\twebix.html.addStyle(\"#\"+view._table.$view.id+\".webix_dtable .webix_cell { white-space:nowrap;}\");\n}\n","import group from \"./operations/undo_group\";\nimport {selectAll} from \"./operations/column_operations\";\nimport {styleFormats} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tconst grid = view.$$(\"cells\");\n\tconst key = webix.env.isMac ? \"command\" : \"ctrl\";\n\n\twebix.UIManager.addHotKey(key+\"-a\", () => { if(!grid.getEditor()) selectAll(view); }, grid);\n\n\tif(!view.config.readonly){\n\t\twebix.UIManager.addHotKey(\"any\", (view, ev) => {\n\t\t\tconst code = ev.which || ev.keyCode;\n\t\t\tconst f2 = code == 113;\n\n\t\t\t//ignore shift key, f1, f3 - f12 (f2 - edit)\n\t\t\tif (code == 16 || (code >= 112 && code <= 123 && !f2)) return;\n\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && f2))\n\t\t\t\t\tgrid.$anyKey = true;\n\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"enter\", (view) => {\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && !grid.callEvent(\"onBeforeLiveEditor\", [sel[0]])))\n\t\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"backspace\", () => del(view), grid);\n\t\twebix.UIManager.addHotKey(\"delete\", () => del(view), grid);\n\n\t\tvar redo = webix.env.isMac ? \"command-shift-z\" : \"ctrl-y\";\n\t\twebix.UIManager.addHotKey(redo, () => view.redo(), grid);\n\t\twebix.UIManager.addHotKey(key+\"-z\", () => view.undo(), grid);\n\n\t\twebix.UIManager.addHotKey(key+\"-b\", () => styleHotKey(view, \"font-weight\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-i\", () => styleHotKey(view, \"font-style\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-u\", (v, e) => ctrlU(view, e), grid);\n\t\twebix.UIManager.addHotKey(key+\"-p\", (v, e) => ctrlP(view, e), grid);\n\t}\n}\n\nfunction del(view) {\n\tif(!view.$$(\"cells\").getEditor())\n\t\tgroup.set(function(){\n\t\t\tview.eachSelectedCell((cell) => view.setCellValue(cell.row,cell.column, \"\"));\n\t\t\tview.refresh();\n\t\t});\n}\n\nfunction ctrlU(view, e) {\n\tstyleHotKey(view, \"text-decoration\");\n\treturn webix.html.preventEvent(e);\n}\nfunction ctrlP(view, e) {\n\tview.callEvent(\"onCommand\",[{id: \"print\"}]);\n\treturn webix.html.preventEvent(e);\n}\n\nfunction styleHotKey(view, attr) { \n\tvar cell = view.getSelectedId();\n\tif(cell){\n\t\tvar style = view.getStyle(cell.row, cell.column);\n\n\t\tvar elementOn = styleFormats[attr];\n\t\tvar elementOff = \"normal\";\n\n\t\tvar state = (style && style.props[attr] === elementOn)? elementOff : elementOn;\n\t\tview.callEvent(\"onStyleSet\", [attr, state]);\n\t}\n}","import {methods} from \"@xbs/muon\";\n\nlet methodsName = [];\nfor(let name in methods)\n\tmethodsName.push(name);\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tview:\"toolbar\",\n\t\tcss:\"webix_ssheet_toolbar\",\n\t\telements:[\n\t\t\t{\n\t\t\t\tview:\"label\",\n\t\t\t\tlabel:webix.i18n.spreadsheet.liveEditor[\"edit\"],\n\t\t\t\twidth:60\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"live-editor\",\n\t\t\t\tdisabled:true,\n\t\t\t\tid:\"liveEditor\",\n\t\t\t\tsuggestData: methodsName\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst editor = view.$$(\"liveEditor\");\n\n\t//block native editor, and move focus to the custom input\n\t//edit by key press\n\tview._table.attachEvent(\"onBeforeEditStart\", function(cell){\n\t\tconst mode = view._table.$anyKey;\n\t\tview._table.$anyKey = false;\n\n\t\treturn startEdit(this, cell, mode);\n\t});\n\t//edit by enter key\n\tview._table.attachEvent(\"onBeforeLiveEditor\", function(cell){\n\t\treturn startEdit(this, cell, false);\n\t});\n\t//edit by dbl-click\n\tview._table.attachEvent(\"onItemDblClick\", function(cell){\n\t\tif(view.getCellEditor(cell.row, cell.column))\n\t\t\tthis.edit(cell);\n\t\telse\n\t\t\tstartEdit(this, cell, false);\n\t});\n\n\tview._table.attachEvent(\"onAfterScroll\", function(){\n\t\tif(editor.$view.contains(document.activeElement))\n\t\t\teditor.paintValue();\n\t});\n\n\tview.attachEvent(\"onCellChange\", (r,c,v) => {\n\t\tvar cell = editor.config.activeCell;\n\t\tif (cell && cell.row == r && cell.column == c)\n\t\t\teditor.setValue(v);\n\t});\n\n\tview.attachEvent(\"onAfterSelect\", (data) => {\n\t\tif (!view.$handleSelection){\n\t\t\tlet cell = data[0];\n\t\t\tfillEditor(cell);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onChange\", (mode) => {\n\t\tif (mode == \"update\" && editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif(cell && editor.getValue() != view.getCellValue(cell.row, cell.column)){\n\t\t\t\tdelete editor._update_range;\n\t\t\t\teditor.showActiveSheet();\n\t\t\t\teditor.updateCellValue();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeSheetShow\", (name)=> {\n\t\tif(view._rangeDialog)\n\t\t\treturn;\n\t\tconst cell = editor.config.activeCell;\n\t\tif(cell){\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\t\t\tif(view.getCellValue(cell.row, cell.column) != val){\n\t\t\t\tif(!editor._activeMath)\n\t\t\t\t\teditor._activeMath = view.getActiveSheet();\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tif(name == editor._activeMath){\n\t\t\t\t\t\tview.$handleSelection = null;\n\t\t\t\t\t\tconst cell = editor.config.activeCell;\n\t\t\t\t\t\tview._table.select(cell.row, cell.column);\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.setValue(val);\n\t\t\t\t\t//update highlight\n\t\t\t\t\teditor.refresh();\n\n\t\t\t\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\t\t\t\teditor.paintValue();\n\n\t\t\t\t\tview.$handleSelection = function(a,b,st,en){ return pasteRange(st, en, a); };\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tclearEditor();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onReset\", () => {\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = null;\n\t});\n\tview.$$(\"cells\").attachEvent(\"onFocus\", ()=>{\n\t\t//ignore table clipboard logic\n\t\tif(editor._activeMath){\n\t\t\twebix.delay(()=>editor.focus());\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterLoad\", () => clearEditor());\n\n\tview.attachEvent(\"onAction\", function(name, options){\n\t\tconst cell = editor.config.activeCell;\n\t\tconst isActiveCell = cell && cell.row == options.row && cell.column == options.column;\n\t\tif(isActiveCell && (name == \"lock\" || name == \"dropdown\"))\n\t\t\tdisableEditor(options.row, options.column);\n\t});\n\n\tview.attachEvent(\"onFormatChange\", (r, c) => updateEditor(r, c));\n\tview.attachEvent(\"onCellChange\", (r, c) => updateEditor(r, c));\n\n\tfunction updateEditor(row, column){\n\t\tconst activeCell = editor.config.activeCell;\n\t\tif(activeCell && activeCell.row == row && activeCell.column == column)\n\t\t\tfillEditor({row, column});\n\t}\n\n\tfunction startEdit(table, cell, clear){\n\t\t//do not interfere with custom editors\n\t\tif (!view.getCellEditor(cell.row, cell.column) && fillEditor(cell, clear)){\n\t\t\teditor.focus();\n\n\t\t\tif(!clear){\n\t\t\t\teditor.paintValue();\n\n\t\t\t\tconst input = editor.getInputNode();\n\t\t\t\tconst symbols = input.value.length;\n\t\t\t\tinput.setSelectionRange(symbols, symbols);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction disableEditor(row,column){\n\t\tconst disabled = view.getCellEditor(row, column) || view.isCellLocked(row, column);\n\t\tif(disabled)\n\t\t\teditor.disable();\n\t\telse\n\t\t\teditor.enable();\n\t\treturn disabled;\n\t}\n\n\tfunction fillEditor(cell, clear){\n\t\tconst disabled = disableEditor(cell.row, cell.column);\n\t\teditor.config.activeCell = cell;\n\t\teditor.setValue( clear ? \"\" : editor.getCellValue(cell.row, cell.column) );\n\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = disabled ? null : function(a,b,st,en){ return pasteRange(st, en, a); };\n\n\t\treturn !disabled;\n\t}\n\n\tfunction pasteRange(st, en, cell){\n\t\tconst updateRange = editor._update_range;\n\t\tlet cursor = editor.getInputNode().selectionStart;\n\n\t\tlet sheet = \"\";\n\t\tif(editor._activeMath){\n\t\t\tconst activeSheet = view.getActiveSheet();\n\t\t\tif(editor._activeMath != activeSheet)\n\t\t\t\tsheet = editor.prepareSheet(activeSheet);\n\t\t}\n\n\t\tlet range;\n\t\tif(st == en){\n\t\t\tconst colon = editor.getValue()[ (updateRange ? updateRange.pos : cursor)-1 ] == \":\";\n\t\t\trange = colon ? st : sheet+st;\n\t\t}\n\t\telse\n\t\t\trange = `${sheet+st}:${en}`;\n\n\t\tif(updateRange && updateRange.pos == cursor - updateRange.len){\n\t\t\teditor.setRange(range, true);\n\t\t\tcursor = editor._update_range.pos + range.length;\n\t\t}\n\t\telse if(editor.expectOperator()){\n\t\t\teditor.setRange(range);\n\t\t\tcursor += range.length;\n\t\t}\n\t\telse\n\t\t\treturn endEdit(cell);\n\n\t\teditor.focus();\n\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\teditor.paintValue();\n\n\t\treturn false;\n\t}\n\n\tfunction endEdit(st){\n\t\tif (editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\teditor.showActiveSheet();\n\t\t\teditor.updateCellValue(cell);\n\t\t\teditor.setValue(st ? view.getCellValue(st.row, st.column) : \"\");\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction clearEditor(){\n\t\teditor.define({activeCell:null});\n\t\teditor.setValue(\"\");\n\t\teditor.disable();\n\t}\n}\n","export function init(view){\n\t//parsing initial data\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\n\t// undo\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif(type == \"value\")\n\t\t\t_undoValue(view, row, column, value);\n\t});\n}\n\nfunction _serialize(view, obj, config){\n\tvar math = !config || config.math!==false;\n\n\tvar grid = view.$$(\"cells\");\n\tvar state = grid.getState();\n\tvar columns = state.ids.concat(state.hidden);\n\n\t// remove \"rowId\" column\n\tcolumns.splice(columns.indexOf(\"rowId\"), 1);\n\n\tobj.data = getSheetData(view, math);\n\n\tobj.table = {\n\t\tfrozenColumns : (view._frozenColumns || 0),\n\t\tfrozenRows : (view._frozenRows || 0)\n\t};\n}\n\nfunction _parse(view, obj){\n\tconst tconfig = obj.table || { frozenColumns : 0, frozenRows : 0 };\n\tview._frozenColumns = view._frozenRows = 0;\n\tif (tconfig){\n\t\tif (!webix.isUndefined(tconfig.frozenColumns))\n\t\t\tview.freezeColumns(tconfig.frozenColumns);\n\t\tif (!webix.isUndefined(tconfig.frozenRows))\n\t\t\tview.freezeRows(tconfig.frozenRows);\n\t}\n\n\tif(obj.sizes)\n\t\tview.$$(\"cells\").define(\"fixedRowHeight\", false);\n}\n\nfunction _undoValue(view, row, column, value){\n\tview.setCellValue(row, column, value);\n}\n\nexport function getSheetData(view, math, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\treturn page.serialize(math)\n\t\t.map(arr =>{\n\t\t\tlet value = arr[2].value;\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t\treturn [ ++arr[0], ++arr[1], value, arr[2].style||\"\", arr[2].type];\n\t\t})\n\t\t.filter(arr => {\n\t\t\treturn arr[2] || arr[2] === 0 || arr[3];\n\t\t});\n}","import * as arr from \"./helpers/array\";\nimport {getSheetData} from \"./operations/data\";\nimport {DataStore} from \"@xbs/muon\";\nimport {loadCell} from \"./operations/types\";\nimport {removeUnusedStyles, styleFromText, styleToText} from \"./operations/styles\";\nimport {getFormatFromData, checkFormat} from \"./operations/formats\";\nimport {updateMaxColumn, encode, escapeSheet} from \"./helpers/column_names\";\n\nconst options = [\n\t\"rename-sheet\",\n\t\"remove-sheet\"\n];\n\nconst actionMap = {\n\t\"remove-sheet\": function(view){\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"sheet-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tremove(view, view._activeSheet);\n\t\t});\n\t},\n\t\"rename-sheet\": function(view){\n\t\tedit(view, view._activeSheet);\n\t},\n\t\"new-sheet\": function(view){\n\t\tadd(view);\n\t},\n\t\"copy-sheet\": function(view){\n\t\tcopy(view);\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n}\n\nexport function defaultBottom(view){\n\tvar readonly = view.config.readonly;\n\tvar tabWidth = view.config.sheetTabWidth;\n\tvar toolbar =  {\n\t\tview: \"toolbar\",\n\t\tid: \"bottom-toolbar\",\n\t\tcss: \"webix_ssheet_bottom_toolbar webix_layout_toolbar\",\n\t\tpaddingY: 0,\n\t\theight: 34,\n\t\telements:[\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"add-sheet\",\n\t\t\t\tlabel: \"<span class='webix_ssheet_icon_add_sheet'></span>\",\n\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"add-sheet\"]||\"\", hidden:readonly\n\t\t\t},\n\t\t\t{\n\t\t\t\tid:\"sheets\",\n\t\t\t\tview:\"sheets\",\n\t\t\t\tmaxWidth: 5 * tabWidth,\n\t\t\t\teditable:!readonly,\n\t\t\t\teditaction: \"dblclick\",\n\t\t\t\teditor:\"text\",\n\t\t\t\teditValue:\"value\",\n\t\t\t\ttype:{\n\t\t\t\t\twidth: tabWidth,\n\t\t\t\t\theight: 32,\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\treturn \"<div>\"+obj.value+\"</div>\"+\n\t\t\t\t\t\t\t(!readonly?\"<div class='webix_input_icon wxi-menu-down webix_ssheet_sheet_arrow'></div>\":\"\");\n\t\t\t\t\t},\n\t\t\t\t\t//remove skin selection css on dnd\n\t\t\t\t\tcss:\"ssheet_order_sheets\"\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\twebix_ssheet_sheet_arrow: function(e, id){\n\t\t\t\t\t\tinitSheetMenu(view, e, id);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonItemClick: function(id){\n\t\t\t\t\t\tif(id != view._activeSheet)\n\t\t\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"prev-sheet\", disabled:true, hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-left'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, -1);}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"next-sheet\", hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-right'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, 1);}\n\t\t\t}\n\t\t]\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"bottom-toolbar\", toolbar]);\n\n\treturn toolbar;\n}\n\nfunction scrollSheets(view, direction){\n\tvar sheets = view.$$(\"sheets\");\n\tsheets.scrollTo(sheets.getScrollState().x+(direction*view.config.sheetTabWidth), 0);\n}\n\nfunction menuInit(view){\n\tvar data = [];\n\tfor(var i=0; i < options.length;i++)\n\t\tdata.push({id: options[i], value:webix.i18n.spreadsheet.menus[options[i]]||options[i]});\n\n\tvar menu =  {\n\t\tview: \"ssheet-suggest\",\n\t\tdata: data\n\t};\n\tview.callEvent(\"onViewInit\", [\"sheet-menu\", menu]);\n\treturn menu;\n}\n\nexport function reset(view, obj){\n\tconst tabs = view.$$(\"sheets\");\n\tif (tabs){\n\t\ttabs.clearAll();\n\t\tconst set = [];\n\t\tobj.sheets.forEach(function(sheet){\n\t\t\tset.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\ttabs.parse(set);\n\t}\n}\n\nfunction ready(view){\n\tprepare(view);\n\n\tif(view.$$(\"add-sheet\"))\n\t\tview.$$(\"add-sheet\").attachEvent(\"onItemClick\", function(){\n\t\t\tadd(view);\n\t\t});\n\n\tview.attachEvent(\"onAfterSheetShow\", (name) => selectSheet(view,name));\n\n\tview.attachEvent(\"onCommand\", function(command){\n\t\tif(actionMap[command.id])\n\t\t\tactionMap[command.id](this);\n\t});\n\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\tchangePagerVisability(view);\n\t\t\tchangePagerStatus(view);\n\t\t});\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterRender\", webix.once(() => {\n\t\t\twebix.delay(()=> changePagerVisability(view));\n\t\t}));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterScroll\", () => changePagerStatus(view));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterDrop\", (context) => dataOrder(view,context.start,context.index));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterEditStop\", (state) => rename(view,state.old,state.value));\n\t}\n}\n\nfunction initSheetMenu(view, e, id){\n\tif(!view.$sheetMenu){\n\t\tview.$sheetMenu = webix.ui(menuInit(view));\n\t\tview._destroy_with_me.push(view.$sheetMenu);\n\t\tview.$sheetMenu.attachEvent(\"onItemClick\", (id)=> callAction(view,id));\n\t}\n\n\tif(view.$sheetMenu.getItem(\"remove-sheet\"))\n\t\tif(view.$$(\"sheets\").count() == 1)\n\t\t\tview.$sheetMenu.disableItem(\"remove-sheet\");\n\t\telse\n\t\t\tview.$sheetMenu.enableItem(\"remove-sheet\");\n\tif(view.callEvent(\"onBeforeSheetMenu\", [id])){\n\t\tview.$sheetMenu.show(e);\n\t}\n}\n\nfunction changePagerStatus(view){\n\tconst sheets = view.$$(\"sheets\");\n\tconst scrollPos = sheets.getScrollState().x;\n\n\tif(scrollPos == 0){\n\t\tview.$$(\"prev-sheet\").disable();\n\t}\n\telse{\n\t\tview.$$(\"prev-sheet\").enable();\n\t\tvar tabWidth = view.config.sheetTabWidth;\n\t\tif(scrollPos == (sheets.count()-(sheets.$width/tabWidth))*tabWidth){\n\t\t\tview.$$(\"next-sheet\").disable();\n\t\t\treturn;\n\t\t}\n\t}\n\tview.$$(\"next-sheet\").enable();\n}\n\nfunction changePagerVisability(view){\n\tvar toolbar = view.$$(\"bottom-toolbar\");\n\tvar sheets = view.$$(\"sheets\");\n\n\tif(sheets.count() <= (sheets.$width/view.config.sheetTabWidth))\n\t\ttoolbar.showBatch(\"pager\", false);\n\telse\n\t\ttoolbar.showBatch(\"pager\");\n}\n\nfunction dataOrder(view, name, num){\n\tfor (let id in view._sheets) {\n\t\tif (view._sheets[id].name == name) {\n\t\t\tconst item = view._sheets.splice(id, 1);\n\t\t\tview._sheets.splice(num, 0, item[0]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport function add(view, content){\n\tvar index, name, newIndex;\n\n\tindex = arr.findIndex(view._sheets, x => x.name == view._activeSheet);\n\tnewIndex = index>-1?index+1:view._sheets.length;\n\tname = getNewTitle(view);\n\tcontent = content || {data:[]};\n\tview._sheets.splice(newIndex, 0, {\n\t\tname: name,\n\t\tcontent: content\n\t});\n\n\tif(view.$$(\"sheets\"))\n\t\tview.$$(\"sheets\").add({id: name, value: name},newIndex);\n\n\tview._mData.addPage(name);\n\n\tparseToStore(view, name, content, view.config.prepareData);\n\n\tview.showSheet(name);\n\tview.callEvent(\"onSheetAdd\", [name]);\n\treturn name;\n}\n\nfunction getNewTitle(view){\n\tvar index = view._sheets.length+1;\n\twhile(getSheet(view, (webix.i18n.spreadsheet.labels.sheet+index)))\n\t\tindex++;\n\tvar name = webix.i18n.spreadsheet.labels.sheet+index;\n\treturn name;\n}\n\nfunction selectSheet(view,name){\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").select(name);\n\t\tview.$$(\"sheets\").showItem(name);\n\t}\n}\n\nexport function edit(view,name){\n\tview.$$(\"sheets\").edit(name);\n}\n\nexport function remove(view,name){\n\tvar index, newSheet;\n\tif(view._sheets.length >1){\n\t\tindex = arr.findIndex(view._sheets,x => x.name == name);\n\t\tview._sheets.splice(index,1);\n\t\tview._mData.removePage(name);\n\t\tif(!view._sheets[index])\n\t\t\tindex = 0;\n\t\tnewSheet = \tview._sheets[index];\n\t\tview._activeSheet = null;\n\t\tif(view.$$(\"sheets\")){\n\t\t\tview.$$(\"sheets\").remove(name);\n\t\t\tview.$$(\"sheets\").refresh();\n\t\t}\n\t\tview.showSheet(newSheet.name);\n\t\tview.callEvent(\"onSheetRemove\", [name]);\n\t}\n}\n\nexport function rename(view,name,newName){\n\tif (name == newName) return;\n\n\t//correct sheet name\n\tvar i = 1;\n\twhile (!newName || getSheet(view, newName)){\n\t\tnewName = webix.i18n.spreadsheet.labels.sheet + i;\n\t\ti++;\n\t}\n\tnewName = newName.replace(/[*?:[\\]\\\\/]/g,\"\").substring(0, 31);\n\n\tvar sheet = getSheet(view, name);\n\tvar sheets = view.$$(\"sheets\");\n\n\tsheet.name = newName;\n\tif(view._activeSheet == name)\n\t\tview._activeSheet = newName;\n\n\tif(sheets){\n\t\tlet item = sheets.getItem(name);\n\t\titem.value = newName;\n\t\tsheets.data.changeId(name,newName);\n\t\tsheets.refresh(newName);\n\t}\n\n\tview._mData.renamePage(name, newName);\n\tview.callEvent(\"onSheetRename\", [name, newName]);\n}\n\nexport function serialize(view, obj, config){\n\tgetSheet(view, view._activeSheet).content = obj;\n\n\tconst sheets = webix.copy(view._sheets);\n\n\tconst math = !config || config.math!==false;\n\tconst compactStyles = config && config.compactStyles;\n\n\tsheets.forEach(sheet => {\n\t\tif(sheet.name != view._activeSheet){\n\t\t\tsheet.content.data = getSheetData(view, math, sheet.name);\n\t\t\tif(compactStyles)\n\t\t\t\tsheet.content.styles = removeUnusedStyles(sheet.content);\n\t\t\tsheet.content.ranges = view.ranges.serialize(sheet.name);\n\t\t}\n\t});\n\n\treturn sheets;\n}\n\nfunction parseToStore(view, name, obj, prepareData){\n\tview.ranges.parse(obj.ranges, name);\n\n\twebix.extend(obj, {\n\t\tstyles: [],\n\t\tformats: [],\n\t\teditors: []\n\t});\n\n\tconst page = view._mData.getPage(name);\n\tconst data = obj.data.map(arr => {\n\t\tconst invalidValue = webix.isUndefined(arr[2]) || arr[2] === null;\n\n\t\tif(prepareData){\n\t\t\tif(invalidValue)\n\t\t\t\tarr[2] = \"\";\n\t\t\telse {\n\t\t\t\tconst linkRegex = /^=link\\(/i;\n\t\t\t\tif(typeof arr[2] == \"string\" && linkRegex.test(arr[2])){\n\t\t\t\t\t// LINK is deprecated\n\t\t\t\t\tarr[2] = arr[2].replace(linkRegex, \"=HYPERLINK(\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cell = loadCell(view, obj, arr);\n\t\t\t//cell value and type can be changed via types module\n\t\t\tarr[2] = cell.value;\n\t\t\tarr[3] = arr[3] || \"\";\n\t\t\tarr[4] = cell.type;\n\n\t\t\t_prepareCell(arr, obj);\n\t\t}\n\t\telse if(invalidValue)\n\t\t\tthrow `unsupported value in ${escapeSheet(name)}!${encode[arr[0]]}${arr[1]}`;\n\n\t\treturn [ arr[0]-1, arr[1]-1, {\n\t\t\tvalue: arr[2],\n\t\t\ttype: arr[4],\n\t\t\tstyle: arr[3],\n\t\t\t$format: checkFormat({ fmt: getFormatFromData(obj, arr) }, \"string\") ? 1 : 0\n\t\t}];\n\t});\n\n\tpage.parse(data, true);\n}\n\nfunction _prepareCell(cell, data){\n\tif(cell[4] == \"date\"){\n\t\tconst styleProperties = cell[3] ? arr.find(data.styles, style => style[0] == cell[3]) : null;\n\t\tconst styleObj = styleProperties ? styleFromText(styleProperties[1]) : {};\n\n\t\tconst isString = typeof cell[2] == \"string\";\n\n\t\tif(!styleProperties || !styleObj.format){\n\t\t\tlet formatName;\n\n\t\t\tif(isString && cell[2].toUpperCase().indexOf(\"=TIME(\") == 0){\n\t\t\t\tcell[3] = \"wss_load_time\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tformatName = cell[3]+\"_fmt\";\n\t\t\t\tdata.formats.push([formatName, webix.i18n.spreadsheet.formats.timeFormat]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tcell[3] = \"wss_load_date\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\n\n\t\t\tif(!arr.find(data.styles, style => style[0] == cell[3]))\n\t\t\t\tdata.styles.push([\n\t\t\t\t\tcell[3],\n\t\t\t\t\tstyleToText({props: webix.extend(styleObj, {format: formatName || \"date\"}, true) })\n\t\t\t\t]);\n\t\t}\n\n\t\tif(!(isString && cell[2][0] == \"=\") && !arr.find(data.editors, editor => editor[0] == cell[0] && editor[1] == cell[1]))\n\t\t\tdata.editors.push([cell[0], cell[1], {editor: \"excel_date\"}]);\n\t}\n}\n\nexport function load(view, obj, excel){\n\tview._loading_data = true;\n\tobj = webix.isArray(obj)?{sheets:obj}:obj;\n\tconst prepareData = view.config.prepareData || excel;\n\n\tif(!obj.sheets && view._activeSheet){\n\t\t//loading into active sheet\n\t\tconst name = view._activeSheet;\n\t\tgetSheet(view, name).content = obj;\n\t\tparseToStore(view, name, obj, prepareData);\n\t\trefresh(view, obj);\n\t} else {\n\t\t//creating new set of sheets\n\t\tprepare(view, obj, prepareData);\n\t}\n\tview._loading_data = false;\n}\n\nexport function prepare(view, obj, prepareData){\n\tif(!obj) obj = {data:[]}; \n\tif(!obj.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\n\tlet name;\n\tview._activeSheet = \"\";\n\tview._sheets = obj.sheets;\n\tview._mData = new DataStore();\n\n\t// first add all pages then parse data in them\n\tobj.sheets.forEach(sheet => {\n\t\tview._mData.addPage(sheet.name);\n\t});\n\n\tobj.sheets.forEach((sheet, index) => {\n\t\tconst page = view._mData.getPage(sheet.name);\n\t\tconst content = sheet.content;\n\t\tconst sheetName = sheet.name;\n\n\t\tparseToStore(view, sheetName, content, prepareData);\n\n\t\tif(index == 0){\n\t\t\tname = sheetName;\n\t\t\tview._mPage = page;\n\t\t}\n\t});\n\n\treset(view, obj);\n\tshow(view, name);\n}\n\nexport function newSheet(obj){\n\treturn {\n\t\tsheets:[{\n\t\t\tname: webix.i18n.spreadsheet.labels.sheet + 1,\n\t\t\tcontent: obj\n\t\t}]\n\t};\n}\n\nexport function show(view,name){\n\tif (name == view._activeSheet) return;\n\n\tif(view.callEvent(\"onBeforeSheetShow\", [name])){\n\t\tif (view._activeSheet)\n\t\t\tgetSheet(view, view._activeSheet).content = view.serialize();\n\n\t\tview._activeSheet = name;\n\t\tconst obj = getSheet(view, name).content;\n\n\t\tview._mPage = view._mData.getPage(name);\n\n\t\trefresh(view, obj);\n\n\t\tview.callEvent(\"onAfterSheetShow\", [name]);\n\t}\n}\n\nexport function getSheet(view, name){\n\treturn arr.find(view._sheets, x => x.name == name);\n}\n\nexport function eachSheet(view, callback){\n\tfor (var i=0; i<view._sheets.length; i++)\n\t\tcallback(view._sheets[i].name);\n}\n\nexport function getActive(view){\n\treturn view._activeSheet;\n}\n\nfunction refresh(view, obj){\n\tconst data = getSheetData(view);\n\n\tlet [rows, cols] = arr.getDimension(data, obj.spans, view.config.rowCount, view.config.columnCount);\n\n\tif (rows != view.config.rowCount || cols != view.config.columnCount){\n\t\tview.config.rowCount = rows;\n\t\tview.config.columnCount = cols;\n\t\tview._resetTable();\n\t}\n\n\tupdateMaxColumn(cols);\n\n\tview.callEvent(\"onReset\", []);\n\n\tview._loading_data = true;\n\tview.callEvent(\"onDataParse\", [obj]);\n\tview._loading_data = false;\n\n\tview._table.refresh();\n\tif(view.config.bottombar)\n\t\tview.$$(\"sheets\").refresh();\n}\n\nfunction copy(view){\n\tadd(view, view.serialize());\n}\n\nfunction callAction(view, id){\n\tif(!view.$sheetMenu.data.getMark(id, \"webix_disabled\"))\n\t\tactionMap[id](view);\n}\n\n","import \"../views/formlate\";\n\nexport class Dialog{\n\tconstructor(view){\n\t\tthis.view = view;\n\t}\n\t$init(){}\n\t$show(){}\n\t$hide(){}\n\topen(){\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=> {\n\t\t\t\tthis.$hide();\n\t\t\t\twebix.UIManager.setFocus(this.view);\n\t\t\t});\n\t\t\tthis.$dialog.attachEvent(\"onShow\", ()=> {\n\t\t\t\twebix.UIManager.setFocus(this.$dialog);\n\t\t\t});\n\t\t}\n\t\telse if(this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst form = this.$dialog.getBody();\n\t\tthis.$dialog.show();\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\tclose(){\n\t\tthis.$dialog.hide();\n\t}\n}","export function image(url){\n\treturn `=IMAGE(\"${url}\")`;\n}\n\nexport function chart(config){\n\tlet result = `=SPARKLINE(${config.range},\"${config.type}\"`;\n\tif (config.type === \"bar\")\n\t\tresult += `,\"${config.color}\",\"${config.negativeColor}\"`;\n\telse if(config.color)\n\t\tresult += `,\"${config.color}\"`;\n\treturn result+\")\";\n\n}\n\nexport function parseImage(value){\n\tif (value && value.indexOf(\"=IMAGE(\") === 0)\n\t\treturn {\n\t\t\turl: unescape(value.substr(7, value.length-8))\n\t\t};\n}\n\nexport function parseChart(value){\n\tif (value && value.indexOf(\"=SPARKLINE(\") === 0){\n\t\tlet text = value.substr(11, value.length-12).split(\",\");\n\t\treturn {\n\t\t\trange: text[0],\n\t\t\ttype: unescape(text[1]),\n\t\t\tcolor: unescape(text[2]),\n\t\t\tnegativeColor: unescape(text[3])\n\t\t};\n\t}\n}\n\nfunction unescape(text){\n\tif (!text) return \"\";\n\n\ttext = text.trim();\n\tif (text[0] === \"\\\"\") \n\t\ttext = text.substr(1);\n\tif (text[text.length-1] === \"\\\"\")\n\t\ttext = text.substr(0, text.length-1);\n\treturn text;\n}","import {Dialog} from \"./common\";\nimport {parseImage} from \"../mathematics/writer\";\n\nexport const action = \"add-image-cell\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseImage(value);\n\t\tif (data && data.url)\n\t\t\tform.elements.url.setValue(data.url);\n\n\t\tform.elements.url.focus();\n\t}\n\t$init(){\n\t\tconst save = this.view.config.save;\n\t\tconst server = (save && save.images) || null;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"image-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"image-url\"], on:{\n\t\t\t\t\t\t\"onChange\":(image) => this.showPreview(image)\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"label\", label:webix.i18n.spreadsheet.labels[\"image-or\"], align: \"center\"},\n\t\t\t\t\t{ view:\"uploader\", label:webix.i18n.spreadsheet.labels[\"image-upload\"], upload:server, on:{\n\t\t\t\t\t\tonBeforeFileAdd: function(file){\n\t\t\t\t\t\t\tif (!this.config.upload){\n\t\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\t\treader.onload = (e) => this.getFormView().elements.url.setValue(e.target.result);\n\t\t\t\t\t\t\t\treader.readAsDataURL(file.file);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.getFormView().elements.preview.setHTML(\"\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function(item, response){\n\t\t\t\t\t\t\tthis.getFormView().elements.url.setValue(response.imageURL);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless: true, css: \"webix_ssheet_preview\", template:\"\", height:50 }\n\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.cell;\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tthis.view.addImage(cell.row, cell.column, image);\n\t\tthis.close();\n\t}\n\tfillUrl(url){\n\t\tif (!/^[/]|((https?:\\/|data:image)\\/)/i.test(url))\n\t\t\turl = \"http://\" + url;\n\t\treturn url;\n\t}\n\tshowPreview(image){\n\t\tif (image){\n\t\t\timage = webix.template.escape(this.fillUrl(image));\n\t\t\tthis.$dialog.queryView(\"form\").elements.preview.setHTML(\"<img class='webix_ssheet_cimage' src='\"+image+\"'></img>\");\n\t\t}\n\t}\n}","import * as box from \"./imagecell\";\n\nexport const action = \"add-image-top\";\n\nexport class DialogBox extends box.DialogBox{\n\topen(action){\n\t\tthis.config = action.config;\n\t\tthis.viewid = action.viewid;\n\n\t\tthis.view.callEvent(\"onUIEditStart\", [this.viewid, \"image\"]);\n\n\t\tbox.DialogBox.prototype.open.apply(this, arguments);\n\t}\n\t$hide(){\n\t\tthis.view.callEvent(\"onUIEditStop\", [this.viewid, \"image\"]);\n\t\tthis.config = this.viewid = null;\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\t\tif(this.$dialog && this.$dialog.isVisible() && type != \"image\")\n\t\t\t\tthis.close();\n\t\t});\n\n\t\tthis.view.attachEvent(\"onCommand\", obj =>{\n\t\t\tif(obj.id == \"close-ui-editor\" && this.$dialog && this.$dialog.isVisible())\n\t\t\t\tthis.close();\n\t\t});\n\n\t\treturn box.DialogBox.prototype.$init.apply(this, arguments);\n\t}\n\t$show(box, form){\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\tif(this.config && this.config.data)\n\t\t\tform.elements.url.setValue(this.config.data);\n\n\t\tform.elements.url.focus();\n\t}\n\tokClick(){\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tif(this.viewid)\n\t\t\tthis.view.views.update(this.viewid, image);\n\t\telse{\n\t\t\tconst id = this.view.views.add(null, null, \"image\", image);\n\t\t\tthis.view.views.highlight(id);\n\t\t}\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport {parseChart} from \"../mathematics/writer\";\n\nexport const action = \"add-sparkline\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nfunction getTypes(){\n\treturn  [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]}\n\t];\n}\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst els = form.elements;\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tels.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tels.range.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseChart(value);\n\t\tif (data){\n\t\t\tform.blockEvent();\n\t\t\tels.type.setValue(data.type);\n\t\t\tels.range.setValue(data.range);\n\t\t\tif (data.color){\n\t\t\t\tels.color_def.setValue(data.color);\n\t\t\t\tels.color_pos.setValue(data.color);\t\t\n\t\t\t}\n\t\t\tif (data.negativeColor)\n\t\t\t\tels.color_neg.setValue(data.negativeColor);\n\t\t\tform.unblockEvent();\n\t\t\tthis.renderPreview();\n\t\t}\t\n\n\t\tels.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead:labels[\"sparkline-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\", visibleBatch:1, on:{ onChange : ()=> this.renderPreview() },  elements:[\n\t\t\t\t\t{view: \"richselect\", name:\"type\", label:labels[\"sparkline-type\"], value:\"line\", labelPosition:\"left\", suggest:{\n\t\t\t\t\t\tview:  \"ssheet-form-suggest\",\n\t\t\t\t\t\tdata:getTypes()\n\t\t\t\t\t}, on:{\n\t\t\t\t\t\tonChange: function(type){\n\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\tswitch(type){\n\t\t\t\t\t\t\t\tcase \"pie\":\n\t\t\t\t\t\t\t\t\tform.showBatch(3);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"bar\":\n\t\t\t\t\t\t\t\t\tform.showBatch(2);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tform.showBatch(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"text\", label:labels[\"sparkline-range\"], name:\"range\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-color\"], name:\"color_def\", id:\"add_sparkline_color\", value:\"#6666FF\", batch:\"1\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-positive\"], name:\"color_pos\", value:\"#6666FF\", batch:\"2\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-negative\"], name:\"color_neg\", value:\"#FF6666\", batch:\"2\"},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless:true, css:\"webix_ssheet_preview\", height:50 }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tcheckRange(text){\n\t\tif(text && range(text, this.view))\n\t\t\treturn true;\n\t\tthis.view.alert({text:labels[\"error-range\"]});\n\t}\n\tokClick(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst config = this.sparkConfig(data);\n\n\t\t\tthis.view.addSparkline(this.cell.row, this.cell.column, config);\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\trenderPreview(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst pos = range(data.range, this.view);\n\t\t\tlet i,\n\t\t\t\tvalues = this.view._mPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1),\n\t\t\t\tconfig = this.sparkConfig();\n\t\t\tfor(i =0 ; i < values.length; i++)\n\t\t\t\tvalues[i] = values[i]||0;\n\t\t\tform.elements.preview.setValue(webix.Sparklines.getTemplate(config)(values, { width:200, height: 40 }));\n\t\t}\n\t\telse\n\t\t\tform.elements.preview.setValue(\"\");\n\t}\n\n\tsparkConfig(config){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tconfig = config || { type: data.type  };\n\t\tif (data.type === \"bar\"){\n\t\t\tconfig.color = data.color_pos;\n\t\t\tconfig.negativeColor = data.color_neg;\n\t\t}\n\t\telse if(form.elements.color_def.isVisible())\n\t\t\tconfig.color = data.color_def;\n\n\t\treturn config;\n\t}\n}","import {Dialog} from \"./common\";\nimport {isRange, toSheetRange} from \"../helpers/column_names\";\nimport {getLastCharIndex} from \"../mathematics/parser\";\n\nexport const action = \"add-range\";\n\nexport class DialogBox extends Dialog{\n\t$show(box){\n\t\tconst form = box.$$(\"form\");\n\n\t\tform.clear();\n\t\tform.clearValidation();\n\n\t\tconst elements = form.elements;\n\n\t\telements.name.focus();\n\n\t\tlet selectedCell = this.view.getSelectedRange();\n\t\tif(selectedCell)\n\t\t\tselectedCell = this.view.getActiveSheet()+\"!\"+selectedCell;\n\n\t\tform.setValues({\n\t\t\trange: selectedCell,\n\t\t\tscope: \"$global\"\n\t\t});\n\n\t\tthis._updateData();\n\n\t\tthis.view._rangeDialog = true;\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tform.elements.range.setValue(toSheetRange(a,b,this.view.getActiveSheet()));\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tthis.view._rangeDialog = null;\n\t}\n\tsaveClick(){\n\t\tconst view = this.view;\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst data = form.getValues();\n\n\t\tif(data.range){\n\t\t\tconst rangeParts = data.range.split(\"!\");\n\n\t\t\tif(rangeParts.length == 1)\n\t\t\t\trangeParts.unshift( view.getActiveSheet() );\n\n\t\t\tdata.range = rangeParts[0]+\"!\"+rangeParts[1].toUpperCase();\n\t\t}\n\n\t\tdata.name = data.name.toUpperCase();\n\n\t\tform.setValues(data);\n\n\t\tif (form.validate()){\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\t\tif(data.id){\n\t\t\t\tconst oldData = table.getItem(data.id);\n\n\t\t\t\tview.ranges.remove(oldData.name, this._getScope(oldData));\n\t\t\t\ttable.updateItem(data.id, data);\n\t\t\t}\n\t\t\telse\n\t\t\t\ttable.add(data);\n\n\t\t\tview.ranges.add(\n\t\t\t\tdata.name,\n\t\t\t\tdata.range,\n\t\t\t\tthis._getScope(data)\n\t\t\t);\n\n\t\t\tview.refresh();\n\n\t\t\ttable.unselect();\n\t\t\tform.setValues({scope: \"$global\"});\n\t\t}\n\t}\n\t_getScope(data){\n\t\treturn data.scope == \"$global\" ? true : data.scope;\n\t}\n\tremoveRange(id){\n\t\tconst view = this.view;\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"range-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\t\t\tconst item = table.getItem(id);\n\n\t\t\tview.ranges.remove(item.name, this._getScope(item));\n\n\t\t\tview.refresh();\n\t\t\ttable.remove(id);\n\t\t});\n\t}\n\teditRange(id){\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\tform.clearValidation();\n\t\tconst item = webix.copy(table.getItem(id));\n\n\t\tform.setValues(item);\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onSheetRename\", (name, newName)=> this._updateData(name, newName));\n\t\tthis.view.attachEvent(\"onSheetRemove\", (name)=> this._updateData(name));\n\t\tthis.view.attachEvent(\"onSheetAdd\", ()=> this._updateData());\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst theform = {\n\t\t\tpadding:0,\n\t\t\ttype: \"clean\",\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-dialog-table\", id: \"table\", borderless:true, columns:[\n\t\t\t\t\t{ id:\"name\", header:locale[\"range-name\"], width: 120 },\n\t\t\t\t\t{ id:\"range\", header:locale[\"range-cells\"], width: 150 },\n\t\t\t\t\t{ id:\"scope\", header:locale[\"range-scope\"], width: 95, template: obj => {\n\t\t\t\t\t\treturn obj.scope == \"$global\" ? locale[\"range-global\"] : obj.scope;\n\t\t\t\t\t}},\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-pencil'></span>\", width:44 },\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-trash'></span>\", width:44 }\n\t\t\t\t],\n\t\t\t\tautowidth:true, height: 200, select:\"row\",\n\t\t\t\ton:{\n\t\t\t\t\tonBeforeSelect: id =>{\n\t\t\t\t\t\treturn id == this.$dialog.$$(\"form\").getValues().id;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\t\"wxi-trash\":(ev, id) => this.removeRange(id),\n\t\t\t\t\t\"wxi-pencil\":(ev, id) => this.editRange(id)\n\t\t\t\t}},\n\t\t\t\t{ width: 270, view: \"form\", id:\"form\",\n\t\t\t\t\trules:{\n\t\t\t\t\t\tname: (_, obj)=> {\n\t\t\t\t\t\t\tconst notUnique = this.$dialog.$$(\"table\").find(item => {\n\t\t\t\t\t\t\t\treturn item.name == obj.name && item.scope == obj.scope && item.id != obj.id;\n\t\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t\t\treturn !notUnique && !getLastCharIndex(obj.name);\n\t\t\t\t\t\t},\n\t\t\t\t\t\trange: isRange,\n\t\t\t\t\t\tscope: webix.rules.isNotEmpty\n\t\t\t\t\t},\n\t\t\t\t\telementsConfig:{\n\t\t\t\t\t\tlabelWidth: 95\n\t\t\t\t\t},\n\t\t\t\t\telements:[\n\t\t\t\t\t\t{ view: \"text\", name:\"name\", label: locale[\"range-name\"]},\n\t\t\t\t\t\t{ view: \"text\", name:\"range\", id:\"range\", label: locale[\"range-cells\"], on:{\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tconst value = this.$dialog.$$(\"range\").getValue();\n\t\t\t\t\t\t\t\tconst rangeParts = value.split(\"!\");\n\t\t\t\t\t\t\t\tif(rangeParts.length == 2 && this.view.getActiveSheet() != rangeParts[0])\n\t\t\t\t\t\t\t\t\tthis.view.showSheet(rangeParts[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view: \"richselect\", name:\"scope\", id:\"sheets\", label: locale[\"range-scope\"], suggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tmove:true,\n\t\t\thead: webix.i18n.spreadsheet.labels[\"range-title\"],\n\t\t\tautoheight: true,\n\t\t\twidth: 800,\n\t\t\tposition: \"center\",\n\t\t\tbody: theform,\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.saveClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\t_updateData(name, newName){\n\t\tif(!this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst ranges = this.view._mData.getRanges();\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst table = this.$dialog.$$(\"table\");\n\t\tconst form = this.$dialog.$$(\"form\");\n\n\t\tlet editRange = table.getItem( form.getValues().id );\n\t\tif(editRange){\n\t\t\tlet rangeName = editRange.name;\n\n\t\t\tif(name == editRange.scope)\n\t\t\t\trangeName = newName ? newName+\"!\"+rangeName : null;\n\t\t\telse\n\t\t\t\trangeName = editRange.scope+\"!\"+rangeName;\n\n\t\t\teditRange = rangeName ? ranges.get(rangeName) : null;\n\t\t}\n\n\t\ttable.clearAll();\n\n\t\tconst allRanges = ranges.serialize();\n\t\tconst data = [];\n\n\t\tlet selectedId;\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst id = i+1;\n\t\t\tlet [name, range] = allRanges[i];\n \n\t\t\tif(editRange && ranges.get(name) == editRange)\n\t\t\t\tselectedId = id;\n\n\t\t\tconst nameParts = name.split(\"!\");\n\n\t\t\tdata.push({\n\t\t\t\tscope: nameParts.length == 1 ? \"$global\" : nameParts[0],\n\t\t\t\tname: nameParts[1] || nameParts[0],\n\t\t\t\trange,\n\t\t\t\tid\n\t\t\t});\n\t\t}\n\n\t\ttable.parse(data);\n\n\t\tform.setValues({id:selectedId}, true);\n\t\tif(selectedId)\n\t\t\ttable.select(selectedId);\n\n\t\tconst select = this.$dialog.$$(\"sheets\");\n\t\tconst selectList = select.getList();\n\n\t\tselectList.clearAll();\n\n\t\tconst sheets = [{\n\t\t\tid: \"$global\", value: locale[\"range-global\"]\n\t\t}];\n\t\tthis.view._sheets.forEach(sheet => {\n\t\t\tsheets.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\tselectList.parse(sheets);\n\n\t\tif(name){\n\t\t\tconst range = this.$dialog.$$(\"range\");\n\t\t\tconst rangeVal = range.getValue();\n\n\t\t\t//remove sheet\n\t\t\tnewName = newName || this.view.getActiveSheet();\n\n\t\t\tif(rangeVal.indexOf(name+\"!\") == 0)\n\t\t\t\trange.setValue((newName)+\"!\"+rangeVal.split(\"!\")[1]);\n\n\t\t\tif(select.getValue() == name)\n\t\t\t\tselect.setValue(newName);\n\t\t}\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"add-dropdown\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tlet form = this.$dialog.$$(\"form\");\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tform.clear();\n\n\t\t//restore previosly selected range\n\t\tlet value = this.view.getCellEditor(this.cell[0].row, this.cell[0].column);\n\t\tif (value && value.options)\n\t\t\tform.elements.range.setValue(value.options);\n\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tform.elements.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\thead:webix.i18n.spreadsheet.labels[\"dropdown-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0, view:\"form\", id:\"form\", rows:[\n\t\t\t\t\t{ view:\"text\", label:webix.i18n.spreadsheet.labels[\"dropdown-range\"], name:\"range\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.$$(\"form\").elements.range.getValue();\n\n\t\tif (values){\n\t\t\tif(!range(values, this.view))\n\t\t\t\tthis.view.alert({text:webix.i18n.spreadsheet.labels[\"error-range\"]});\n\t\t\telse{\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\t\t\tthis.view.setCellEditor(this.cell[i].row, this.cell[i].column, { editor:\"ss_richselect\", options:values});\n\t\t\t\t}, this);\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthis.close();\n\t}\n}","import {range as getRangePos} from \"../helpers/column_names\";\nimport {cell_template} from \"../table\";\n\nclass Ranges{\n\tconstructor(view){\n\t\tthis._master = view;\n\t}\n\tclear(scope){\n\t\tconst sheet = typeof scope == \"string\" ? scope : this._master.getActiveSheet();\n\t\tconst ranges = this.serialize(sheet);\n\t\tranges.forEach(range => {\n\t\t\tif(scope === true){\n\t\t\t\tif(range[2])\n\t\t\t\t\tthis.remove(range[0], scope);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.remove(range[0], scope);\n\t\t});\n\t}\n\t_normalizeName(name, scope){\n\t\tif(scope !== true)\n\t\t\tname = (scope || this._master.getActiveSheet())+\"!\"+name;\n\t\treturn name;\n\t}\n\t_normalizeRange(range, scope){\n\t\tconst rangeParts = range.split(\"!\");\n\t\tif(rangeParts.length == 1)\n\t\t\trange = (typeof scope == \"string\" ? scope : this._master.getActiveSheet()) + \"!\" + range;\n\t\treturn range;\n\t}\n\tadd(name, range, scope){\n\t\tconst view = this._master;\n\n\t\tview.callEvent(\"onAfterRangeSet\", [name, range, scope]);\n\n\t\tname = this._normalizeName(name, scope);\n\n\t\tview._mData.getRanges().add(name, this._normalizeRange(range, scope));\n\t\tview.callEvent(\"onMathRefresh\", []);\n\t}\n\tgetCode(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tconst range = this._master._mData.getRanges().get(name);\n\t\tif(range)\n\t\t\treturn range.source;\n\t}\n\tremove(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tthis._master._mData.getRanges().remove(name);\n\t\tthis._master.callEvent(\"onMathRefresh\", []);\n\t}\n\tparse(data, sheet){\n\t\tif(!data)\n\t\t\treturn;\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst ranges = this._master._mData.getRanges();\n\t\t\tlet [name, range, globalRange] = data[i];\n\t\t\tname = this._normalizeName(name, globalRange||sheet);\n\n\t\t\tif(!ranges.get(name))\n\t\t\t\tranges.add(name, this._normalizeRange(range, sheet));\n\t\t}\n\t}\n\tserialize(sheet){\n\t\tsheet = sheet || this._master.getActiveSheet();\n\t\tconst allRanges = this._master._mData.getRanges().serialize();\n\t\tconst out = [];\n\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst arr = allRanges[i];\n\t\t\tconst nameParts = arr[0].split(\"!\");\n\t\t\tconst globalRange = nameParts.length == 1;\n\n\t\t\tif(globalRange || nameParts[0] == sheet)\n\t\t\t\tout.push([\n\t\t\t\t\tnameParts[ globalRange ? 0 : 1 ],\n\t\t\t\t\tarr[1],\n\t\t\t\t\tglobalRange\n\t\t\t\t]);\n\t\t}\n\n\t\treturn out;\n\t}\n\tgetRanges(sheet){\n\t\tconst data = this.serialize(sheet);\n\t\treturn data.map(arr => {\n\t\t\treturn {\n\t\t\t\tname: arr[0],\n\t\t\t\trange: arr[1],\n\t\t\t\tglobal: arr[2]\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function init(view) {\n\tview.ranges = new Ranges(view);\n\n\tview.attachEvent(\"onDataSerialize\", data => {\n\t\tdata.ranges = view.ranges.serialize();\n\t});\n}\n\nfunction nullFilter(){ \n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn { id:\"$empty\", value:\"\", $value:\"<span class='webix_ssheet_empty'>\"+locale[\"dropdown-empty\"]+\"</span>\" };\n}\n\nfunction getRange(view, r1, c1, r2, c2){\n\tconst out = [];\n\tconst activeSheet = view._mPage === this;\n\n\tfor (var i = r1-1; i <= r2-1; i++) {\n\t\tfor (var j = c1-1; j <= c2-1; j++){\n\t\t\tlet obj = this.getCell(i, j);\n\t\t\tlet cell;\n\n\t\t\tif(!obj)\n\t\t\t\tcell = {\n\t\t\t\t\tvalue: \"\"\n\t\t\t\t};\n\t\t\telse\n\t\t\t\tcell = webix.copy(obj);\n\n\t\t\tif(activeSheet)\n\t\t\t\tcell.$value = cell_template(view, {id: i+1}, null, null, {id:j+1}, true);\n\t\t\telse\n\t\t\t\tdelete cell.format;\n\n\t\t\tcell.id = cell.value;\n\t\t\tout.push(cell);\n\t\t}\n\t}\n\n\treturn out;\n}\n\nexport function rangeOptions(view, text, extra){\n\tlet values = [];\n\tif (typeof text == \"string\"){\n\t\tconst pos = getRangePos(text, view);\n\t\tif (pos){\n\t\t\tlet page = view._mPage;\n\t\t\tif(pos[4])\n\t\t\t\tpage = view._mData.getPage(pos[4]);\n\n\t\t\tvalues = page ? getRange.apply(page, [view, ...pos]) : [];\n\t\t}\n\t}\n\telse if (webix.isArray(text))\n\t\tfor (let i=0; i<text.length; i++){\n\t\t\tlet v = (text[i] || text[i] === 0) ? text[i] : \"\";\n\t\t\tv = (typeof v === \"object\") ? webix.copy(v) : { id:v, value:v };\n\t\t\tvalues.push(v);\n\t\t}\n\n\tif (extra){\n\t\tif (extra.unique){\n\t\t\tconst test = {};\n\t\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\t\tif (test[values[i].id])\n\t\t\t\t\tvalues.splice(i, 1);\n\t\t\t\telse\n\t\t\t\t\ttest[values[i].id] = true;\n\t\t\t}\n\t\t}\n\n\t\tlet empty = false;\n\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\tvalues[i].value = String(values[i].value);\n\t\t\tif (values[i].value === \"\"){\n\t\t\t\tvalues.splice(i, 1);\n\t\t\t\tempty = true;\n\t\t\t}\n\t\t}\n\n\t\tif (extra.order)\n\t\t\tvalues.sort(function(objA, objB){\n\t\t\t\tconst sorters = view.$$(\"cells\").data.sorting.as;\n\t\t\t\tconst a = objA.value;\n\t\t\t\tconst b = objB.value;\n\n\t\t\t\treturn webix.rules.isNumber(a) && webix.rules.isNumber(b) ? sorters.int(a, b) : sorters.string(a, b);\n\t\t\t});\n\n\t\tif (empty && extra.filter)\n\t\t\tvalues.unshift( nullFilter() );\n\n\t\tif (extra.empty)\n\t\t\tvalues.unshift({ id:\"$empty\", $empty:true, value:\"\" });\n\t}\n\treturn values;\n}","import group from \"./undo_group\";\nimport {getType} from \"./types\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport {changeRange, eachRange, toRange} from \"../helpers/column_names\";\nimport {conditions} from \"../helpers/conditional\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.on_click.ssheet_filter_sign = (e, id) => {\n\t\tconst filter = table._ssFilters[id.row][id.column];\n\t\tconst mode = filter.mode || getFilterMode(view, id.row, id.column);\n\n\t\tlet options = [];\n\t\tif (filter.options){\n\t\t\tif (typeof filter.options == \"string\")\n\t\t\t\toptions = rangeOptions(view, filter.options, { unique:true, order:true, filter:true });\n\t\t\telse if (webix.isArray(filter.options))\n\t\t\t\toptions = rangeOptions(view, filter.options, { filter:true });\n\t\t}\n\t\tview.callEvent(\"onCommand\", [{id:\"start-filter\", cell:id, mode, options, filter}]);\n\t};\n\ttable.on_dblclick.ssheet_filter_sign = () => false;\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"create-filter\")\n\t\t\ttoggleFilters(view);\n\t});\n\n\tlet refilter = false;\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"filter\"){\n\t\t\tvalue = (typeof value == \"object\") ? value : null;\n\t\t\tview.setCellFilter(row, column, value);\n\t\t\trefilter = true;\n\t\t}\n\t\telse if (type == \"apply-filter\"){\n\t\t\tconst filter = view.getCellFilter(row, column);\n\n\t\t\tfilter.value = value;\n\t\t\tdelete filter.handler;\n\t\t\tif (value && value.condition){\n\t\t\t\tconst mode = filter.mode || getFilterMode(view, row, column);\n\t\t\t\tfilter.handler = getFilterFunction(mode, filter.value);\n\t\t\t}\n\t\t\trefilter = true;\n\n\t\t\t// update css\n\t\t\tconst add = value && isValueActive(value);\n\t\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, \"ss_filter_active\");\n\t\t\tsetSpanCss(view, row, column, \"ss_filter_active\", add);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterUndo\", () => {\n\t\tif (refilter){\n\t\t\tview.filterSpreadSheet();\n\t\t\trefilter = false;\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"filter\"){\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter\", p.newValue);\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter_active\", (p.newValue && p.newValue.value && isValueActive(p.newValue.value)));\n\t\t\tmarkBarFilter(view);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssFilters = {};\n\tmarkBarFilter(view);\n}\n\nexport function getFilters(table){\n\tconst filters = table._ssFilters;\n\tconst all = [];\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tall.push(filters[row][column]);\n\treturn all;\n}\n\nexport function serialize(view,data){\n\tconst filters = getFilters(view._table);\n\tconst result = data.filters = [];\n\n\tfor (let i = 0; i<filters.length; i++){\n\t\tlet {row, column, options, mode, value} = filters[i];\n\t\tvalue = value && webix.copy(value);\n\t\tresult.push([row, column, {value, options, mode}]);\n\t}\n}\n\nexport function load(view,data){\n\tconst filters = data.filters;\n\n\tif (filters){\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tview.setCellFilter(filters[i][0], filters[i][1], (filters[i][2] || {options:\"\"}));\n\t\t}\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nexport function clearFilters(view, range){\n\tlet refilter = false;\n\teachRange(range, view, function(view, cell){\n\t\tlet filter = view._table._ssFilters[cell.row];\n\t\tif (filter){\n\t\t\tif (filter[cell.column]){\n\t\t\t\trefilter = true;\n\t\t\t\tdelete filter[cell.column];\n\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_filter\");\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_filter_active\");\n\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_filter\", false);\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_filter_active\", false);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (refilter)\n\t\tview.filterSpreadSheet();\n}\n\nexport function isFilter(view, row, column){\n\tconst filters = view._table._ssFilters;\n\treturn filters[row] && !!filters[row][column];\n}\n\nexport function calibrateRange(view, row, column, range){\n\tif(!range)\n\t\trange = {end:{row:row}};\n\n\tif (range.end){\n\t\tvar endRow = range.end.row;\n\t\trange = getFilterRange(view, row, column, endRow);\n\t}\n\treturn range;\n}\n\nexport function isValueActive(value){\n\treturn !!(value.includes || (value.condition && value.condition.filter));\n}\n\nfunction isFilterExists(view){\n\tconst filters = view._table._ssFilters;\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tif (filters[row][column]) return true;\n\treturn false;\n}\n\nfunction markBarFilter(view){\n\tconst value = isFilterExists(view);\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"create-filter\", value}]);\n}\n\n\nfunction getFilterRange(view, row, column, endRow){\n\tif (row === endRow){\n\t\tfor (endRow = row; endRow < view.config.rowCount; endRow++){\n\t\t\tif(!view.getCellValue(endRow+1, column))\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn toRange(row+1, column, endRow, column);\n}\n\nexport function getFilterMode(view, row, column){\n\tfor (let i=row+1; i<view.config.rowCount; i++){\n\t\tconst value = view.getCellValue(i, column);\n\n\t\tif (value || value === 0){\n\t\t\tconst type = getType(view, i, column);\n\t\t\treturn (type == \"number\" || type == \"date\") ? type : \"text\";\n\t\t}\n\t\telse if (value !== \"\")\n\t\t\tbreak;\n\t}\n\treturn \"text\";\n}\n\nfunction toggleFilters(view){\n\tconst range = view._table.getSelectArea();\n\n\tif (isFilterExists(view)){\n\t\tgroup.set(function(){\n\t\t\tview.removeFilters();\n\t\t});\n\t\tif (range)\n\t\t\tview._table.addSelectArea(range.start, range.end);\n\t}\n\telse if (range)\n\t\tgroup.set(function(){\n\t\t\tlet row = range.start.row;\n\t\t\tfor (let i=range.start.column; i<=range.end.column; i++){\n\t\t\t\tview.setCellFilter(row, i, { options:range });\n\t\t\t}\n\t\t});\n\tmarkBarFilter(view);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tconst filters = data.filters;\n\n\tif (inc){\n\t\tfor(let i=filters.length-1; i>=0; i--){\n\t\t\tlet [row,column,filter] = filters[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete filter mark if row was deleted\n\t\t\t\t\t\tfilters.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tfilters[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tfilters.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\tfilters[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\tfilter.options = changeRange(filter.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteFilter(view, extra, row, col, cutted, translate){\n\tconst filter = extra.filter;\n\n\tfilter.options = changeRange(filter.options, \"row\", translate.row, {column:extra.col, row:extra.row});\n\tfilter.options = changeRange(filter.options, \"column\", translate.column, {column:extra.col, row:extra.row});\n\n\tdelete filter.value; delete filter.handler;\n\tview.setCellFilter(row, col, filter);\n}\n\nexport function getSingleOption(mode, type){\n\tconst c = conditions[mode];\n\tfor (let i=0; i<c.length; i++)\n\t\tif (c[i].id == type) return c[i];\n}\n\nexport function getConditions(name){\n\treturn webix.copy( conditions[name] );\n}\n\nexport function getFilterFunction(mode, value){\n\tconst { includes, condition } = value;\n\tconst opt = getSingleOption(mode, condition.type);\n\tconst handler = opt ? opt.handler : function(){ return true; };\n\n\tif (includes){\n\t\tfor (let i=0; i<includes.length; i++)\n\t\t\tincludes[i] = String(includes[i]);\n\t}\n\n\treturn function(value){\n\t\tif (includes){\n\t\t\treturn includes.indexOf(value) !== -1;\n\t\t} else {\n\t\t\treturn condition.filter === \"\" || handler(value, condition.filter);\n\t\t}\n\t};\n}","import {Dialog} from \"./common\";\nimport * as flt from \"../operations/filter\";\n\nexport const action = \"start-filter\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.cell = action.cell;\n\t\tthis.$mode = action.mode;\n\t\tthis.$filter = action.filter;\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column))){\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", () => this.$hide());\n\n\t\t\tconst table = this.view.$$(\"cells\");\n\t\t\ttable.attachEvent(\"onScrollY\", () => this.syncScroll());\n\t\t\ttable.attachEvent(\"onScrollX\", () => this.syncScroll());\n\t\t}\n\n\t\tif (this.$show(this.$filter.value, action.options) === false)\n\t\t\treturn this.close();\n\t\tthis.$dialog.show( this._getTargetNode() );\n\t}\n\t_getTargetNode(){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = table.getSpan(this.cell.row, this.cell.column);\n\t\treturn span ? table.getSpanNode(this.cell) : table.getItemNode(this.cell);\n\t}\n\t$show(value, options){\n\t\tconst list = this.getList();\n\t\tconst filter = this.getFilter();\n\n\t\tif (filter.config.mode !== this.$mode){\n\t\t\tfilter.define(\"conditions\", this.getConditions(this.$mode));\n\t\t\tfilter.define(\"mode\", this.$mode);\n\t\t}\n\n\t\t// if the filter mode for the current column has been changed - reset the value\n\t\tconst type = value && value.conditions && value.conditions.type;\n\t\tif (type && !flt.getSingleOption(this.$mode, type))\n\t\t\tvalue = \"\";\n\n\t\tlist.clearAll();\n\t\tlist.data.importData(options);\n\n\t\t// filter data has been changed - reset value\n\t\tfilter.config.value = \"\";\n\t\tfilter.setValue( webix.copy(value||{}) );\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview:\"popup\",\n\t\t\tcss:\"ssheet_filter\",\n\t\t\tpadding:7,\n\t\t\trelative:\"right\",\n\t\t\tbody:{\n\t\t\t\tmargin:4,\n\t\t\t\trows:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"filter\",\n\t\t\t\t\t\tfield:\"value\",\n\t\t\t\t\t\tmode:\"text\",\n\t\t\t\t\t\tconditions:this.getConditions(\"text\"),\n\t\t\t\t\t\tinputs:[\n\t\t\t\t\t\t\t\"text\",\n\t\t\t\t\t\t\t{ view:\"ssheet-datepicker\", timepicker:true, batch:\"datepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t{ view:\"ssheet-daterangepicker\", timepicker:true, batch:\"daterangepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttemplate:function(obj){\n\t\t\t\t\t\t\treturn obj.$value || obj.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ },\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"cancel\"], autowidth:true, css:\"webix_transparent\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.close()\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"apply\"], autowidth:true, css:\"webix_secondary\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.applyFilter()\n\t\t\t\t\t\t}},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tapplyFilter(){\n\t\tconst filter = this.getFilter();\n\t\tconst oldValue = this.$filter.value;\n\t\tconst value = this.$filter.value = filter.getValue();\n\t\tthis.$filter.handler = flt.getFilterFunction(this.$mode, value);\n\n\t\tthis.view.filterSpreadSheet();\n\t\tthis.view.callEvent(\"onAction\", [\"apply-filter\", { row:this.cell.row, column:this.cell.column, value:oldValue, newValue:value }]);\n\t\tthis.setCellStyle(this.cell.row, this.cell.column, \"ss_filter_active\", flt.isValueActive(value));\n\n\t\tthis.close();\n\t}\n\tsetCellStyle(row, column, css, add){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = this.getSpan(table, row, column);\n\n\t\tif (span){\n\t\t\tif (add){\n\t\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\t\tspan[3] += \" \" + css;\n\t\t\t} else {\n\t\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t\t}\n\t\t}\n\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, css);\n\t}\n\tgetSpan(table, row, column){\n\t\tlet item = table.getSpan()[row];\n\t\tif (item)\n\t\t\treturn item[column];\n\t}\n\tgetList(){\n\t\treturn this.getFilter().getChildViews()[2];\n\t}\n\tgetFilter(){\n\t\treturn this.$dialog.getBody().getChildViews()[0];\n\t}\n\tsyncScroll(){\n\t\tif (this.$dialog.isVisible()){\n\t\t\tconst node = this._getTargetNode();\n\t\t\tconst table = this.view.$$(\"cells\");\n\n\t\t\tlet isHidden = false;\n\t\t\tif (node){\n\t\t\t\tconst nodeOffset = webix.html.offset( node );\n\t\t\t\tconst tableOffset = webix.html.offset( table.$view.getElementsByClassName(\"webix_ss_body\")[0] );\n\t\t\t\tconst ydiff = nodeOffset.y - tableOffset.y;\n\t\t\t\tconst xdiff = nodeOffset.x - tableOffset.x + nodeOffset.width;\n\n\t\t\t\tisHidden = (ydiff < 0 || ydiff+nodeOffset.height > tableOffset.height || \n\t\t\t\t\txdiff < 0 || xdiff-nodeOffset.width > tableOffset.width - webix.env.scrollSize);\n\t\t\t}\n\t\t\tif (!node || isHidden)\n\t\t\t\tthis.$dialog.show({x:-9999, y:-9999});\n\t\t\telse \n\t\t\t\tthis.$dialog.show(node);\n\t\t}\n\t}\n\tgetConditions(name){\n\t\tconst locale = webix.i18n.filter;\n\t\tconst conditions = flt.getConditions(name);\n\n\t\tfor (let i=0; i<conditions.length; i++)\n\t\t\tif (conditions[i].id)\n\t\t\t\tconditions[i].value = locale[conditions[i].id];\n\n\t\treturn conditions;\n\t}\n}","import {Dialog} from \"./common\";\nimport {getFormat} from \"../operations/styles\";\nimport * as fmt from \"../operations/formats\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"custom\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tthis.form = this.$dialog.$$(\"form\");\n\t\tthis.list = this.$dialog.$$(\"list\");\n\t\tthis.preview = this.$dialog.$$(\"preview\");\n\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tthis.fillForm(this.view);\n\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\tconst i18n = webix.i18n.spreadsheet;\n\t\tconst labelsLocale = i18n.labels;\n\t\tconst formatsLocale = i18n.formats;\n\n\t\tconst docsLink = \"https://webix-guides.gitbook.io/spreadsheet-user-guide/formatting_numbers#custom-number-format\";\n\t\tconst delimiters = fmt.getDelimiters(\"int\");\n\n\t\tconst commonConfig = [\n\t\t\t{\n\t\t\t\tname:\"zeros\",\n\t\t\t\tview:\"counter\",\n\t\t\t\tcss:\"webix_ssheet_counter\",\n\t\t\t\tlabel:labelsLocale[\"decimal-places\"],\n\t\t\t\tvalue:0,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\tview:\"checkbox\",\n\t\t\t\tlabel:labelsLocale[\"separator\"],\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"richselect\",\n\t\t\t\tname:\"symbol\",\n\t\t\t\tlabel:labelsLocale[\"currency-symbol\"],\n\t\t\t\toptions:fmt.currencies,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabel:labelsLocale[\"negative\"],\n\t\t\t\theight: 160,\n\t\t\t\tname:\"negative\",\n\t\t\t\tbatch:\"common\",\n\t\t\t\tcss:\"webix_ssheet_format_negative\",\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tif(this.list){\n\t\t\t\t\t\tlet format = this.getFormat(obj.id);\n\t\t\t\t\t\tformat = fmt.format2code(format.fmt, format.delimiters);\n\t\t\t\t\t\tconst style = {css:\"\"};\n\t\t\t\t\t\tconst value = format(-1234.56789, style);\n\n\t\t\t\t\t\treturn \"<span class='\"+style.css+\"'>\"+value+\"</span>\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata:[{id:1}, {id:2}, {id:3}, {id:4}]\n\t\t\t}\n\t\t];\n\n\t\tconst customConfig = [\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\tlabel: labelsLocale[\"format-pattern\"],\n\t\t\t\tname:\"format\",\n\t\t\t\tlabelPosition:\"top\",\n\t\t\t\tbatch:\"custom\",\n\t\t\t\tplaceholder:\"[>100]0\"+delimiters.groupSign+\"000\"+delimiters.decimalSign+\"00;[>0]None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"docs\",\n\t\t\t\ttemplate: \"<a href='\"+docsLink+\"' target='_blank' class = 'docs'>\"+labelsLocale[\"format-docs\"]+\"</a>\",\n\t\t\t\tborderless:true,\n\t\t\t\tbatch:\"custom\"\n\t\t\t}\n\t\t];\n\n\t\tconst dateConfig = [\n\t\t\t{\n\t\t\t\tname:\"date\",\n\t\t\t\tbatch:\"date\",\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabelWidth: 90,\n\t\t\t\theight: 160,\n\t\t\t\tlabel:labelsLocale[\"date-format\"],\n\t\t\t\tcss:\"webix_ssheet_format_date\",\n\t\t\t\ttemplate: obj => fmt.format2code(obj.value, delimiters)(45000),\n\t\t\t\tdata:[\n\t\t\t\t\tformatsLocale.dateFormat,\n\t\t\t\t\tformatsLocale.timeFormat,\n\t\t\t\t\tformatsLocale.fullDateFormat,\n\t\t\t\t\tformatsLocale.longDateFormat\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth:460,\n\t\t\thead: labelsLocale[\"format-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"list\",\n\t\t\t\t\t\tid:\"list\",\n\t\t\t\t\t\tcss:\"webix_ssheet_format_type\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tscroll:false,\n\t\t\t\t\t\tdata:this.getFormats(),\n\t\t\t\t\t\tselect:true,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonSelectChange: (id)=>{\n\t\t\t\t\t\t\t\tthis.updateForm();\n\t\t\t\t\t\t\t\tswitch(id[0]){\n\t\t\t\t\t\t\t\t\tcase \"custom\":\n\t\t\t\t\t\t\t\t\tcase \"date\":\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(id[0]);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:{\n\t\t\t\t\t\t\t\t\t\tconst elements = this.form.elements;\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(\"common\");\n\n\t\t\t\t\t\t\t\t\t\telements.separator[ id[0] == \"percent\" ? \"hide\" : \"show\" ]();\n\t\t\t\t\t\t\t\t\t\telements.symbol[ id[0] == \"price\" ? \"show\" : \"hide\" ]();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"form\",\n\t\t\t\t\t\tid:\"form\",\n\t\t\t\t\t\theight:340,\n\t\t\t\t\t\tpaddingY:0,\n\t\t\t\t\t\tpaddingX:20,\n\t\t\t\t\t\telements:[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: \"preview\",\n\t\t\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\t\t\tif(obj.value == i18n.table[\"format-error\"])\n\t\t\t\t\t\t\t\t\t\treturn obj.value;\n\t\t\t\t\t\t\t\t\treturn \"<span class ='\"+obj.css+\"'>\"+obj.value+\"</span>\";\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_format_preview\",\n\t\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\t\tborderless:true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t].concat(commonConfig, customConfig, dateConfig),\n\t\t\t\t\t\telementsConfig: {\n\t\t\t\t\t\t\tlabelWidth: 140\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: () => this.updateForm()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.closeWin()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tlet type = this.list.getSelectedId();\n\t\tlet values = (type == \"custom\")?{format:this.form.getValues().format}:this.form.getValues();\n\t\tvalues.type = type;\n\n\t\tgroup.set(()=>{\n\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\tfmt.addFormat(this.view, this.cell[i].row, this.cell[i].column, values.format, values);\n\t\t});\n\n\t\tthis.view.$$(\"cells\").refresh();\n\t\tthis.closeWin();\n\t}\n\tcloseWin(){\n\t\tconst format = getFormat(this.view, this.cell[0].row, this.cell[0].column);\n\t\tconst name = format || \"common\";\n\n\t\t//default format\n\t\tif(!fmt.isCustom(name))\n\t\t\tthis.view.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:name}]);\n\t\tthis.close();\n\t}\n\tgetFormat(negative){\n\t\tconst type = this.list.getSelectedId();\n\t\tlet values = this.form.getValues();\n\n\t\tvalues.negative = negative || values.negative;\n\t\tif(type != \"custom\"){\n\t\t\tif(type != \"date\")\n\t\t\t\tvalues.date = \"\";\n\n\t\t\tvalues = fmt.formToValues(type, values);\n\t\t\treturn {\n\t\t\t\tfmt: fmt.serializeFormat(values),\n\t\t\t\tdelimiters:fmt.getDelimiters(type)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t\treturn {\n\t\t\t\tfmt: values.format,\n\t\t\t\tdelimiters: fmt.getDelimiters(type)\n\t\t\t};\n\t}\n\tfillForm(view){\n\t\tconst locale = webix.i18n.spreadsheet;\n\t\tconst format = getFormat(view, this.cell[0].row, this.cell[0].column);\n\t\tlet values = { zeros:0, separator: 0, negative: 1, date: locale.formats.dateFormat, symbol:fmt.currencies[0].value, format: \"\"};\n\t\tlet type;\n\n\t\tlet name = format || \"\";\n\n\t\tvalues.format = fmt.getFormatSource(name || \"price\");\n\n\t\tif(!name)\n\t\t\ttype = name = \"price\";\n\t\telse if(name == \"string\")\n\t\t\ttype = name = \"custom\";\n\t\telse\n\t\t\ttype = fmt.formatHelpers[name].values.type;\n\n\t\tif(type != \"custom\")\n\t\t\twebix.extend(values, fmt.formatHelpers[name].values, true);\n\n\t\tconst item = this.view.$$(\"cells\").getItem(this.cell[0].row);\n\t\tconst col = this.cell[0].column;\n\n\t\tthis.value = webix.isUndefined(item[col]) ? \"\" : item[col];\n\n\t\tthis.form.setValues(values);\n\t\tthis.list.select(type);\n\t\tthis.updateForm();\n\t}\n\tupdateForm(){\n\t\tconst form = this.form.elements;\n\t\tconst format = this.getFormat();\n\t\tlet value = this.value;\n\n\t\tconst isText = value === \"\" || isNaN(value);\n\n\t\tif(fmt.checkFormat(format, \"date\") && (isText || fmt.isDateInvalid(value)))\n\t\t\tvalue = 45000;\n\t\telse if(isText && !fmt.checkFormat(format, \"string\"))\n\t\t\tvalue = 1234.56789;\n\n\t\tlet style = {css:\"\"};\n\t\tvalue = fmt.format2code(format.fmt, format.delimiters)(value, style);\n\n\t\t//preview values\n\t\tthis.preview.parse({value:value, css:style.css});\n\t\tform.negative.refresh();\n\t\tform.date.refresh();\n\n\t\t//set new format string\n\t\tform.format.setValue(format.fmt);\n\t}\n\tgetFormats(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn [\n\t\t\t{id: \"price\", value: locale.currency},\n\t\t\t{id: \"int\", value: locale.number},\n\t\t\t{id: \"percent\", value: locale.percent},\n\t\t\t{id: \"date\", value: locale.date},\n\t\t\t{id: \"custom\", value: locale[\"custom-format\"]}\n\t\t];\n\t}\n}","import {Dialog} from \"./common\";\nimport {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {isDateInvalid} from \"../operations/formats\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {getType} from \"../operations/types\";\nimport {find} from \"../helpers/array\";\n\nexport const action = \"conditional-format\";\n\nfunction getConditionStyle(data){\n\treturn data.map(item => {\n\t\titem.id = item.css;\n\t\treturn item;\n\t});\n}\n\nexport class DialogBox extends Dialog{\n\t_rulesToArr(){\n\t\tconst conditions = this.view.conditions.handlers;\n\t\treturn [\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"common\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.date, //number rules equal to date\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"text\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.text\n\t\t].map(rule => {\n\t\t\tif(!rule.value)\n\t\t\t\trule.value = webix.i18n.filter[ rule.id ];\n\t\t\treturn rule;\n\t\t});\n\t}\n\n\t_getCondition() {\n\t\tconst view = this.view;\n\t\tconst values = this._getDatalayout().getValue();\n\n\t\tconst data = [];\n\t\tvalues.forEach(v => {\n\t\t\tconst item = [v.condition];\n\t\t\tif (v.condition != \"between\" && v.condition != \"notBetween\")\n\t\t\t\titem.push(this._normalizeValue(v.value, v.condition));\n\t\t\telse\n\t\t\t\titem.push([\n\t\t\t\t\tthis._normalizeValue(v.value, v.condition),\n\t\t\t\t\tthis._normalizeValue(v.value2, v.condition)\n\t\t\t\t]);\n\n\t\t\titem.push(v.style);\n\t\t\tfor (let i=0; i<item.length; i++){\n\t\t\t\tif (item[i] === \"\" || (webix.isArray(item[i]) && item[i].indexOf(\"\") != -1))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdata.push(item);\n\t\t});\n\n\t\tview.callEvent(\"onConditionSet\", [data]);\n\t}\n\n\t_safeInt(a){\n\t\tconst num = parseFloat(a);\n\t\tif (num == a) return num;\n\t\treturn a;\n\t}\n\n\t_setCondition() {\n\t\tconst view = this.view;\n\t\tconst collection = view.conditions.get(this.cell.row, this.cell.column);\n\n\t\tconst data = [];\n\t\tif (collection) {\n\t\t\tcollection.forEach(item => {\n\t\t\t\tconst values = {};\n\t\t\t\tvalues.condition = item[0];\n\t\t\t\tif (webix.isArray(item[1])) {\n\t\t\t\t\tvalues.value = this._formatValue(item[1][0], values.condition);\n\t\t\t\t\tvalues.value2 = this._formatValue(item[1][1], values.condition);\n\t\t\t\t} else\n\t\t\t\t\tvalues.value = this._formatValue(item[1], values.condition);\n\n\t\t\t\tvalues.style = item[2];\n\t\t\t\tdata.push(values);\n\t\t\t});\n\t\t}\n\n\t\twhile (data.length < 3)\n\t\t\tdata.push({ });\n\n\t\tthis._getDatalayout().setValue(data);\n\t}\n\n\t_getDatalayout(){\n\t\treturn this.$dialog.getBody().getChildViews()[0].getChildViews()[1].getBody();\n\t}\n\n\t_formatValue(value, condition){\n\t\tif(!(condition && this._isNotDateRule(condition))){\n\t\t\tif(this.editFormat && value !== \"\" && value[0] != \"=\"){\n\t\t\t\tvalue = getJsDateFromExcel(value);\n\t\t\t\treturn this.editFormat(value);\n\t\t\t}\n\t\t}\n\t\treturn value.toString();\n\t}\n\n\t_normalizeValue(value, condition){\n\t\tif(!this._isNotDateRule(condition)){\n\t\t\tif(this.editFormat){\n\t\t\t\tif(isNaN(value)){\n\t\t\t\t\tif(value[0] != \"=\"){\n\t\t\t\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\t\t\t\tvalue = parser(value);\n\t\t\t\t\t\tvalue = isNaN(value) ? \"\" : getExcelDateFromJs(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tvalue = isDateInvalid(value) ? \"\" : value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this._safeInt(value, 10);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_isNotDateRule(condition){\n\t\tif(condition == \"equal\" || condition == \"notEqual\")\n\t\t\treturn false;\n\t\treturn find(this.view.conditions.handlers.text, obj => obj.id == condition);\n\t}\n\n\tokClick(){\n\t\tthis._getCondition();\n\t\tthis.close();\n\t}\n\n\t$show(){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst type = getType(this.view, this.cell.row, this.cell.column);\n\n\t\tif(type == \"date\")\n\t\t\tthis.editFormat = getDateEditFormat(this.view, this.cell.row, this.cell.column);\n\n\t\tthis.$dialog.queryView(\"text\", \"all\").forEach(view => {\n\t\t\tview.define({placeholder: type == \"date\" ? this._formatValue(45000) : \"\"});\n\t\t\tview.refresh();\n\t\t});\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tif (this.activeValue && a == b){\n\t\t\t\tthis.activeValue.setValue(\"=\"+a);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tthis._setCondition();\n\t}\n\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tdelete this.editFormat;\n\t\tthis._getDatalayout().clearAll();\n\t}\n\n\tgetRows(data){\n\t\tconst dialog = this;\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tpadding: 0,\n\t\t\tborderless: true,\n\t\t\tcss:\"webix_ssheet_cformats\",\n\t\t\telements: [{\n\t\t\t\tmargin: 10,\n\t\t\t\tpadding: { right: 4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\tname: \"style\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-style\"],\n\t\t\t\t\t\tcss: \"webix_ssheet_cformat_select\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\tpadding:0,\n\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\tcss: \"webix_ssheet_cformat_list\",\n\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\ttemplate(obj) {\n\t\t\t\t\t\t\t\t\tconst css = \"webix_ssheet_cformat \"+obj.css;\n\t\t\t\t\t\t\t\t\treturn `<div class=\"${css}\">${obj.name}</div>`;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tname: \"condition\",\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-operator\"],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newv) {\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\n\t\t\t\t\t\t\t\tif (dialog.editFormat){\n\t\t\t\t\t\t\t\t\tif (dialog._isNotDateRule(newv))\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: \"\"});\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tconst value = dialog._normalizeValue(elements.value.getValue(), newv);\n\t\t\t\t\t\t\t\t\t\telements.value.setValue(dialog._formatValue(value, newv));\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: dialog._formatValue(45000)});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telements.value.refresh();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (newv == \"between\" || newv == \"notBetween\")\n\t\t\t\t\t\t\t\t\telements.value2.show();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\telements.value2.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: this._rulesToArr()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: \"value\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\tname: \"value2\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-trash\", click: vid => {\n\t\t\t\t\t\tconst form = webix.$$(vid).getFormView();\n\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\n\t\t\t\t\t\tconst index = dlayout.getChildViews().indexOf(form);\n\t\t\t\t\t\tdlayout.remove(dlayout.getIdByIndex(index));\n\n\t\t\t\t\t\tif (dlayout.count() < 3) dlayout.add({ });\n\t\t\t\t\t}}\n\t\t\t\t]}\n\t\t\t]};\n\t}\n\n\t$init(){\n\t\tconst margin = webix.skin.$active.layoutMargin.form;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"conditional-format\"],\n\t\t\tposition: \"center\",\n\t\t\twidth: 770,\n\t\t\tmove: true,\n\t\t\tmargin,\n\t\t\tbody: { margin:0, rows:[\n\t\t\t\t{\n\t\t\t\t\theight: 36,\n\t\t\t\t\tpadding: { left: 12 },\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{ view:\"label\", width: 131, label: webix.i18n.spreadsheet.labels.display },\n\t\t\t\t\t\t{ view:\"label\", width: 161, label: webix.i18n.spreadsheet.labels.condition },\n\t\t\t\t\t\t{ view:\"label\", label: webix.i18n.spreadsheet.labels.value },\n\t\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-plus-circle\",\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\t\t\t\t\t\t\t\tdlayout.add({ });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: 4 + webix.env.scrollSize }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"scrollview\",\n\t\t\t\t\tmaxHeight: webix.skin.$active.inputHeight * 3 + 4,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tscroll: \"y\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tview: \"datalayout\",\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\trows: [ this.getRows(getConditionStyle(this.view.config.conditionStyle)) ]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]},\n\t\t\ton: {\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"excel-export\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.sheets.setValue(this.getSheets());\n\t\tform.elements.filename.setValue(\"Data\");\n\t\tform.elements.filename.getInputNode().select();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"export-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"filename\",  placeholder:webix.i18n.spreadsheet.labels[\"export-name\"]},\n\t\t\t\t\t{ view:\"multicheckbox\", name:\"sheets\"}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tgetSheets(){\n\t\tconst view = this.view;\n\t\tconst sheets = view._sheets;\n\t\tlet value = [];\n\n\t\tfor(let i = 0; i < sheets.length; i++)\n\t\t\tvalue.push({\n\t\t\t\tname: sheets[i].name,\n\t\t\t\tactive: view._activeSheet === sheets[i].name ? 1 : 0\n\t\t\t});\n\n\t\treturn value;\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.getBody().getValues();\n\t\twebix.toExcel(this.view, values);\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"add-link\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif(!cell)\n\t\t\treturn false;\n\t\tif (!this.restoreValue(form))\n\t\t\tform.clear();\n\t\tform.elements.name.focus();\n\t}\n\trestoreValue(form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif (cell){\n\t\t\tconst value = this.view.getCellValue(cell.row, cell.column);\n\t\t\tif (value && typeof value == \"string\" && value.indexOf(\"=HYPERLINK\") === 0){\n\t\t\t\tconst parts = value.split(\"\\\"\");\n\t\t\t\tform.setValues({\n\t\t\t\t\tname: (parts[3] || \"\"),\n\t\t\t\t\turl: (parts[1] || \"\")\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"link-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"name\",  placeholder:webix.i18n.spreadsheet.labels[\"link-name\"]},\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"link-url\"]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\n\tokClick(){\n\t\tconst cell = this.view.getSelectedId();\n\t\tconst data = this.$dialog.getBody().getValues();\n\n\t\tlet text = \"\";\n\t\tif (data.url){\n\t\t\tdata.name = data.name || data.url;\n\t\t\tif (!/^https?:\\/\\//i.test(data.url))\n\t\t\t\tdata.url = \"http://\" + data.url;\n\t\t\ttext = `=HYPERLINK(\"${data.url}\",\"${data.name}\")`;\n\t\t}\n\n\t\tthis.view.setCellValue(cell.row, cell.column, text);\n\t\tthis.view.refresh();\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"print\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tform.setValues({\n\t\t\tdata:\"current\",\n\t\t\tpaper:\"A4\",\n\t\t\tfit:\"page\",\n\t\t\tmode:\"landscape\",\n\t\t\tsheetnames:1,\n\t\t\tmargin:0\n\t\t});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"print-title\"],\n\t\t\tmove: true,\n\t\t\tmodal:true,\n\t\t\twidth:530, height:520,\n\t\t\tposition: \"center\",\n\t\t\tbuttons:false,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-settings\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ view:\"radio\", name:\"data\",vertical:true, options:[\n\t\t\t\t\t\t\t{ id:\"current\", value:webix.i18n.spreadsheet.labels[\"current-sheet\"]},\n\t\t\t\t\t\t\t{ id:\"all\", value:webix.i18n.spreadsheet.labels[\"all-sheets\"]},\n\t\t\t\t\t\t\t{ id:\"selection\", value:webix.i18n.spreadsheet.labels[\"selection\"]}\n\t\t\t\t\t\t], on:{\n\t\t\t\t\t\t\tonChange:function(newv){\n\t\t\t\t\t\t\t\tif(newv == \"all\"){\n\t\t\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\t\t\tform.elements.sheetnames.setValue(1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"sheetnames\", labelRight:webix.i18n.spreadsheet.labels[\"sheet-names\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"borderless\", labelRight:webix.i18n.spreadsheet.labels[\"borderless\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"skiprows\", labelRight:webix.i18n.spreadsheet.labels[\"skip-rows\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"margin\", labelRight:webix.i18n.spreadsheet.labels[\"margin\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-paper\"]},\n\t\t\t\t\t{ view:\"radio\", name:\"paper\", options:[\n\t\t\t\t\t\t{ id:\"letter\", value:webix.i18n.spreadsheet.labels[\"page-letter\"]},\n\t\t\t\t\t\t{ id:\"A4\", value:webix.i18n.spreadsheet.labels[\"page-a4\"]},\n\t\t\t\t\t\t{ id:\"A3\", value:webix.i18n.spreadsheet.labels[\"page-a3\"]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-layout\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{view:\"radio\", name:\"fit\", options:[\n\t\t\t\t\t\t\t{ id:\"page\", value:webix.i18n.spreadsheet.labels[\"page-width\"]},\n\t\t\t\t\t\t\t{ id:\"data\", value:webix.i18n.spreadsheet.labels[\"page-actual\"]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ width:25},\n\t\t\t\t\t\t{ view:\"radio\", width:220, name:\"mode\", options:[\n\t\t\t\t\t\t\t{ id:\"portrait\", value:webix.i18n.spreadsheet.labels[\"page-portrait\"]},\n\t\t\t\t\t\t\t{ id:\"landscape\", value:webix.i18n.spreadsheet.labels[\"page-landscape\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{ },\n\t\t\t\t\t\t\t{ view: \"button\", css:\"ssheet_cancel_button\", hotkey:\"esc\",\n\t\t\t\t\t\t\t\tvalue: webix.i18n.spreadsheet.labels.cancel, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.close()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: webix.i18n.spreadsheet.labels.print, hotkey:\"enter\", autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.okClick()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst data = this.$dialog.getBody().getValues();\n\t\tdata.margin = data.margin?0:{};\n\t\tthis.close();\n\t\twebix.print(this.view, data);\n\t}\n}\n","import {Dialog} from \"./common\";\n\nexport const action = \"add-comment\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\t//we get cell only on hover commented cell\n\t\tthis.cell = action.cell ? action.cell : this.view.getSelectedId();\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked and in the edit mode\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column) && !action.viewonly) ||\n\t\t\t// action blocked by user's code\n\t\t\t!(this.view.callEvent(\"onBeforeCommentShow\", [this.cell.row, this.cell.column, !action.viewonly]))){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.view.comments._activeComment = {editStatus: !action.viewonly, cell: this.cell};\n\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.view.comments.commentsView = this.$dialog;\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=>this.$hide());\n\t\t\tthis.view.attachEvent(\"onCommentHide\", ()=>this.$dialog.hide());\n\t\t}\n\n\t\tconst form = this.$dialog.getBody();\n\n\t\tconst span = this.view.$$(\"cells\").getSpan(this.cell.row, this.cell.column);\n\t\tconst item = span ? {row: this.cell.row, column:(span[1]*1+span[2]-1)} : this.cell;\n\n\t\twebix.delay(()=>{\n\t\t\tthis.$dialog.show(this.view.$$(\"cells\").getItemNode(item));\n\t\t\tthis._setComment();\n\t\t});\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\t$show(){\n\t\tthis.textarea = this.$dialog.queryView({view:\"textarea\"});\n\t\tthis.template = this.$dialog.queryView({view:\"template\"});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tcss:\"ssheet_comments\",\n\t\t\tminWidth:250,\n\t\t\tminHeight:150,\n\t\t\trelative:\"right\",\n\t\t\tresize:true,\n\t\t\ton:{\n\t\t\t\tonViewResize:()=>{\n\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\tthis.$dialog.show();\n\t\t\t\t\tif(this.textarea.isVisible())\n\t\t\t\t\t\tthis.textarea.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tanimate:false,\n\t\t\t\tcells:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"template\",\n\t\t\t\t\t\tcss:\"ssheet_comment_view\",\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\tscroll:\"auto\",\n\t\t\t\t\t\tonClick:{\n\t\t\t\t\t\t\t\"ssheet_comment_view\":() => {\n\t\t\t\t\t\t\t\tif(!(this.view.config.readonly || this.view.isCellLocked(this.cell.row, this.cell.column)))\n\t\t\t\t\t\t\t\t\tthis.showInput(this.view.comments.get(this.cell.row, this.cell.column));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange:()=>{\n\t\t\t\t\t\t\t\tthis.addComment();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {editStatus: true, cell: this.cell};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonBlur:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {};\n\t\t\t\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\t_setComment(){\n\t\tconst comment = this.view.comments.get(this.cell.row, this.cell.column);\n\t\tif(this.view.comments._activeComment.editStatus)\n\t\t\tthis.showInput(comment);\n\t\telse\n\t\t\tthis.showTemplate(comment);\n\t}\n\tshowTemplate(text){\n\t\tthis.template.show();\n\t\tthis.template.setHTML(text);\n\t}\n\tshowInput(text){\n\t\tthis.view.$$(\"cells\").select(this.cell.row, this.cell.column);\n\t\twebix.delay(()=>{\n\t\t\tthis.changeTextarea(text);\n\t\t\tthis.textarea.show();\n\t\t\tthis.textarea.focus();\n\t\t});\n\t}\n\taddComment(){\n\t\tthis.view.comments.add(this.cell.row, this.cell.column, this.textarea.getValue());\n\t}\n\tchangeTextarea(text){\n\t\tthis.textarea.blockEvent();\n\t\tthis.textarea.setValue(text||\"\");\n\t\tthis.textarea.unblockEvent();\n\t}\n}","import {Dialog} from \"./common\";\nexport const action = \"resize\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.group = action.group;\n\t\tthis.header = action.value;\n\t\tDialog.prototype.open.apply(this, arguments);\n\t}\n\t$show(){\n\t\tconst sel = this.view.getSelectedId();\n\t\tif(!sel)\n\t\t\treturn false;\n\t\tthis.view.$handleSelection = ()=>{\n\t\t\treturn false;\n\t\t};\n\n\t\tconst elements = this.$dialog.getBody().elements;\n\t\tthis.type = elements[\"type\"];\n\t\tthis.size = elements[\"size\"];\n\n\t\tthis.$dialog.getHead().getChildViews()[0].setHTML(this.header);\n\t\tconst grid = this.view.$$(\"cells\");\n\n\t\tlet value;\n\t\tif(this.group == \"row\")\n\t\t\tvalue = grid.getItem(sel.row).$height || grid.config.rowHeight;\n\t\telse\n\t\t\tvalue = grid.getColumnConfig(sel.column).width || grid.config.columnWidth;\n\n\t\tthis.type.getOption(1).value = webix.i18n.spreadsheet.labels[this.group == \"row\" ? \"height\" : \"width\"];\n\t\tthis.type.setValue(1);\n\t\tthis.type.refresh();\n\n\t\tthis.size.setValue(value);\n\t\tthis.size.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\tokClick(){\n\t\tconst type = this.type.getValue();\n\n\t\tlet size = \"auto\";\n\t\tif(type == 1)\n\t\t\tsize = this.size.getValue()*1;\n\t\telse if(type == 3)\n\t\t\tsize = this.view.$$(\"cells\").config[this.group == \"row\" ? \"rowHeight\" : \"columnWidth\"];\n\n\t\tif(this.group == \"row\")\n\t\t\tthis.view.setRowHeight(null, size);\n\t\telse\n\t\t\tthis.view.setColumnWidth(null, size);\n\n\t\tthis.close();\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth: 300,\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"radio\", name:\"type\", vertical:true, optionHeight:40,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange: id => {\n\t\t\t\t\t\t\t\tif(id == 1)\n\t\t\t\t\t\t\t\t\tthis.size.enable();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tthis.size.disable();\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:1, value: \"\"},\n\t\t\t\t\t\t\t{id:2, value: locale[\"fit-content\"]},\n\t\t\t\t\t\t\t{id:3, value: locale[\"default-size\"]},\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{rows: [\n\t\t\t\t\t\t{view:\"text\", name: \"size\", width:120},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import * as imc from \"./imagecell\";\nimport * as imt from \"./imagetop\";\nimport * as asw from \"./sparkline\";\nimport * as rgs from \"./ranges\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as fmt from \"./format\";\nimport * as cnd from \"./conditional\";\nimport * as exp from \"./export\";\nimport * as lnk from \"./link\";\nimport * as pnt from \"./print\";\nimport * as cmt from \"./comments\";\nimport * as siz from \"./sizing\";\n\nconst bases = [ imt, imc, asw, rgs, dpd, flt, fmt, cnd, exp, lnk, pnt, cmt, siz ];\n\nexport function init(view){\n\tconst dialogs = {};\n\tconst viewBases = view.config.readonly ? [cmt] : bases;\n\n\tfor (let i = 0; i < viewBases.length; i++)\n\t\tdialogs[viewBases[i].action] = new viewBases[i].DialogBox(view);\n\n\tview.attachEvent(\"onCommand\", function(action){\n\t\tconst box = dialogs[action.id];\n\t\tif (box) box.open(action);\n\t});\n\n\tview.attachEvent(\"onAction\", function(id, values){\n\t\t//hide win when the external ui is removed\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tconst box = dialogs[\"add-image-top\"];\n\t\t\tif(box && box.viewid == values.row){\n\t\t\t\tbox.close();\n\t\t\t}\n\t\t}\n\t});\n}","import {isCellLocked} from \"./lock_cell\";\nimport group from \"./undo_group\";\n\n\nvar ignoreUndoReset = false;\n\nexport function init(view){\n\treset(view);\n\tundoHandlers(view);\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\tview.attachEvent(\"onAfterSheetShow\", () => reset(view));\n\t// styles\n\tview.attachEvent(\"onBeforeStyleChange\", (row, column, nstyle, ostyle) =>{\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"style\", row:row, column: column, value: ostyle, newValue: nstyle, group: group.value});\n\t});\n\t// editing\n\tview.attachEvent(\"onBeforeValueChange\", (row, column, nvalue, ovalue) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"value\", row:row, column: column, value: ovalue, newValue: nvalue, group: group.value});\n\t});\n\t// merge cells\n\tview.attachEvent(\"onBeforeSpan\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"span\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// split cells\n\tview.attachEvent(\"onBeforeSplit\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"split\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// Any abstract undo actions\n\tview.attachEvent(\"onAction\", (action, obj) =>\n\t\taddToHistory(\n\t\t\tview,\n\t\t\t{\n\t\t\t\taction: action,\n\t\t\t\trow: obj.row || null,\n\t\t\t\tcolumn: obj.column || null,\n\t\t\t\tvalue: obj.value || null,\n\t\t\t\tnewValue: obj.newValue || null,\n\t\t\t\tgroup: group.value\n\t\t\t}\n\t\t)\n\t);\n\n\t// column resize\n\tview.$$(\"cells\").attachEvent(\"onColumnResize\", (column, nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"c-resize\", row:0, column:column, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\t// column hide\n\tview.attachEvent(\"onColumnOperation\", (action, start, end) => {\n\t\tif (action !== \"add\" && action !== \"del\")\n\t\t\taddToHistory(view, { action:{id: action, group:\"column\"}, group: group.value, column: {\n\t\t\t\tstart: { column:start }, end: { column:end }\n\t\t\t}});\n\t});\n\t// row hide\n\tview.attachEvent(\"onRowOperation\", (action, start, end) => {\n\t\tif (action !== \"add\" && action !== \"del\")\n\t\t\taddToHistory(view, { action: {id: action, group:\"row\"}, group: group.value, row: {\n\t\t\t\tstart: {row: start}, end: {row: end}\n\t\t\t}});\n\t});\n\t// row resize\n\tview.$$(\"cells\").attachEvent(\"onRowResize\", (row,  nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"r-resize\", row: row, column:0, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\n\t// condition formats\n\tview.attachEvent(\"onBeforeConditionSet\", (row, column, value, nvalue) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\n\t\tvalue = value ? webix.copy(value) : null;\n\t\taddToHistory(view, {action: \"condition\", row: row, column: column, value: value, newValue: nvalue, group: group.value});\n\t});\n\tview.$skipHistory = 0;\n}\n\nexport function undo(view){\n\trestoreHistory(view,-1);\n}\n\nexport function redo(view){\n\trestoreHistory(view,1);\n}\n\nexport function reset(view){\n\tif(!ignoreUndoReset){\n\t\tview._ssUndoHistory = [];\n\t\tview._ssUndoCursor = -1;\n\t}\n}\n\nfunction addToHistory(view, data){\n\tif(!view.$skipHistory && !view._loading_data){\n\t\t// remove futher history\n\t\tview._ssUndoHistory.splice(view._ssUndoCursor+1);\n\t\t// add to an array and increase cursor\n\t\tview._ssUndoHistory.push(data);\n\t\tview._ssUndoCursor++;\n\t}\n}\n\nexport function ignoreUndo(func, view){\n\tview.$skipHistory++;\n\ttry{\n\t\tfunc.call(view);\n\t}\n\tfinally {\n\t\tview.$skipHistory--;\n\t}\n}\n\nexport function ignoreReset(func){\n\tignoreUndoReset = true;\n\tfunc();\n\tignoreUndoReset = false;\n}\n\nfunction restoreHistory(view, step){\n\tvar data = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\tif(data){\n\t\tvar value = step > 0 ? data.newValue : data.value;\n\t\tvar direction = step>0;\n\t\tvar params = [data.action, data.row, data.column, value, direction];\n\n\t\tview._ssUndoCursor += step;\n\n\t\t// group support\n\t\tvar group = data.group;\n\t\tvar prevData = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\n\t\tignoreUndo(function(){\n\t\t\tview.callEvent(\"onUndo\", params);\n\t\t\tif (!group || !(prevData && group == prevData.group)){\n\t\t\t\tview.refresh();\n\t\t\t\tview.callEvent(\"onAfterUndo\", []);\n\t\t\t}\n\t\t},view);\n\n\t\tif(prevData && group && group == prevData.group){\n\t\t\trestoreHistory(view, step);\n\t\t}\n\t}\n}\n\nfunction undoHandlers(view){\n\tview.attachEvent(\"onUndo\", function(type, row, column, value) {\n\t\tswitch (type) {\n\t\t\tcase \"freeze-row\":\n\t\t\t\tview.freezeRows(value);\n\t\t\t\tbreak;\n\t\t\tcase \"freeze-column\":\n\t\t\t\tview.freezeColumns(value);\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import {range, toRange, changeRange, encode, isRange} from \"../helpers/column_names\";\nimport {ignoreUndo} from \"./undo\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tconst grid = view._table.$view.querySelector(\".webix_ss_center\");\n\n\tview.views = {\n\t\tregister:function(type, render, track){\n\t\t\tif(!this._types[type])\n\t\t\t\tthis._types[type] = { render:render, track:track };\n\t\t},\n\t\tmove: function(id, x, y){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst old = webix.copy(this._pull[id]);\n\t\t\tthis._pull[id].x = _correctPos(view, win, x, \"x\");\n\t\t\tthis._pull[id].y = _correctPos(view, win, y, \"y\");\n\t\t\tview.callEvent(\"onAction\", [\"move-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t\t_showOne(view, win, this._pull[id]);\n\t\t},\n\t\tadd: function(x, y, type, data, config, id){\n\t\t\tconfig = config || {};\n\t\t\tif(type == \"chart\"){\n\t\t\t\tconfig = webix.extend(config, {\n\t\t\t\t\ttype: \"line\",\n\t\t\t\t\tdataSeries:\"columns\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst height =  config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tconst win = webix.ui({ \n\t\t\t\tid:id || \"$ssheet-ui\"+webix.uid(), // fixed id is for undo only\n\t\t\t\tview: \"ssheet-ui\",\n\t\t\t\tcontainer:grid, master:view._table.config.id,\n\t\t\t\twidth:width, height:height\n\t\t\t});\n\n\t\t\twin.attachEvent(\"onViewMoveEnd\", (x, y) => {\n\t\t\t\tconst state = view._table.getScrollState();\n\t\t\t\tthis.move(id, x, y+state.y);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewResize\", () => {\n\t\t\t\tconst conf =  this._pull[id];\n\t\t\t\tconst old = webix.copy(conf);\n\n\t\t\t\tconf.config.height = win.$height;\n\t\t\t\tconf.config.width = win.$width;\n\t\t\t\tview.callEvent(\"onAction\", [\"resize-view\", { row:id, newValue:webix.copy(conf), value:old } ]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewEdit\", () => {\n\t\t\t\tconst config = this._pull[id];\n\t\t\t\tconst command = this._commands[config.type] || config.type;\n\t\t\t\tview.callEvent(\"onCommand\", [{ id:command, viewid:id, config }]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewRemove\", () => this.remove(id));\n\n\t\t\tid = win.config.id;\n\n\t\t\tx = _correctPos(view, win, x, \"x\");\n\t\t\ty = _correctPos(view, win, y, \"y\");\n\n\t\t\tthis._pull[id] = { x, y, type, data, config };\n\t\t\tthis.update(id, data, config, true);\n\t\t\t_showOne(view, win, this._pull[id]);\n\n\t\t\treturn id; \n\t\t},\n\t\tremove: function(id){\n\t\t\tconst old = this._pull[id];\n\t\t\twebix.$$(id).close();\n\t\t\tdelete this._pull[id];\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:null, value:old } ]);\n\t\t},\n\t\tget:function(id){\n\t\t\treturn webix.$$(id).getBody();\n\t\t},\n\t\tgetConfig:function(id){\n\t\t\treturn this._pull[id];\n\t\t},\n\t\tupdate:function(id, data, config, inner){\n\t\t\tconst old = inner ? null : webix.copy(this._pull[id]);\n\t\t\tconst conf = this._pull[id];\n\t\t\tconst actions = this._types[conf.type];\n\n\t\t\tdata = data || config.data || \"\";\n\t\t\tconfig = config || {};\n\n\t\t\tdelete config.data;\n\n\t\t\tif(conf.type == \"chart\"){\n\t\t\t\tconst type = config.type;\n\t\t\t\tif(type && !_isPie(type) && !config.series){\n\t\t\t\t\tconst xAxis = config.xAxis && config.xAxis.range;\n\t\t\t\t\tconst legend = config.legend && config.legend.range;\n\n\t\t\t\t\tconst oldXaxis = old && old.config && old.config.xAxis && old.config.xAxis.fromData;\n\n\t\t\t\t\tconfig.series = _getSeries(view, data, config.dataSeries, {xAxis, legend}, oldXaxis);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst win = webix.$$(id);\n\n\t\t\tconst height = config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tif(win.$width != width && win.$height != height){\n\t\t\t\twin.define({width, height});\n\t\t\t\twin.resize();\n\t\t\t}\n\n\t\t\tconf.data = data;\n\t\t\tconf.config = config;\n\n\t\t\tlet node = this.get(id);\n\n\t\t\tdata = _fromRange(view, conf);\n\n\t\t\tif(actions.render){\n\t\t\t\tconst renderConfig = webix.copy(conf);\n\n\t\t\t\t//clear width and height for inner view resizing\n\t\t\t\trenderConfig.config.width = renderConfig.config.height = 0;\n\n\t\t\t\tnode = actions.render(node, renderConfig, data);\n\t\t\t\t_processTables(node);\n\t\t\t}\n\n\t\t\tif(actions.track)\n\t\t\t\t_trackOne(view, node, actions.track, conf);\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t},\n\t\thighlight:function(id){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst css = \"webix_ssheet_ui_focused\";\n\n\t\t\tconst oldWin = webix.$$(this._activeWin);\n\t\t\tif(oldWin && !oldWin.$destructed)\n\t\t\t\twebix.html.removeCss(oldWin.$view, css);\n\n\t\t\tif(win){\n\t\t\t\tthis._activeWin = id;\n\t\t\t\twebix.html.addCss(win.$view, css);\n\t\t\t}\n\t\t\telse\n\t\t\t\tdelete this._activeWin;\n\t\t},\n\t\t_commands:{\n\t\t\t\"image\":\"add-image-top\",\n\t\t\t\"chart\":\"add-chart\"\n\t\t},\n\t\t_types:{},\n\t\t_pull:{}\n\t};\n\n\t// handle events\n\tview._table.attachEvent(\"onResize\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollY\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollX\", () => _showAll(view) );\n\n\tview.attachEvent(\"onReset\", () => _reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tconst move = type === \"move-view\";\n\t\tif (move || type == \"resize-view\" || type === \"add-view\")\n\t\t\t_undoUI(view, move, row, value);\n\t});\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif(action == \"header-hide\")\n\t\t\t_showAll(view);\n\t\telse if(action == \"before-grid-change\")\n\t\t\t_updateData(view, p.name, p.inc, p.data, p.start);\n\t});\n\tview.attachEvent(\"onColumnOperation\", () =>  _showAll(view, true));\n\tview.attachEvent(\"onRowOperation\", () => _showAll(view, true));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\tview.attachEvent(\"onCellChange\", () => _trackAll(view));\n\tview.attachEvent(\"onMathRefresh\", () => _trackAll(view));\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\tfor(let i in view.views._pull) webix.$$(i).destructor();\n\t});\n\n\tlet editUIType;\n\twebix.attachEvent(\"onClick\", function(ev){\n\t\tlet focus = webix.$$(ev);\n\t\tif(focus && focus.config.externalUI)\n\t\t\tfocus = webix.$$(focus.config.externalUI);\n\n\t\tconst ui = focus && (focus.queryView(\"ssheet-ui\",\"self\") || focus.queryView(\"ssheet-ui\",\"parent\"));\n\n\t\tif(ui){\n\t\t\tview.views.highlight(ui);\n\t\t\tconst id = ui.config.id;\n\n\t\t\tif(editUIType){\n\t\t\t\tif(view.views.getConfig(id).type == editUIType)\n\t\t\t\t\tui.callEvent(\"onViewEdit\", []); //start editing if any editor is open\n\t\t\t\telse\n\t\t\t\t\tview.callEvent(\"onCommand\", [{ id:\"close-ui-editor\" }]);\n\t\t\t}\n\t\t}\n\t\telse if(!editUIType)\n\t\t\tview.views.highlight();\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", function(id, type){\n\t\tview.views.highlight(id);\n\t\teditUIType = type;\n\t});\n\n\tview.attachEvent(\"onUIEditStop\", function(id, type){\n\t\tif(editUIType == type)\n\t\t\twebix.delay(()=>{ // after onClick handler (to save focus)\n\t\t\t\teditUIType = null;\n\t\t\t});\n\t});\n\n\t// set default views\n\tview.views.register(\"chart\", (node, conf, data) => {\n\t\tconst dataRange = _getNames(view, conf);\n\t\tconst config = _genChartConfig(conf, data, dataRange);\n\t\treturn webix.ui(config, node);\n\t}, (view, data) => {\n\t\tview.clearAll();\n\t\tview.parse(data);\n\t});\n\n\tview.views.register(\"image\", (node, conf, data) => {\n\t\tconst config = webix.extend({ css:\"webix_ssheet_bgimage\", template:`<img src=\"${data}\"/>` }, conf.config||{}, true );\n\t\treturn webix.ui(config, node);\n\t});\n}\n\nfunction _parse(view, data){\n\tconst views = data.views;\n\tif(views){\n\t\tignoreUndo(function(){\n\t\t\tviews.forEach(obj => view.views.add.apply(view.views, obj));\n\t\t}, view);\n\t}\n}\n\nfunction _serialize(view, data, config){\n\tdata.views = [];\n\tfor(let i in view.views._pull){\n\t\tconst conf = view.views._pull[i];\n\t\tconst one = [conf.x, conf.y, conf.type, conf.data, conf.config];\n\t\tif(config && config.viewIds)\n\t\t\tone.push(i);\n\t\tdata.views.push(one);\n\t}\n}\n\nlet thread;\nfunction _trackAll(view){\n\tclearTimeout(thread);\n\tthread = webix.delay(() => {\n\t\tconst ui = view.views;\n\t\tfor(let id in ui._pull){\n\t\t\tconst conf = ui._pull[id];\n\n\t\t\tconst viewMethods = ui._types[conf.type];\n\t\t\tconst render = viewMethods.render;\n\t\t\tconst track = viewMethods.track;\n\n\t\t\tif(track)\n\t\t\t\t_trackOne(view, ui.get(id), track, conf, render);\n\t\t}\n\t});\n}\n\nfunction _trackOne(view, node, track, conf, render){\n\tconst data = _fromRange(view, conf);\n\n\tif(conf.type == \"chart\"){\n\t\tif(render)\n\t\t\tnode = render(node, conf, data, true);\n\n\t\tconst config = conf.config;\n\t\tif(config && !_isPie(config.type))\n\t\t\t_removeLegend(data, conf, view);\n\t}\n\n\ttrack(node, data);\n}\n\nfunction _updateData(view, name, inc, data, start){\n\tconst views = data.views;\n\tfor(let i = 0; i < views.length; i++){\n\t\tif(_isRange(views[i][3])){\n\t\t\tconst series = views[i][4].series;\n\t\t\tif(series){\n\t\t\t\tseries.forEach(obj => {\n\t\t\t\t\tobj.range = changeRange(obj.range, name, inc, start);\n\t\t\t\t\tobj.active = changeRange(obj.active, name, inc, start);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst legend = views[i][4].legend && views[i][4].legend.range;\n\t\t\tif(legend)\n\t\t\t\tviews[i][4].legend.range = _getDataParts(legend).map(range => changeRange(range, name, inc, start)).join(\",\");\n\n\t\t\tconst xAxis = views[i][4].xAxis && views[i][4].xAxis.range;\n\t\t\tif(xAxis)\n\t\t\t\tviews[i][4].xAxis.range = changeRange(xAxis, name, inc, start);\n\n\t\t\tviews[i][3] = _getDataParts(views[i][3]).map(range => changeRange(range, name, inc, start)).join(\",\");\n\t\t}\n\t}\n}\n\nfunction _showAll(view, pos){\n\t//close possibly open menus of embedded ui\n\twebix.callEvent(\"onClick\", []);\n\n\tfor(let id in view.views._pull){\n\t\tconst win = webix.$$(id);\n\t\tconst conf = view.views._pull[id];\n\t\tif(pos){\n\t\t\tconf.x = _correctPos(view, win, conf.x, \"x\");\n\t\t\tconf.y = _correctPos(view, win, conf.y, \"y\");\n\t\t}\n\t\t_showOne(view, win, conf);\n\t}\n}\n\nfunction _showOne(view, win, conf){\n\tconst state = view._table.getScrollState();\n\n\twin.show({\n\t\tx:conf.x,\n\t\ty:conf.y-state.y\n\t});\n}\n\nfunction _correctPos(view, win, v, type){\n\tif(!v && v !==0 )\n\t\tv = view._table.getScrollState()[type]+50;\n\telse{\n\t\tconst size = type == \"x\" ? _getWidth(view)-win.$width : _getHeight(view)-win.$height;\n\t\tv = Math.min(Math.max(v, 0), size);\n\t}\t\n\treturn v;\n}\n\nfunction _reset(view){\n\tignoreUndo(function(){\n\t\tfor(let id in view.views._pull)\n\t\t\tview.views.remove(id);\n\t}, view);\n}\n\nfunction _undoUI(view, move, id, value){\n\tif(value){\n\t\tconst {x, y, type, data, config} = value;\n\t\tif(view.views._pull[id]){\n\t\t\tif(move)\n\t\t\t\tview.views.move(id, x, y);\n\t\t\telse\n\t\t\t\tview.views.update(id, data, config);\n\t\t}\n\t\telse\n\t\t\tview.views.add(x, y, type, data, config, id);\n\n\t\tconst editor = view.$$(\"chartEditor\");\n\t\tif(editor && editor.viewId == id)\n\t\t\teditor.queryView(\"form\").setValues(config);\n\t}\n\telse\n\t\tview.views.remove(id);\n}\n\nfunction _getWidth(view){\n\tlet width = 0;\n\tview._table.eachColumn(function(id){\n\t\tif(id !== \"rowId\")\n\t\t\twidth += this.getColumnConfig(id).width;\n\t});\n\treturn width;\n}\n\nfunction _getHeight(view){\n\tlet height = 0;\n\tview._table.data.each(function(obj){\n\t\theight += obj.$height || webix.skin.$active.rowHeight;\n\t});\n\treturn height;\n}\n\n//disable datatables not to interfere with ss table events\nfunction _processTables(node){\n\tconst query = function(view){\n\t\treturn view.name == \"datatable\" || view.name == \"treetable\";\n\t};\n\tlet tables = node.queryView(query, \"self\");\n\tif(tables) tables = [tables];\n\telse tables = node.queryView(query, \"all\");\n\ttables.forEach((dt) => dt.disable());\n}\n\n/* chart-specific helpers */\n\nfunction _genChartConfig(conf, data, dataRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\tlet config = webix.copy(conf.config);\n\n\tconfig = _normalizeConfig(config);\n\n\tconst scale = config.scale.lines;\n\tconst scaleColor = config.scale.color || undefined;\n\n\tconst type = config.type;\n\n\tif(_isPie(type))\n\t\tdelete config.series;\n\n\tconst legendConfig = config.legend;\n\tlet legendRange = !legendConfig.fromData && legendConfig.range;\n\tif(legendRange){\n\t\tconst switchDirection =  config.dataSeries == \"rows\";\n\t\tlegendRange = _getParts(legendConfig.range, switchDirection, dataRange);\n\t}\n\n\tconst legend = {\n\t\theight:24,\n\t\talign: legendConfig.align || \"center\",\n\t\tvalign: legendConfig.valign || \"bottom\"\n\t};\n\n\tlegend.layout = legend.valign == \"middle\" ? \"y\" : \"x\";\n\n\tif(_isPie(type))\n\t\t_pieConfig(data, config, legend, legendRange);\n\telse if(config.series){\n\t\tlegend.values = [];\n\n\t\tconst lines = config.series;\n\t\tconfig.series = [];\n\n\t\tconst xAxis = config.xAxis;\n\t\tif(xAxis.fromData)\n\t\t\txAxis.range = legendRange ? Object.keys(data[0]).filter(line => legendRange.indexOf(line) == -1)[0] : \"data0\";\n\t\telse if(xAxis.range)\n\t\t\txAxis.range = dataRange[xAxis.range];\n\n\t\tfor(let i = 0; i < lines.length; i++){\n\t\t\tconst color = lines[i].color;\n\t\t\tconst item = dataRange[lines[i].range];\n\n\t\t\tif(item != xAxis.range){\n\t\t\t\tconst s = {\n\t\t\t\t\tvalue:`#${item}#`,\n\t\t\t\t\tlabel: lines[i].label ? `#${item}#` : \"\",\n\t\t\t\t\ttooltip:{\n\t\t\t\t\t\ttemplate: lines[i].tooltip ? `#${item}#` : \"\"\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif(type == \"radar\" || type == \"line\" || type == \"spline\"){\n\t\t\t\t\ts.line = { color:color };\n\t\t\t\t\ts.item = { borderColor:color, type:lines[i].marker };\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\ts.color = color;\n\t\t\t\tif(type == \"area\" || type == \"splineArea\")\n\t\t\t\t\ts.alpha = 0.7;\n\n\t\t\t\tif(data[0] && (legendRange || legendConfig.fromData)){\n\t\t\t\t\tconst val = legendRange ? data[0][legendRange[i]] : data[0][item];\n\t\t\t\t\tconst text = (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t\t\tlegend.values.push({text, color});\n\t\t\t\t}\n\n\t\t\t\tconfig.series.push(s);\n\t\t\t}\n\t\t}\n\n\t\tconfig.xAxis = {\n\t\t\ttemplate: obj => {\n\t\t\t\tconst val = obj[xAxis.range];\n\t\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t},\n\t\t\ttitle: config.xAxis.title,\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale\n\t\t};\n\n\t\tif(legend.values.length)\n\t\t\tconfig.legend = legend;\n\t\telse\n\t\t\tdelete config.legend;\n\t}\n\n\tconfig.yAxis = config.yAxis||{};\n\tfor(let property in config.yAxis)\n\t\tif(config.yAxis[property] === \"\")\n\t\t\tdelete config.yAxis[property];\n\n\tconfig.yAxis = webix.extend(config.yAxis, {\n\t\tlineColor: scaleColor,\n\t\tcolor: scaleColor,\n\t\tlines: scale,\n\t\tlineShape: config.scale.circle ? \"arc\" : \"default\"\n\t});\n\n\treturn webix.extend({\n\t\tview:\"chart\",\n\t\tpadding:{\n\t\t\tleft:80\n\t\t}\n\t}, config, true);\n}\n\nfunction _pieConfig(data, config, legend, legendRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\n\tif(config.legend.fromData){\n\t\tlegend.template = obj => {\n\t\t\tconst val = obj[\"data0\"];\n\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t};\n\t\tconfig.value = \"#data1#\";\n\t}\n\telse{\n\t\tif(config.legend.range)\n\t\t\tlegend.template = obj => {\n\t\t\t\tconst val = obj[legendRange[0]];\n\t\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t};\n\t\tconfig.value = \"#data0#\";\n\t}\n\n\tif(legend.template)\n\t\tconfig.legend = legend;\n\telse\n\t\tdelete config.legend;\n\n\tif(config.pieInnerText)\n\t\tconfig.pieInnerText = config.value;\n}\n\nfunction _isRange(data){\n\treturn typeof data == \"string\" && data.indexOf(\"data:image\") === -1;\n}\n\nfunction _fromRange(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn data;\n\n\tconst arr = [];\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\tfor(let i = 0; i < subdata[0].length; i++){\n\t\t\t\t\t\tif(!arr[i])\n\t\t\t\t\t\t\tarr[i] = {};\n\t\t\t\t\t\twebix.extend(arr[i], subdata[0][i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn arr;\n}\n\nfunction _removeLegend(arr, conf, view){\n\tconst config = conf.config;\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconst legend = config.legend;\n\n\tif(legend.fromData)\n\t\tarr.shift();\n\telse if(legend.range){\n\t\tconst names = _getNames(view, conf);\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tconst legendRange = _getParts(legend.range, switchDirection, names);\n\t\tfor (let i = 0; i < legendRange.length; i++){\n\t\t\tconst item = legendRange[i];\n\t\t\tdelete arr[0][item];\n\t\t}\n\t}\n}\n\nfunction _getNames(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn;\n\n\tlet names = {};\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\twebix.extend(names, subdata[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn names;\n}\n\nexport function _getDataParts(data){\n\treturn data.replace(/\\s/g, \"\").split(\",\");\n}\n\nexport function _isPie(type){\n\treturn /pie|donut/.test(type);\n}\n\nexport function _getSeries(view, data, dataSeries, active, oldXaxis){\n\tconst dir = dataSeries == \"rows\";\n\tlet vals = [];\n\n\tif(data){\n\t\tlet xAxis = [];\n\t\tlet legend = [];\n\t\tlet activeVals = [];\n\n\t\tif(active){\n\t\t\tif(active.legend)\n\t\t\t\tlegend = _getParts(active.legend, dir);\n\t\t\tif(active.xAxis)\n\t\t\t\txAxis = _getParts(active.xAxis, dir);\n\t\t\tif(active.series)\n\t\t\t\tactiveVals = active.series.filter(val => legend.indexOf(val.range) == -1 && xAxis.indexOf(val.range) == -1);\n\t\t}\n\n\t\tdata = _getDataParts(data);\n\t\tlet colorIndex = 0;\n\t\tlet firstRange = 1;\n\t\tdata.forEach(subdata => {\n\t\t\tconst series = isRange(subdata) ? range(subdata, view) : null;\n\t\t\tif(series){\n\t\t\t\tconst start = dir ? series[0] : series[1];\n\t\t\t\tconst end = dir ? series[2] : series[3];\n\n\t\t\t\tlet inActiveSeries;\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tconst seria = arr.find(activeVals, val => val.range == range && (!val.active || val.active == subdata));\n\n\t\t\t\t\tif(seria){\n\t\t\t\t\t\tif(!seria.active)\n\t\t\t\t\t\t\tseria.active = subdata;\n\t\t\t\t\t\tinActiveSeries = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tif(legend.indexOf(range) != -1 || xAxis.indexOf(range) != -1)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst activeVal = activeVals.filter(val => val.range == range && val.active == subdata)[0];\n\n\t\t\t\t\tif(inActiveSeries && !activeVal && !(oldXaxis && firstRange && i == start))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvals.push(activeVal || {\n\t\t\t\t\t\tactive: subdata,\n\t\t\t\t\t\trange,\n\t\t\t\t\t\tmarker: \"square\",\n\t\t\t\t\t\ttooltip: 1,\n\t\t\t\t\t\tcolor: _getColor(colorIndex)\n\t\t\t\t\t});\n\n\t\t\t\t\tcolorIndex++;\n\t\t\t\t}\n\t\t\t\tfirstRange = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn vals;\n}\n\nexport function _getParts(ranges, dir, dataRange){\n\tconst parts = [];\n\n\tranges = _getDataParts(ranges);\n\tranges.forEach(subRange => {\n\t\tsubRange = isRange(subRange) ? range(subRange) : null;\n\t\tif(subRange){\n\t\t\tconst start = dir ? subRange[0] : subRange[1];\n\t\t\tconst end = dir ? subRange[2] : subRange[3];\n\n\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\tconst range = dir ?\n\t\t\t\t\ttoRange(i, subRange[1], i, subRange[3], subRange[4]):\n\t\t\t\t\ttoRange(subRange[0], i, subRange[2], i, subRange[4]);\n\n\t\t\t\tparts.push(dataRange ? dataRange[range] : range);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn parts;\n}\n\nexport function _normalizeConfig(config){\n\tif(typeof(config.xAxis) != \"object\")\n\t\tconfig.xAxis = {fromData: !!config.xAxis};\n\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconfig.legend = webix.extend(config.legend, {\n\t\tlayout:\"x\",\n\t\talign:\"center\",\n\t\tvalign:\"bottom\"\n\t});\n\n\tif(!config.scale)\n\t\tconfig.scale = {\n\t\t\tlines:1\n\t\t};\n\n\treturn config;\n}\n\nfunction _getColor(index){\n\tconst colors = [\n\t\t\"#e06666\", \"#6aa84f\", \"#3c78d8\", \"#e69138\", \"#783f04\", \"#134f5c\", \"#674ea7\", \"#c27ba0\"\n\t];\n\treturn colors[index%colors.length];\n}\n\nfunction getRangeCols(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = r1, rind = 0; i <= r2; i++, rind++){\n\t\tdata[rind] = {};\n\t\tfor (let j = c1, cind = lastIndex; j <= c2; j++, cind++){\n\t\t\tif(i == r2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[j]}${r1}:${encode[j]}${r2}`] = `data${cind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[rind][`data${cind}`] = this.getValue(i-1,j-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}\n\nfunction getRangeRows(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = c1, cind = 0; i <= c2; i++, cind++){\n\t\tdata[cind] = {};\n\t\tfor (let j = r1, rind = lastIndex; j <= r2; j++, rind++){\n\t\t\tif(i == c2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[c1]}${j}:${encode[c2]}${j}`] = `data${rind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[cind][`data${rind}`] = this.getValue(j-1,i-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}","import {range, toRange} from \"./helpers/column_names\";\nimport {_getSeries, _isPie, _normalizeConfig, _getDataParts} from \"./operations/views\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tconst activeSkin = webix.skin.$active;\n\tconst padding = activeSkin.dataPadding-2;\n\tconst margin = activeSkin.layoutMargin.form;\n\n\treturn {\n\t\twidth:440,\n\t\thidden: true,\n\t\tid:\"chartEditor\",\n\t\tcss:\"ssheet_chart\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: activeSkin.barHeight,\n\t\t\t\tcss: \"ssheet_chart_wizard_head\",\n\t\t\t\tpadding:{ left: 2 },\n\t\t\t\tcols: [\n\t\t\t\t\t{ view: \"icon\", hotkey:\"esc\", icon:\"webix_ssheet_icon ssi-arrow-left\", click: () => closeEditor(view)  },\n\t\t\t\t\t{ type:\"header\", borderless:true, template: labels[\"chart-edit\"] }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"form\",\n\t\t\t\tcomplexData:true,\n\t\t\t\tborderless: true,\n\t\t\t\tpadding:{\n\t\t\t\t\ttop: 0\n\t\t\t\t},\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\telements:[{\n\t\t\t\t\tview:\"tabview\",\n\t\t\t\t\tid:\"chartTabs\",\n\t\t\t\t\tcells:[\n\t\t\t\t\t\t{ id:\"common\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-common\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\taddRichselect(\"type\", \"chart-type\", getTypes()),\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"stacked-chart\"], name:\"stacked\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-3d\"], name:\"3D\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-col-xAxis\"], name:\"xAxis.fromData\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-text\"], name:\"pieInnerText\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-row-legend\"], name:\"legend.fromData\"},\n\t\t\t\t\t\t\t\t\t{ view:\"radio\", label:labels[\"chart-data-from\"], name:\"dataSeries\", vertical:true, options:[\n\t\t\t\t\t\t\t\t\t\t{id:\"columns\", value:labels[\"chart-columns\"]},\n\t\t\t\t\t\t\t\t\t\t{id:\"rows\", value:labels[\"chart-rows\"]}\n\t\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"advanced\", borderless:true, type:\"form\", paddingX:0, padding:{bottom:0}, header:labels[\"chart-series\"], rows:[\n\t\t\t\t\t\t\t{ view: \"ssheet-series\", name:\"series\" },\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"extras\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-extras\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\t\t\t\tmulti: true,\n\t\t\t\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-legend\"], body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view: \"text\", label:labels[\"chart-legend-range\"], name:\"legend.range\"},\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.align\", \"chart-legend-align\", getLegendAlign()),\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.valign\", \"chart-legend-valign\", getLegendValign())\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-scale\"], batch:\"axis\", id:\"scale\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-lines\"], name:\"scale.lines\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-radar-circle\"], name:\"scale.circle\", hidden:true},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-scale-color\"], name:\"scale.color\", batch:\"axis\"}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-x-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-range\"], name:\"xAxis.range\", range:true, batch:\"axis\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-title\"], name:\"xAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-y-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-title\"], name:\"yAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-origin\"], name:\"origin\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"label\", label:labels[\"chart-yAxis-note\"], css:\"ssheet_note\", height:20},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-start\"], name:\"yAxis.start\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-end\"], name:\"yAxis.end\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-step\"], name:\"yAxis.step\", batch:\"axis\", attributes:{ type:\"number\" } }\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}]\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tconst form = chartEditor.queryView(\"form\");\n\tconst elements = form.elements;\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id == \"add-chart\"){\n\t\t\tconst config = action.config;\n\t\t\tlet values = config && config.config || {};\n\n\t\t\tchartEditor.show();\n\n\t\t\tview.$handleSelection = function(st, end, a, b){\n\t\t\t\tconst focus = webix.UIManager.getFocus();\n\n\t\t\t\tif(chartEditor.queryView(view => view == focus)){\n\t\t\t\t\tif(focus == elements.range || focus == elements[\"legend.range\"]){\n\t\t\t\t\t\tlet val = focus.getValue();\n\t\t\t\t\t\tconst last = val.lastIndexOf(\",\");\n\n\t\t\t\t\t\tval = last == -1 ? \"\" : val.substring(0, last + 1);\n\t\t\t\t\t\tfocus.setValue(val + a+\":\"+b);\n\t\t\t\t\t}\n\t\t\t\t\telse if(focus.config.range)\n\t\t\t\t\t\tfocus.setValue(a+\":\"+b);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tform.clear();\n\t\t\tview.$$(\"chartTabs\").setValue(\"common\");\n\n\t\t\tvalues = _normalizeConfig(values);\n\n\t\t\tvalues.range = config ? config.data : view.getSelectedRange();\n\t\t\tchartEditor.viewId = action.viewid ? action.viewid : view.views.add(null, null, \"chart\", values.range, values);\n\n\t\t\tview.callEvent(\"onUIEditStart\", [chartEditor.viewId, \"chart\"]);\n\n\t\t\tupdateValign(values.legend.align);\n\t\t\tupdateAlign(values.legend.valign);\n\t\t\tupdateType(values.type);\n\n\t\t\tform.setValues(inValues(values));\n\n\t\t\tif(values.legend.fromData)\n\t\t\t\tupdateLegendRange(values.legend.fromData);\n\t\t\tif(values.xAxis.fromData)\n\t\t\t\tupdateXaxisRange(values.xAxis.fromData);\n\n\t\t\tupdateSeries();\n\n\t\t\tform.queryView(\"accordionitem\", \"all\").forEach(view => view.expand());\n\n\t\t\telements.range.focus();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\tif(chartEditor.isVisible() && type != \"chart\")\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onCommand\", obj =>{\n\t\tif(obj.id == \"close-ui-editor\" && chartEditor.isVisible())\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (id, values) => {\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tif(chartEditor.isVisible() && chartEditor.viewId == values.row)\n\t\t\t\tcloseEditor(view);\n\t\t}\n\t});\n\n\tform.attachEvent(\"onChange\", function(val, oldVal){\n\t\tconst source = this.$eventSource;\n\n\t\t//upper case ranges\n\t\tif(source === elements.range || source === elements[\"xAxis.range\"] || source === elements[\"legend.range\"]){\n\t\t\tconst parts = val.split(\"!\");\n\t\t\tconst upper = parts.length == 2 ? parts[0]+\"!\"+parts[1].toUpperCase() : val.toUpperCase();\n\n\t\t\tif(val != upper){\n\t\t\t\tval = upper;\n\t\t\t\tsetSilentValue(source, upper);\n\t\t\t}\n\t\t}\n\n\t\tswitch (source){\n\t\t\tcase elements.type:\n\t\t\t\tupdateType(val);\n\t\t\t\tbreak;\n\t\t\tcase elements.range:\n\t\t\tcase elements.dataSeries:\n\t\t\t\tif(this.$eventSource == elements.dataSeries)\n\t\t\t\t\tswitchRowsCols();\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\thandlePieLegend();\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.range\"], getLeftColumn());\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.fromData\"]:\n\t\t\t\tupdateXaxisRange(val);\n\t\t\t\tupdateSeries(oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.fromData\"]:\n\t\t\t\tupdateLegendRange(val);\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.align\"]:\n\t\t\t\tupdateValign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.valign\"]:\n\t\t\t\tupdateAlign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.range\"]:\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.range\"]:\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"legend.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst config = outValues(form.getValues());\n\t\tview.views.update(chartEditor.viewId, config.range, config);\n\t});\n\n\telements.series.attachEvent(\"onRangeChange\", updateRange);\n\n\tfunction handlePieLegend(){\n\t\tif(elements[\"legend.fromData\"].getValue()){\n\t\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\t\tsetSilentValue(elements[\"legend.range\"], handler());\n\t\t}\n\t}\n\n\tfunction updateLegendRange(val){\n\t\tif(val){\n\t\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\t\tupdateRange(\"\", legendRange);\n\t\t}\n\n\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\tval = val ? handler() : \"\";\n\n\t\tsetSilentValue(elements[\"legend.range\"], val);\n\t}\n\n\tfunction updateXaxisRange(val){\n\t\tif(val){\n\t\t\tconst xAxisRange = elements[\"xAxis.range\"].getValue();\n\t\t\tupdateRange(\"\", xAxisRange);\n\t\t}\n\n\t\tval = val ? getLeftColumn() : \"\";\n\n\t\tsetSilentValue(elements[\"xAxis.range\"], val);\n\t}\n\n\tfunction setSilentValue(element, val){\n\t\telement.blockEvent();\n\t\telement.setValue(val);\n\t\telement.unblockEvent();\n\t}\n\n\tfunction getLeftColumn(){\n\t\tconst data = elements.range.getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\tlet leftColumn = \"\";\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend: legendRange || \"\"});\n\n\t\tif(series.length)\n\t\t\tleftColumn = series[0].range;\n\n\t\treturn leftColumn;\n\t}\n\n\tfunction getTopRow(){\n\t\tconst data = _getDataParts(elements.range.getValue());\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst xAxisRange = _getDataParts(elements[\"xAxis.range\"].getValue());\n\t\tlet topRow = [];\n\n\t\tdata.forEach(subdata => {\n\t\t\tif(xAxisRange.indexOf(subdata) == -1){\n\t\t\t\tconst part = range(subdata, view);\n\t\t\t\tif(part){\n\t\t\t\t\tconst range = dir ?\n\t\t\t\t\t\ttoRange(part[0], part[1], part[2], part[1], part[4]) :\n\t\t\t\t\t\ttoRange(part[0], part[1], part[0], part[3], part[4]);\n\n\t\t\t\t\tif(data.indexOf(range) == -1)\n\t\t\t\t\t\ttopRow.push(range);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn topRow.join(\",\");\n\t}\n\n\tfunction updateRange(val, oldVal){\n\t\tlet data = elements.range.getValue();\n\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend, xAxis});\n\n\t\toldVal = _getDataParts(oldVal);\n\n\t\tdata = _getDataParts(data).filter(val => oldVal.indexOf(val) == -1);\n\n\t\tif(val){\n\t\t\tval = _getDataParts(val);\n\t\t\tval.forEach(range => {\n\t\t\t\tconst exist = series.filter(obj => obj.range == range);\n\t\t\t\tif(!exist.length)\n\t\t\t\t\tdata.push(range);\n\t\t\t});\n\t\t}\n\n\t\tsetSilentValue(elements.range, data.join(\",\"));\n\t}\n\n\tfunction updateAlign(val){\n\t\tconst align = elements[\"legend.align\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"middle\"){\n\t\t\tif(list.exists(\"center\"))\n\t\t\t\tlist.remove(\"center\");\n\t\t}\n\t\telse if(!list.exists(\"center\"))\n\t\t\tlist.add({id:\"center\", value:labels[\"chart-legend-center\"]}, 1);\n\t}\n\n\tfunction updateValign(val){\n\t\tconst align = elements[\"legend.valign\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"center\"){\n\t\t\tif(list.exists(\"middle\"))\n\t\t\t\tlist.remove(\"middle\");\n\t\t}\n\t\telse if(!list.exists(\"middle\"))\n\t\t\tlist.add({id:\"middle\", value:labels[\"chart-legend-middle\"]}, 1);\n\t}\n\n\tfunction updateType(val){\n\t\tconst tabs = view.$$(\"chartTabs\").getTabbar();\n\t\tswitchRowsCols();\n\t\thandlePieLegend();\n\n\t\tconst series = elements.series;\n\t\tconst markersVisible = val == \"radar\" || val == \"line\" || val == \"spline\";\n\t\tseries.hideSubviews(\"marker\", markersVisible);\n\t\tseries.hideSubviews(\"label\", markersVisible || val == \"bar\");\n\n\t\tif(val == \"area\" || val == \"bar\") elements.stacked.show();\n\t\telse hideField(elements.stacked);\n\n\t\tif(val == \"radar\")\n\t\t\telements[\"scale.circle\"].show();\n\t\telse\n\t\t\thideField(elements[\"scale.circle\"]);\n\n\t\tif(val == \"pie\")\n\t\t\telements[\"3D\"].show();\n\t\telse\n\t\t\thideField(elements[\"3D\"]);\n\n\t\tif(_isPie(val)){\n\t\t\thideBatch(\"axis\");\n\t\t\telements.pieInnerText.show();\n\t\t\ttabs.hideOption(\"advanced\");\n\t\t}\n\t\telse{\n\t\t\thideBatch(\"axis\", true);\n\t\t\thideField(elements.pieInnerText);\n\t\t\ttabs.showOption(\"advanced\");\n\t\t}\n\n\t\tif(_isPie(val) || val == \"radar\")\n\t\t\thideBatch(\"axisTitle\");\n\t\telse\n\t\t\thideBatch(\"axisTitle\", true);\n\t}\n\n\tfunction updateSeries(oldXaxis){\n\t\tlet data = elements.range.getValue();\n\n\t\tlet series = elements.series.getValue();\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tseries = _getSeries(view, data, dataSeries, {series, legend, xAxis}, oldXaxis);\n\n\t\telements.series.setValue(series);\n\t}\n\n\tfunction switchRowsCols(){\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst pie = _isPie(elements.type.getValue());\n\t\tif((!pie && dir) || (!dir && pie)){\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-col-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-row-xAxis\"]);\n\t\t}\n\t\telse{\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-row-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-col-xAxis\"]);\n\t\t}\n\t\telements[\"legend.fromData\"].refresh();\n\t\telements[\"xAxis.fromData\"].refresh();\n\t}\n\n\tfunction hideField(field){\n\t\tif(field.setValue)\n\t\t\tsetSilentValue(field);\n\t\tfield.hide();\n\t}\n\n\tfunction hideBatch(batch, visible){\n\t\tform.queryView({batch:batch}, \"all\").forEach(field => {\n\t\t\tif(visible)\n\t\t\t\tfield.show();\n\t\t\telse\n\t\t\t\thideField(field);\n\t\t});\n\t}\n\n\tfunction inValues(values){\n\t\tif(/stacked|3D/.test(values.type))\n\t\t\tvalues.type = values.type.replace(/stacked|3D/, \"\").toLowerCase();\n\t\treturn values;\n\t}\n\n\tfunction outValues(values){\n\t\tif(values.stacked)\n\t\t\tvalues.type = \"stacked\"+values.type.charAt(0).toUpperCase()+values.type.substr(1);\n\t\telse if(values[\"3D\"])\n\t\t\tvalues.type += \"3D\";\n\n\t\treturn values;\n\t}\n}\n\nfunction closeEditor(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tview.callEvent(\"onUIEditStop\", [chartEditor.viewId, \"chart\"]);\n\tchartEditor.viewId = null;\n\tview.$handleSelection = null;\n\tchartEditor.hide();\n}\n\nfunction addRichselect(name, label, data){\n\treturn { view: \"richselect\", name:name, label:labels[label], suggest:{\n\t\tview: \"ssheet-form-suggest\",\n\t\tdata: data\n\t}};\n}\n\nfunction getTypes(){\n\treturn [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"radar\", value:labels[\"radar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]},\n\t\t{id:\"donut\", value:labels[\"donut-chart\"]}\n\t];\n}\n\nfunction getLegendAlign(){\n\treturn [\n\t\t{id:\"left\", value:labels[\"chart-legend-left\"]},\n\t\t{id:\"center\", value:labels[\"chart-legend-center\"]},\n\t\t{id:\"right\", value:labels[\"chart-legend-right\"]}\n\t];\n}\n\nfunction getLegendValign(){\n\treturn [\n\t\t{id:\"top\", value:labels[\"chart-legend-top\"]},\n\t\t{id:\"middle\", value:labels[\"chart-legend-middle\"]},\n\t\t{id:\"bottom\", value:labels[\"chart-legend-bottom\"]}\n\t];\n}","import {ignoreReset, ignoreUndo}  from \"../operations/undo\";\nimport group  from \"../operations/undo_group\";\nimport {adjustSpan}  from \"../operations/spans\";\nimport {updateMaxColumn} from \"../helpers/column_names\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action, start, end) => {\n\t\tif (action.id == \"add\" || action.id == \"del\"){\n\t\t\tvar area = view._table.getSelectArea();\n\t\t\tif(area && !(start && end)){\n\t\t\t\tstart = area.start;\n\t\t\t\tend = area.end;\n\t\t\t}\n\n\t\t\tif (start && end){\n\t\t\t\tif(action.group == \"column\" && action.id == \"add\")\n\t\t\t\t\tupdateMaxColumn(view.config.columnCount + (end.column - start.column) + 1);\n\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tprocess(action, start, end, view);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"grid-change\"){\n\t\t\tloadChangedData(view, value);\n\t\t}\n\t});\n}\n\nfunction process(action, start, end, view) {\n\tlet select = view._table.getSelectArea();\n\tconst state = view._table.getScrollState();\n\n\tconst oldData = view.serialize({math: true, viewIds:true});\n\tconst newData = webix.copy(oldData);\n\tconst data = {value:oldData, newValue:newData};\n\n\tconst spanData = [];\n\tconst spans = newData.spans;\n\tfor (let i in spans){\n\t\tconst span = adjustSpan(spans[i], action, start, end, view, newData.data, spanData);\n\t\tif (span[2] <= 0 || span[3] <= 0)\n\t\t\tspans.splice(i, 1);\n\t}\n\n\tconst values = getUpdateValues(action, start, end);\n\tignoreUndo(function(){\n\t\tview.callEvent(\"onAction\", [\"before-grid-change\", {\n\t\t\tname: values.name,\n\t\t\tinc: values.inc,\n\t\t\tdata: newData,\n\t\t\tstart: start\n\t\t}]);\n\t},view);\n\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"add\")\n\t\t\t_addColumn(action, start, end, view);\n\t\telse if (action.id == \"del\")\n\t\t\t_delColumn(action, start, end, view);\n\t}\n\telse if (action.group == \"row\") {\n\t\tif (action.id == \"add\")\n\t\t\t_addRow(action, start, end, view);\n\t\telse if (action.id == \"del\")\n\t\t\t_delRow(action, start, end, view);\n\t}\n\n\t// muon updates data and ranges\n\tconst updatedData = view.serialize({math: true});\n\tnewData.data = updatedData.data;\n\tnewData.ranges = updatedData.ranges;\n\n\tspanData.forEach(item => {\n\t\tnewData.data.push(item);\n\t});\n\n\tview.callEvent(\"onAction\", [\"grid-change\", data]);\n\n\tignoreUndo(function() {\n\t\tloadChangedData(view, newData);\n\t\tview._table.scrollTo(state.x, state.y);\n\t},view);\n\n\tif (select){\n\t\tselect = fixSelectArea(select, view);\n\t\tif (select)\n\t\t\tview.$$(\"cells\").addSelectArea(select.start, select.end);\n\t}\n}\n\nfunction fixSelectArea(select, view){\n\tconst config = view.config;\n\n\tconst rows = config.rowCount;\n\tconst cols = config.columnCount;\n\n\tif (select.start.row*1 > rows) select.start.row = rows;\n\tif (select.end.row*1 > rows) select.end.row = rows;\n\tif (select.start.column*1 > cols) select.start.column = cols;\n\tif (select.end.column*1 > cols) select.end.column = cols;\n\n\tif (\n\t\tview.isRowVisible(select.start.row) &&\n\t\tview.isRowVisible(select.end.row) &&\n\t\tview.isColumnVisible(select.start.column) &&\n\t\tview.isColumnVisible(select.end.column)\n\t)\n\t\treturn select;\n}\n\nfunction loadChangedData(view, data){\n\t// data loading resets undo history, and\n\t// we need to preserve it\n\tignoreReset(function(){\n\t\tview.$handleSelection = null;\n\t\tview.parse(data);\n\t});\n}\n\nfunction getUpdateValues( action, start, end){\n\tvar name = action.group,\n\t\tinc = action.id==\"add\"?1:(action.id==\"del\"?-1:0);\n\n\tif(inc) {\n\t\t// span support\n\t\tif (name == \"row\")\n\t\t\tinc += inc * (end.row - start.row);\n\t\tif (name == \"column\")\n\t\t\tinc += inc * (end.column - start.column);\n\t}\n\treturn {name: name, inc: inc};\n}\n\nfunction _addColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tview._mPage.addColumn(start.column-1, count);\n\tview.config.columnCount += count;\n\n\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column]);\n}\n\nfunction _delColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tif (view.config.columnCount === count){\n\t\tif (start.column == end.column)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.column--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeColumn(start.column-1, count);\n\tview.config.columnCount -= count;\n\n\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column]);\n}\n\nfunction _addRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tview._mPage.addRow(start.row-1, count);\n\tview.config.rowCount += count;\n\n\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}\n\nfunction _delRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tif (view.config.rowCount === count){\n\t\tif (start.row == end.row)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.row--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeRow(start.row-1, count);\n\tview.config.rowCount -= count;\n\n\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}","import group from \"./undo_group\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport * as fmt from \"../operations/formats\";\nimport {changeRange, eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.attachEvent(\"onBeforeEditStart\", function(id){\n\t\tlet col = this.getColumnConfig(id.column);\n\t\tif (this._ssEditors[id.row]){\n\t\t\tlet ed = this._ssEditors[id.row][id.column];\n\t\t\tif (ed){\n\t\t\t\twebix.extend(col, ed, true);\n\t\t\t\twebix.extend(col, {row: view.getRow(id.row)}, true);\n\t\t\t\tif (ed.options){\n\t\t\t\t\tif (typeof ed.options == \"string\")\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { unique:true, order:true, empty:true });\n\t\t\t\t\telse if (webix.isArray(ed.options))\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { empty:true });\n\n\t\t\t\t\tif(col.collection){\n\t\t\t\t\t\tcol.collection.clearAll();\n\t\t\t\t\t\tcol.collection.parse(col.options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// update format if editor supports this feature\n\ttable.attachEvent(\"onBeforeEditStop\", function(state, editor, ignore){\n\t\tif (!ignore && editor.getFormat){\n\t\t\tconst value = editor.getValue();\n\t\t\tlet format = editor.getFormat(value);\n\n\t\t\tgroup.set(function(){\n\t\t\t\tview.setCellValue(editor.row, editor.column, value);\n\t\t\t\tif (format){\n\t\t\t\t\tfmt.addFormat(view, editor.row, editor.column, fmt.getFormatSource(format));\n\t\t\t\t} else\n\t\t\t\t\tfmt.removeFormat(view, editor.row, editor.column);\n\t\t\t});\n\n\t\t\tconst cell = view.getSelectedId();\n\t\t\tif (cell && cell.row == editor.row && cell.column == editor.column){\n\t\t\t\tformat = format || \"common\";\n\t\t\t\tformat = fmt.isCustom(format) ? \"custom\" : format;\n\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t\t\t}\n\t\t}\n\t});\n\n\ttable.attachEvent(\"onAfterEditStop\", function(state, editor){\n\t\tconst col = this.getColumnConfig(editor.column);\n\n\t\tcol.editor = \"text\";\n\t\tdelete col.popup; delete col.$popup; delete col.row;\n\t});\n\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"dropdown\")\n\t\t\tview.setCellEditor(row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"dropdown\"){\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_editor\", p.newValue);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssEditors = {};\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\ttblEditors = view._table._ssEditors,\n\t\teditors = [];\n\n\tfor (row in tblEditors){\n\t\tfor (column in tblEditors[row])\n\t\t\teditors.push([row, column, tblEditors[row][column]]);\n\t}\n\tdata.editors = editors;\n}\n\nexport function load(view,data){\n\tconst editors = data.editors;\n\n\tif (editors)\n\t\tfor (let i=0; i<editors.length; i++)\n\t\t\tview.setCellEditor.apply(view, editors[i]);\n}\n\nexport function clearEditors(view, range){\n\tview._table.editStop();\n\teachRange(range, view, function(view, cell){\n\t\tlet editor = view._table._ssEditors[cell.row];\n\t\tif (editor){\n\t\t\tif (editor[cell.column]){\n\t\t\t\tdelete editor[cell.column];\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_editor\");\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_editor\", false);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function isEditor(view, row, column){\n\tconst editor = view._table._ssEditors;\n\treturn editor[row] && !!editor[row][column];\n}\n\n// called on column/row add, delete, hide,show\nfunction updatePosition(view, name, inc, data, start){\n\tconst editors = data.editors;\n\n\tif (inc){\n\t\t// create new editors\n\t\tfor(let i=editors.length-1; i>=0; i--){\n\t\t\tlet [row,column,editor] = editors[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete editor mark if row was deleted\n\t\t\t\t\t\teditors.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\teditors[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\teditors.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\teditors[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\teditor.options = changeRange(editor.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteDropdown(view, extra, row, col, cutted){\n\tconst editor = extra.dropdown;\n\n\tview.setCellEditor(row, col, editor);\n\tif (cutted === 1)\n\t\tview.setCellEditor(extra.row, extra.col, {});\n}","import group from \"./undo_group\";\nimport {pasteCondition} from \"../operations/conditional_formats\";\nimport {pasteDropdown} from \"../operations/dropdown\";\nimport {pasteFilter} from \"../operations/filter\";\nimport {pasteSpan} from \"../operations/spans\";\n\nvar styledata, clipdata, origin, cutted, updateFilters;\n\nexport function init(view){\n\tconst clipboard = view.config.clipboard;\n\tif(clipboard === false)\n\t\treturn;\n\n\twebix.clipbuffer.init();\n\tconst buffer = document.querySelector(\".webix_clipbuffer\");\n\n\tconst keyC = 67; //keyboard 'c' code\n\tconst keyX = 88; //keyboard 'x' code\n\tvar grid = view.$$(\"cells\");\n\n\tgrid.attachEvent(\"onAfterAreaAdd\", () => _sel_to_clip(view, buffer));\n\n\tgrid.attachEvent(\"onKeyPress\", (code, e) => {\n\t\tif((code === keyC || code === keyX) && (e.ctrlKey || e.metaKey) && grid.getSelectedId()){\n\t\t\tstyledata = _get_sel_style(view, grid);\n\t\t\tclipdata = buffer.value;\n\t\t\torigin = grid.getSelectArea();\n\t\t\tcutted = (code === keyX)*1;\n\t\t\tif(cutted && Object.keys(view._table._ssFilters).length !== 0)\n\t\t\t\tupdateFilters = allFiltersInZone(view._table._ssFilters, origin, view.config.columnCount);\n\t\t}\n\t});\n\n\tif (!view.config.readonly) {\n\t\tgrid.attachEvent(\"onPaste\", (text) => {\n\t\t\t_clip_to_sel(view, grid, text);\n\t\t});\n\t}\n}\n\nfunction _sel_to_clip(view, buffer){\n\tconst grid = view.$$(\"cells\");\n\tif(grid.getSelectedId())\n\t\twebix.delay(()=>{\n\t\t\tconst data = [];\n\t\t\tgrid.mapSelection(function(value, row, col, row_ind) {\n\t\t\t\tvalue = view._mPage.getValue(row-1, col-1);\n\t\t\t\tconst delimiter = view.config.clipboardDecimalDelimiter;\n\t\t\t\tif(!webix.isUndefined(delimiter))\n\t\t\t\t\tvalue = _updateDelimiter(value, delimiter);\n\t\t\t\tif (!data[row_ind]) data[row_ind] = [];\n\t\t\t\tdata[row_ind].push(value);\n\t\t\t});\n\t\t\tconst clipdata = webix.csv.stringify(data, grid.config.delimiter);\n\n\t\t\tif (grid.getEditor()){\n\t\t\t\tbuffer.value = clipdata;\n\t\t\t} else {\n\t\t\t\tbuffer.focus();\n\t\t\t\twebix.clipbuffer.set(clipdata);\n\t\t\t}\n\t\t\twebix.UIManager.setFocus(grid);\n\t\t});\n}\n\nfunction _updateDelimiter(value, clipboardDecimalDelimiter) {\n\tif(webix.rules.isNumber(value))\n\t\tvalue = value.toString().replace(\".\", clipboardDecimalDelimiter);\n\treturn value;\n}\n\nfunction _clip_to_sel(view, grid, text){\n\tvar leftTop = grid.getSelectArea();\n\tif (!leftTop) return;\n\tvar start = leftTop.start;\n\tvar fromSheet = text === clipdata;\n\n\tvar data = fromSheet ? styledata : webix.csv.parse(text, grid.config.delimiter);\n\tif(!fromSheet && view.config.clipboardDecimalDelimiter)\n\t\tdata = _changeDelimiter(data, view.config.clipboardDecimalDelimiter);\n\n\tvar translate = { id:\"move\", column:0, row: 0, cut:cutted };\n\tif (fromSheet){\n\t\ttranslate.column = start.column - origin.start.column;\n\t\ttranslate.row = start.row - origin.start.row;\n\t} else {\n\t\tcutted = 0;\n\t}\n\n\tgroup.set(function(){\n\t\tif (updateFilters)\n\t\t\tview.removeFilters();\n\n\t\t_add_row_col(view, start, data);\n\n\t\tif (cutted === 1) {\n\t\t\tfor (let row = origin.start.row; row <= origin.end.row; row++) {\n\t\t\t\tfor (let column = origin.start.column; column <= origin.end.column; column++) {\n\t\t\t\t\tview.setCellValue(row, column, null);\n\t\t\t\t\tview.setStyle(row, column, null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data.length == 1 && data[0].length == 1 && !updateFilters) {\n\t\t\tview.eachSelectedCell(function(cell) {\n\t\t\t\tvar subtrans = {\n\t\t\t\t\tid: \"move\",\n\t\t\t\t\tcolumn: translate.column + cell.column * 1 - start.column,\n\t\t\t\t\trow: translate.row + cell.row * 1 - start.row,\n\t\t\t\t\tcut:cutted\n\t\t\t\t};\n\t\t\t\t_clipboardToTable(view, cell.row, cell.column, data[0][0], fromSheet, subtrans);\n\t\t\t});\n\t\t} else {\n\t\t\tgrid.mapCells(\n\t\t\t\tstart.row,\n\t\t\t\tstart.column,\n\t\t\t\tdata.length,\n\t\t\t\tnull,\n\t\t\t\tfunction(value, row, col, row_ind, col_ind) {\n\t\t\t\t\tif (data[row_ind] && data[row_ind].length > col_ind) {\n\t\t\t\t\t\tvar cdata = data[row_ind][col_ind];\n\t\t\t\t\t\t_clipboardToTable(view, row, col, cdata, fromSheet, translate);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tif (cutted === 1){\n\t\t\t//cut and cleared\n\t\t\tcutted = 2;\n\t\t\tupdateFilters = false;\n\t\t}\n\t});\n\t\n\tview.refresh();\n}\n\nfunction _clipboardToTable(view, row, col, cdata, fromSheet, translate){\n\tlet newValue = cdata;\n\n\tif (typeof cdata === \"object\"){\n\t\tif (cdata.math){\n\t\t\tif(translate.cut)\n\t\t\t\tnewValue = cdata.math;\n\t\t\telse\n\t\t\t\tnewValue = view._mData.getStore().transposeMath(cdata.math, translate.row, translate.column);\n\t\t}\n\t\telse\n\t\t\tnewValue = cdata.text;\n\n\t\tif(cdata.style && cdata.style.props){\n\t\t\tconst style = view.addStyle(cdata.style.props);\n\t\t\tview.setStyle(row, col, style);\n\t\t}\n\n\t\tconst extra = cdata.extra;\n\t\tif(extra){\n\t\t\tif(extra.condition)\n\t\t\t\tpasteCondition(view, extra, row, col, cutted);\n\t\t\tif(extra.dropdown)\n\t\t\t\tpasteDropdown(view, extra, row, col, cutted, translate);\n\t\t\tif(extra.filter && updateFilters)\n\t\t\t\tpasteFilter(view, extra, row, col, cutted, translate);\n\t\t}\n\t\tpasteSpan(view, extra, row, col, cutted, translate);\n\t}\n\n\tview.setCellValue(row, col, newValue);\n}\n\nfunction _get_sel_style(view, grid){\n\tvar data = [];\n\tvar row, last;\n\n\tgrid.mapSelection(function(value, id, col) {\n\t\tif (id != last){\n\t\t\trow = []; data.push(row);\n\t\t\tlast = id;\n\t\t}\n\n\t\tvar math =  view._mPage.getValue(id-1, col-1, true);\n\t\tmath = math && math[0] == \"=\" ? math : null;\n\t\tvalue = view._mPage.getValue(id-1, col-1);\n\t\tvar obj = { text:value, math, style:view.getStyle(id, col) };\n\n\t\tvar condition = view.conditions.get(id,col);\n\t\tvar editor = view.getCellEditor(id, col);\n\t\tvar filter = view.getCellFilter(id, col);\n\t\tvar span = view._table.getSpan(id, col);\n\n\t\tif (editor || filter || condition || span){\n\t\t\tvar extra = { row:id, col:col };\n\t\t\tif (condition) extra.condition = condition;\n\t\t\tif (editor) extra.dropdown = editor;\n\t\t\tif (filter) extra.filter = filter;\n\t\t\tif (span) extra.span = span;\n\t\t\tobj.extra = extra;\n\t\t}\n\n\t\trow.push(obj);\n\t\treturn value;\n\t});\n\n\treturn data;\n}\n\nfunction allFiltersInZone(extra, origin, columnCount){\n\tvar filters = Object.keys(extra);\n\tvar startRow = Math.min.apply(null, filters);\n\tvar endRow = Math.max.apply(null, filters);\n\tvar startCol = columnCount;\n\tvar endCol = 1;\n\n\tfor (var i = startRow; i <= endRow; i++){\n\t\tif(extra[i]){\n\t\t\tvar columns = Object.keys(extra[i]);\n\t\t\tstartCol = Math.min(startCol, Math.min.apply(null, columns));\n\t\t\tendCol = Math.max(endCol, Math.max.apply(null, columns));\n\t\t}\n\t}\n\n\tif(origin.start.row <= startRow && origin.end.row >= endRow && origin.start.column <= startCol && origin.end.column >= endCol)\n\t\treturn true;\n\telse\n\t\treturn false;\n}\n//dynamically increase rows and columns according to pasted data size\nfunction _add_row_col(view, start, data){\n\tvar maxRow = start.row + data.length - 1;\n\tvar maxCol = start.column + data[0].length - 1;\n\n\tif(maxRow > view.config.rowCount || maxCol > view.config.columnCount){\n\t\tvar action = { id:\"add\" };\n\t\tif (maxRow > view.config.rowCount) {\n\t\t\taction.group = \"row\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ row: view.config.rowCount + 1 }, \n\t\t\t\t{ row: maxRow }\n\t\t\t]);\n\t\t}\n\t\tif (maxCol > view.config.columnCount) {\n\t\t\taction.group = \"column\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ column: view.config.columnCount + 1 },\n\t\t\t\t{ column: maxCol }\n\t\t\t]);\n\t\t}\n\t}\n}\n\nfunction _changeDelimiter(data, clipboardDecimalDelimiter){\n\tfor(var i = 0; i < data.length; i++)\n\t\tfor(var k = 0; k < data[i].length; k++){\n\t\t\tvar record = data[i][k].toString().replace(clipboardDecimalDelimiter, \".\");\n\t\t\tif(webix.rules.isNumber(record))\n\t\t\t\tdata[i][k] = record;\n\t\t}\n\treturn data;\n}","import group from \"./undo_group\";\n\nexport function init(view) {\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"show\" || action.id == \"hide\"){\n\t\t\tconst sel = view._table.getSelectArea();\n\t\t\tif (sel)\n\t\t\t\tprocess(action, webix.copy(sel.start), webix.copy(sel.end), view);\n\t\t}\n\t});\n\treset(view);\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, direction) => {\n\t\tif ((action.id == \"hide\" || action.id == \"show\") && (action.group == \"column\" || action.group == \"row\")){\n\t\t\tlet type = action.id;\n\t\t\tif (!direction)\n\t\t\t\ttype = type == \"hide\" ? \"show\" : \"hide\";\n\t\t\tconst obj = (row || column);\n\t\t\tprocess({ id: type, group: action.group, neighbors: action.neighbors }, obj.start, obj.end, view, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\t_updatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nexport function reset(view, mode) {\n\tif(mode) view[\"_hidden_\"+mode+\"_hash\"] = {};\n\telse{\n\t\tview._hidden_cols_hash = {};\n\t\tview._hidden_rows_hash = {};\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nfunction getIds(id){\n\treturn webix.isArray(id) ? id : [id, id];\n}\n\nexport function isColumnVisible(view, column){\n\treturn !view._hidden_cols_hash[column];\n}\n\nexport function setState(view, indexes, state, type){\n\t// hide\n\tif(!indexes){\n\t\tconst sel = view.getSelectedId(true);\n\t\tconst action = {\n\t\t\tid: state === false ? \"show\" : \"hide\",\n\t\t\tgroup: type\n\t\t};\n\n\t\tif(sel.length)\n\t\t\tview.callEvent(\"onCommand\", [action, sel[0], sel[sel.length-1]]);\n\t}\n\telse {\n\t\tconst ids = getIds(indexes);\n\t\tconst hidden = type == \"row\" ? view._hidden_rows_hash : view._hidden_cols_hash;\n\n\t\tif (!hidden[ids[0]] && (webix.isUndefined(state) || state)){\n\t\t\t(type == \"row\" ? _hideRow : _hideColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view);\n\t\t}\n\t\t// show\n\t\telse if (hidden[ids[0]] && (webix.isUndefined(state) || !state)) {\n\t\t\t(type == \"row\" ? _showRow : _showColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view);\n\t\t}\n\t}\n}\n\nexport function isRowVisible(view, row){\n\treturn !view._hidden_rows_hash[row];\n}\n\nexport function serialize(view, data){\n\tlet hrows  = []; let hcols = [];\n\tfor(let r in view._hidden_rows_hash) hrows.push(r);\n\tfor(let c in view._hidden_cols_hash) hcols.push(c);\n\n\tif(hrows.length || hcols.length)\t\n\t\tdata.table.hidden = {};\n\tif(hrows.length)\n\t\tdata.table.hidden.row = hrows;\n\tif(hcols.length)\n\t\tdata.table.hidden.column = hcols;\n}\n\nexport function load(view, data){\n\treset(view);\n\t\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.hidden)){\n\t\tconst hidden = data.table.hidden;\n\n\t\tif(hidden.row && hidden.row.length){\n\t\t\tfor(let r = 0; r < hidden.row.length; r++)\n\t\t\t\t_hideRow({id:\"hide\", group:\"row\"}, {row:hidden.row[r]}, {row:hidden.row[r]}, view, true);\n\t\t}\n\n\t\tif(hidden.column && hidden.column.length){\n\t\t\tfor(let c = 0; c < hidden.column.length; c++)\n\t\t\t\t_hideColumn({id:\"hide\", group:\"column\"}, {column:hidden.column[c]}, {column:hidden.column[c]}, view, true);\n\t\t}\n\t}\n}\n\nfunction process(action) {\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"show\")\n\t\t\t_showColumn.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideColumn.apply(this, arguments);\n\t} else if (action.group == \"row\") {\n\t\tif (action.id == \"show\")\n\t\t\t_showRow.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideRow.apply(this, arguments);\n\t}\n}\n\nfunction _showColumn(action, start, end, view, silent) {\n\tconst grid = view.$$(\"cells\");\n\n\tconst hash = view._hidden_cols_hash;\n\n\tif(action.neighbors){\n\t\tif(hash[ start.column-1 ])\n\t\t\twhile(hash[ start.column-1 ])\n\t\t\t\tstart.column--;\n\t\telse\n\t\t\twhile(hash[ end.column+1 ])\n\t\t\t\tend.column++;\n\t}\n\n\tgroup.set(()=>{\n\t\tfor (let i = start.column; i <= end.column; i++) {\n\t\t\tif(hash[i]){\n\t\t\t\tdelete hash[i];\n\t\t\t\tconst cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_column\", \"\");\n\t\t\t\tgrid.showColumn(i);\n\t\t\t\tif (!silent)\n\t\t\t\t\tview.callEvent(\"onColumnOperation\", [action.id, i, i]);\n\t\t\t}\n\t\t}\n\n\t\tconst split = view._frozenColumns;\n\t\tif(split && split >= start.column && split <= end.column){\n\t\t\tview.freezeColumns(0); // remove freeze (split is equal with current frozen col)\n\t\t\tview.freezeColumns(split); // if col was freezed on hidden column - move it\n\t\t}\n\t}, view);\n}\n\nfunction _showRow(action, start, end, view, silent) {\n\tconst grid = view.$$(\"cells\");\n\tconst sel = grid.getSelectArea();\n\n\tconst hash = view._hidden_rows_hash;\n\n\tif(action.neighbors){\n\t\tif(hash[ start.row-1 ])\n\t\t\twhile(hash[ start.row-1 ])\n\t\t\t\tstart.row--;\n\t\telse\n\t\t\twhile(hash[ end.row+1 ])\n\t\t\t\tend.row++;\n\t}\n\n\tgroup.set(()=>{\n\t\tconst split = view._frozenRows;\n\t\tif(split){\n\t\t\t//Frozen rows ignore filtering applied to the datatable\n\t\t\tview.freezeRows(0);\n\t\t}\t\t\n\n\t\tfor (let i = start.row; i <= end.row; i++) {\n\t\t\tif(hash[i]){\n\t\t\t\tdelete hash[i];\n\n\t\t\t\tif (i - 1 === 0) {\n\t\t\t\t\tconst cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_row\", \"\");\n\t\t\t\t\tgrid.refreshColumns();\n\t\t\t\t} else\n\t\t\t\t\tgrid.removeCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\n\t\t\t\tif (!silent)\n\t\t\t\t\tview.callEvent(\"onRowOperation\", [action.id, i, i]);\n\t\t\t}\n\t\t}\n\n\t\tview.filterSpreadSheet();\n\n\t\tif(split)\n\t\t\tview.freezeRows(split);\n\n\t\tif (sel)\n\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t}, view);\n}\n\nfunction _hideColumn(action, start, end, view, silent) {\n\tconst grid = view.$$(\"cells\");\n\tlet i = end.column;\n\tview.$handleSelection = null;\n\tgrid.unselect();\n\n\tif (end.column<1 || start.column<1){\n\t\tdelete view._hidden_cols_hash[start.column];\n\t\treturn;\n\t}\n\twhile (i >= start.column) {\n\t\tif(grid.getColumnIndex(i) != -1){\n\t\t\tview._hidden_cols_hash[i] = i;\n\n\t\t\tlet cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_column\";\n\n\t\t\tgrid.hideColumn(i);\n\t\t}\n\t\ti--;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column]);\n}\n\nfunction _hideRow(action, start, end, view, silent) {\n\tif (end.row<1 || start.row<1){\n\t\tdelete view._hidden_rows_hash[start.row];\n\t\treturn;\n\t}\n\n\tconst split = view._frozenRows;\n\tif(split){\n\t\t//Frozen rows ignore filtering applied to the datatable\n\t\tview.freezeRows(0);\n\t}\n\n\tconst grid = view.$$(\"cells\");\n\tlet i = end.row;\n\n\twhile (i >= start.row) {\n\t\tview._hidden_rows_hash[i] = i;\n\n\t\tif (i - 1 === 0) {\n\t\t\tlet cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_row\";\n\t\t\tgrid.refreshColumns();\n\t\t}\n\t\telse\n\t\t\tgrid.addCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\n\t\ti--;\n\t}\n\n\tview.filterSpreadSheet();\n\n\tif(split)\n\t\tview.freezeRows(split);\n\n\tif (!silent)\n\t\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}\n\nfunction _updatePosition(view, name, inc, data, start){\n\tif(data.table && data.table.hidden && data.table.hidden[name] && data.table.hidden[name].length){\n\t\treset(view, name == \"column\" ? \"cols\" : \"rows\");\n\n\t\tconst s = start[name];\n\t\tconst hidden = data.table.hidden[name];\n\n\t\tfor (let i = hidden.length - 1; i >= 0; i--) {\n\t\t\tconst hiddenIndex = hidden[i]*1;\n\t\t\tif(inc > 0 && hiddenIndex >= s)\n\t\t\t\thidden[i] = inc + hiddenIndex;\n\t\t\telse if(inc < 0 && hiddenIndex >= s) {\n\t\t\t\tif(hiddenIndex < s - inc)\n\t\t\t\t\thidden.splice(i, 1);\n\t\t\t\telse\n\t\t\t\t\thidden[i] = inc + hiddenIndex;\n\t\t\t}\n\t\t}\n\t}\n}","import {getStyle, getTextSize} from \"./styles\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\n\tif (view.config.resizeCell){\n\t\tvar grid = view.$$(\"cells\");\n\t\tgrid.define(\"resizeRow\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"resizeColumn\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"fixedRowHeight\", false);\n\n\t\tgrid.attachEvent(\"onRowResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: id, column: 0, size: view.$$(\"cells\").getItem(id).$height });\n\t\t});\n\t\tgrid.attachEvent(\"onColumnResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: 0, column: id, size: view.getColumn(id).width });\n\t\t});\n\n\t\t// undo\n\t\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\t\tif(type == \"c-resize\" || type == \"r-resize\")\n\t\t\t\t_undoResize(view, row, column, value);\n\t\t});\n\t}\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tload(view,data);\n\t});\n\n\t\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view,data);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\tview.attachEvent(\"onBeforeStyleChange\", function(row, column, n, o){\n\t\tif (o && o.props.wrap === \"wrap\" && (!n || n.props.wrap != o.props.wrap)){\n\t\t\tdelete view._table.getItem(row).$height;\n\t\t}\n\t});\n\tview.attachEvent(\"onStyleChange\", _adjustRowHeight);\n\tview.attachEvent(\"onCellChange\",  _adjustRowHeight);\n}\n\nfunction serialize(view,data){\n\tvar sizes = [];\n\tvar grid = view.$$(\"cells\");\n\tvar columns = grid.getState().order;\n\tvar order = grid.data.order;\n\n\tvar defWidth = grid.config.columnWidth;\n\tvar defHeight = grid.config.rowHeight;\n\n\tfor (let i = 1; i < columns.length; i++){\n\t\tvar width = grid.getColumnConfig(columns[i]).width;\n\t\tif (width && width != defWidth)\n\t\t\tsizes.push([0, i, width]);\n\t}\n\n\tfor (let i = 0; i < order.length; i++){\n\t\tvar height = grid.getItem(order[i]).$height;\n\t\tif (height && height != defHeight)\n\t\t\tsizes.push([order[i]*1, 0, height]);\n\t}\n\t\n\tdata.sizes = sizes;\n}\n\nfunction load(view,data){\n\tif (data.sizes){\n\t\tfor (let i=0; i<data.sizes.length; i++){\n\t\t\tconst size = data.sizes[i];\n\t\t\tif (size[0]*1 !== 0){\n\t\t\t\tconst row = view.$$(\"cells\").getItem(size[0]);\n\t\t\t\tif(row) row.$height = size[2]*1;\n\t\t\t} else {\n\t\t\t\tconst col = view.getColumn(size[1]);\n\t\t\t\tif(col) col.width = size[2]*1;\n\t\t\t}\n\t\t}\n\t\tif (data.sizes.length)\n\t\t\tview.refresh(true);\n\t}\n}\n\nfunction _undoResize(view, row, column, value){\n\tif(row){\n\t\tview.$$(\"cells\").getItem(row).$height = value;\n\t\tsave(view, \"sizes\", { row:row, column: 0, size: value });\n\t}\n\telse{\n\t\tview._table.setColumnWidth(column, value);\n\t}\n\t// update area selection\n\tview._table.refreshSelectArea();\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet i,\n\t\tsizes = data.sizes,\n\t\tnsizes = [];\n\n\tif(inc){\n\t\tfor(i = sizes.length - 1; i >= 0; i--){\n\t\t\tlet [row, column, size] = sizes[i];\n\n\t\t\tif(row && name == \"row\" && row >= start.row){\n\t\t\t\tif(inc < 0 && row < start.row - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row*1 + inc, column, size]);\n\t\t\t}\n\t\t\telse if(column && name == \"column\" && column >= start.column){\n\t\t\t\tif(inc < 0 && column < start.column - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row, column*1 + inc, size]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tnsizes.push(sizes[i]);\n\t\t}\n\n\t\tif(inc > 0){\n\t\t\t//col/row add: set sizes according to the selected area\n\t\t\tif(name == \"column\"){\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[1] == start.column + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([0, start.column + i, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[0] == start.row + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([start.row + i, 0, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdata.sizes = nsizes;\n\t}\n}\n\nfunction _adjustRowHeight(row, column){\n\tconst view = this;\n\n\tif(view._loading_data)\n\t\treturn;\n\n\tconst style = getStyle(view, {row:row, column:column});\n\n\t//changing styles or content of wrapped cell -> resize the related row\n\tif (style && style.props.wrap){\n\t\tconst grid = view._table;\n\t\tconst item = grid.getItem(row);\n\t\tlet height = item.$height || grid.config.rowHeight;\n\n\t\tgrid.eachColumn(function(col, config){\n\t\t\tconst style = getStyle(view, {row:row, column:col});\n\t\t\t//include only cells with active wrap into calculation \n\t\t\tif(style && style.props && style.props.wrap === \"wrap\"){\n\t\t\t\tlet text = this.getText(row, col);\n\t\t\t\tlet baseWidth = config.width;\n\n\t\t\t\tconst span = grid.getSpan(row, col);\n\t\t\t\tlet spanHeight;\n\n\t\t\t\tif(span){\n\t\t\t\t\tconst node = grid.getSpanNode({row:span[0], column:span[1]});\n\t\t\t\t\tbaseWidth = node.offsetWidth;\n\t\t\t\t\tspanHeight = node.offsetHeight;\n\t\t\t\t}\n\n\t\t\t\tif(view.getCellEditor(row, col) || view.getCellFilter(row, col))\n\t\t\t\t\tbaseWidth += 20;\n\n\t\t\t\tlet textHeight = getTextSize(view, text, style.id, baseWidth).height;\n\n\t\t\t\tif(spanHeight)\n\t\t\t\t\ttextHeight = spanHeight >= textHeight ? 0 : textHeight - spanHeight + height;\n\n\t\t\t\theight = Math.max(height, textHeight);\n\t\t\t}\n\t\t});\n\n\t\titem.$height  = height;\n\t}\n}\n","import {encode} from \"../helpers/column_names\";\n\nexport function init(view){\n\tvar table = view._table;\n\n\tvar bs = 0;\n\ttable.attachEvent(\"onAreaDrag\", () => bs = new Date());\n\ttable.attachEvent(\"onBeforeAreaRemove\", function(){\n\t\t//[FIXME] currently we don't have enough info to know\n\t\t//is user selects new area, and removing need to be blocked\n\t\t//or is it some API which attempts to remove the area\n\t\tif (view.$handleSelection && (new Date() - bs)<500) return false;\n\t});\n\n\ttable.attachEvent(\"onBeforeAreaAdd\", (area) => {\n\t\t//[FIXME] \n\t\t//block selection of row-id column\n\t\t//temporary fix, we need to fire onBeforeBlockSelect when selection moves\n\t\t//so the common onBeforeBlockSelect handler will block rowId selection\n\t\tif (area.start.column == \"rowId\") return false;\n\n\t\t//if we have an active editor, we need to close it on block selection\n\t\t//ignore, when selecting the editor's cell\n\t\tvar editor = table.getEditor();\n\t\tif (editor && (\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ||\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ))\n\t\t\ttable.editStop();\n\n\t\tif (!view.$handleSelection) return true;\n\t\t\n\n\t\tlet blockStart = encode[area.start.column] + area.start.row;\n\t\tlet blockEnd = encode[area.end.column] + area.end.row;\n\n\t\tvar res = view.$handleSelection(area.start, area.end, blockStart, blockEnd);\n\n\t\tif (res !== false){\n\t\t\tview.$handleSelection = null;\n\t\t\ttable.removeSelectArea();\n\t\t}\n\n\t\treturn res;\n\t});\n\n\twebix.event(table.$view, \"mousedown\", function(e){\n\t\tif (view.$handleSelection)\n\t\t\treturn webix.html.preventEvent(e);\n\t});\n}\n","export function expandSelection(r, view){\n\tlet maxY = view.config.rowCount;\n\tlet maxX = view.config.columnCount;\n\tlet table = view._table;\n\n\tlet nr1 = r.start.row, nr2 = r.end.row, nc1 = r.start.column, nc2 = r.end.column;\n\n\tfor (let i=nr1-1; i>0; i--){\n\t\tif (getValue(i, r.start.column, table))\n\t\t\tnr1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nr2+1; i<maxY; i++){\n\t\tif (getValue(i, r.end.column, table))\n\t\t\tnr2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc1-1; i>0; i--){\n\t\tif (getValue(r.start.row, i, table))\n\t\t\tnc1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc2+1; i<maxX; i++){\n\t\tif (getValue(r.end.row, i, table))\n\t\t\tnc2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tlet newrange = { start:{ row:nr1, column:nc1 } , end:{ row: nr2, column: nc2 }};\n\tif (nr1 != r.start.row || nr2 != r.end.row || nc1 != r.start.column || nc2 != r.end.column){\n\t\tview._table.addSelectArea(newrange.start, newrange.end);\n\t}\n\n\treturn newrange;\n}\n\nfunction getValue(r,c, table){\n\tvar value = table.getItem(r)[c];\n\tif(value === undefined || value === \"\"){\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}","import {expandSelection} from \"../helpers/expand_selection\";\nimport {rangeObj} from \"../helpers/column_names\";\nimport group from \"./undo_group\";\nimport {_changeCondition} from \"./conditional_formats\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"sort-asc\" || cm.id === \"sort-desc\")\n\t\t\tsortRange(view, null, cm.id.replace(\"sort-\",\"\"));\n\t});\n}\n\nconst sorters = {\n\t\"int\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = parseFloat(a[key]) || dir*Infinity;\n\t\t\tlet d = parseFloat(b[key]) || dir*Infinity;\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;\n\t\t};\n\t},\n\t\"str\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = a[key].toString().toLowerCase();\n\t\t\tlet d = b[key].toString().toLowerCase();\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;  \n\t\t};\n\t}\n};\n\nexport function sortRange(view, range, dir){\n\trange = range || view._table.getSelectArea();\n\n\tif (range){\n\t\trange = rangeObj(range, view);\n\t\tlet fullrange = range;\n\t\tif (range.start.row === range.end.row)\n\t\t\tfullrange = expandSelection(range, view);\n\n\t\tconst key = view.getCellValue(range.start.row, range.start.column, false);\n\t\tconst type = isNaN(parseFloat(key)) ? \"str\" : \"int\";\n\n\t\tdir = (!dir || dir === \"asc\") ? 1 : -1;\n\t\tgroup.set(()=>\n\t\t\tsort(fullrange, range.start.column, type, dir, view)\n\t\t);\n\t}\n}\n\nfunction sort(range, by, type, dir, view){\n\tfor (let column = range.start.column; column <= range.end.column; column++){\n\t\t//get all selected column values\n\t\tconst values = [];\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst value = view.getCellValue(row, column, false);\n\t\t\t\tconst style = view.getStyle(row, column);\n\n\t\t\t\tlet math = view.getCellValue(row, column);\n\t\t\t\tmath = math && math[0] == \"=\" ? math : null;\n\n\t\t\t\tconst conditions = view.conditions.get(row,column);\n\t\t\t\tif(conditions)\n\t\t\t\t\t_changeCondition(\"remove\", row, column, conditions, null, view);\n\n\t\t\t\tvalues.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tstyle,\n\t\t\t\t\tmath,\n\t\t\t\t\trow,\n\t\t\t\t\tconditions\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//sort them\n\t\tvalues.sort(sorters[type](dir, \"value\"));\n\n\t\t//set new values to original column\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst element = values.shift();\n\n\t\t\t\tview.setStyle(row, column, (element.style || null));\n\t\t\t\tif(element.conditions)\n\t\t\t\t\t_changeCondition(\"update\", row, column, null, element.conditions, view);\n\n\t\t\t\tif (!element.math) view.setCellValue(row, column, element.value);\n\t\t\t\telse {\n\t\t\t\t\tconst newMath = view._mData.getStore().transposeMath(element.math, row - element.row, 0);\n\t\t\t\t\tview.setCellValue(row, column, newMath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tview.refresh();\n}","import {split} from \"./parser\";\n\nfunction updateSheetNames(view, formula, oldName, newName){\n\tif(formula.indexOf(\"!\") == -1)\n\t\treturn formula;\n\n\tconst stack = split(formula, view, true);\n\tfor(let i = 0; i < stack.length; i++){\n\t\tif(webix.isArray(stack[i])){\n\t\t\tconst thisSheet = stack[i][0] === oldName;\n\t\t\tlet sheet = thisSheet ? newName : stack[i][0];\n\t\t\tif(sheet.indexOf(\" \") != -1)\n\t\t\t\tsheet = `'${sheet}'`;\n\t\t\tstack[i] = `${sheet}!${stack[i][1]}`;\n\t\t}\n\t}\n\treturn stack.join(\"\");\n}\n\nfunction isFormula(val){\n\treturn typeof val == \"string\" && val[0] == \"=\";\n}\n\nexport function init(view){\n\tview.attachEvent(\"onSheetRename\", (name, newName) => {\n\t\tview._sheets.forEach(sheet => {\n\t\t\tconst activeSheet = sheet.name == view.getActiveSheet();\n\t\t\tif(activeSheet)\n\t\t\t\tsheet.content = view.serialize(); //actual data\n\n\t\t\tif(sheet.content.editors){\n\t\t\t\tsheet.content.editors.forEach(value => {\n\t\t\t\t\tconst options = value[2].options;\n\t\t\t\t\tif(options){\n\t\t\t\t\t\tif(typeof options == \"string\")\n\t\t\t\t\t\t\tvalue[2].options = updateSheetNames(view, options, name, newName);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor (let i = 0; i < options.length; i++){\n\t\t\t\t\t\t\t\tconst option = options[i];\n\t\t\t\t\t\t\t\tif(typeof option == \"string\"){\n\t\t\t\t\t\t\t\t\tif(isFormula(option))\n\t\t\t\t\t\t\t\t\t\toptions[i] = updateSheetNames(view, option, name, newName);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(isFormula(option.id))\n\t\t\t\t\t\t\t\t\toption.id = updateSheetNames(view, option.id, name, newName);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(sheet.content.conditions){\n\t\t\t\tsheet.content.conditions.forEach(value => {\n\t\t\t\t\tif(isFormula(value[3]))\n\t\t\t\t\t\tvalue[3] = updateSheetNames(view, value[3], name, newName);\n\t\t\t\t});\n\t\t\t\tif(activeSheet){\n\t\t\t\t\tview.conditions.clear();\n\t\t\t\t\tview.conditions.parse( sheet.content.conditions );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"gridlines-hide\"){\n\t\t\thideGridlines(view, value);\n\t\t}\n\t});\n}\n\nexport function hideGridlines(view, state = true){\n\tvar grid = view.$$(\"cells\");\n\tvar borderless = grid.$view.className.indexOf(\"webix_borderless\") !=-1;\n\tif (state === \"toggle\")\n\t\tstate = !borderless;\n\n\tif(!borderless && state){\n\t\twebix.html.addCss( grid.$view, \"webix_borderless\", true);\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value:true}]);\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue:true, value: false}]);\n\t}\n\telse if(borderless && !state){\n\t\twebix.html.removeCss( grid.$view, \"webix_borderless\");\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value:false}]);\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue:false, value: true}]);\n\t}\n}\n\nexport function serialize(view, data){\n\tdata.table.gridlines = view.$$(\"cells\").$view.className.indexOf(\"webix_borderless\") !=-1?0:1;\n}\n\nexport function load(view, data){\n\tvar mode = false;\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.gridlines))\n\t\tmode = !data.table.gridlines;\n\thideGridlines(view, mode);\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"header-hide\"){\n\t\t\thideHeaders(view, value);\n\t\t}\n\t});\n}\n\nexport function hideHeaders(view, state){\n\tconst grid = view.$$(\"cells\");\n\tconst old = !grid.config.header;\n\n\tif (state == \"toggle\")\n\t\tstate = grid.config.header;\n\n\tif(state != old){\n\t\tgrid.config.header = !state;\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-headers\", value:state}]);\n\t\tview.callEvent(\"onAction\", [\"header-hide\", {newValue:state, value:old}]);\n\t}\n\n\tconst firstVisible = grid.isColumnVisible(\"rowId\");\n\tif((firstVisible && state) || (!firstVisible && !state))\n\t\tgrid.hideColumn(\"rowId\", {}, true, state);\n\n\tgrid.refreshColumns();\n}\n\nexport function serialize(view, data){\n\tdata.table.headers = view.$$(\"cells\").config.header ? 1 : 0;\n}\n\nexport function load(view, data){\n\tlet mode;\n\tif(data.table && !webix.isUndefined(data.table.headers))\n\t\tmode = !data.table.headers;\n\thideHeaders(view, mode);\n}","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tview.comments = {\n\t\tget: function(row, column){\n\t\t\treturn getComment(view, row, column);\n\t\t},\n\t\tadd: function(row, column, comment){\n\t\t\tcommentCell(view, row, column, comment);\n\t\t},\n\t\tremove: function(row, column){\n\t\t\tremoveComment(view, row, column);\n\t\t},\n\t\t_activeComment: {},\n\t\t_pull:{}\n\t};\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type === \"comment\")\n\t\t\t_undoComment(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name,p.inc,p.data, p.start);\n\t});\n}\n\nfunction _undoComment(view, row, column, value){\n\tif(getComment(view, row, column))\n\t\tremoveComment(view, row, column, true);\n\tif(value)\n\t\tcommentCell(view, row, column, value, true);\n}\n\nfunction reset(view){\n\tview.comments._pull = {};\n}\n\nfunction removeComment(view, row, column, silent){\n\tif(getComment(view, row, column)){\n\t\tif (!silent)\n\t\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue: null, value: view.comments._pull[row][column]}]);\n\t\tdelete view.comments._pull[row][column];\n\t}\n\tview.$$(\"cells\").updateItem(row,column);\n}\n\nexport function removeCommentsRange(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tif(getComment(view, cell.row, cell.column))\n\t\t\t\tremoveComment(view, cell.row, cell.column);\n\t\t});\n\t\tview.$$(\"cells\").refresh();\n\t});\n}\n\nfunction commentCell(view, row, column, comment, silent){\n\tvar oldValue = getComment(view, row, column) ? view.comments._pull[row][column] : null;\n\tvar table = view.$$(\"cells\");\n\n\tif(typeof comment == \"string\")\n\t\tcomment = comment.trim() ? comment : \"\";\n\tview.comments._pull[row] = view.comments._pull[row] ? view.comments._pull[row] : {};\n\tview.comments._pull[row][column] = comment;\n\n\ttable.addCellCss(row, column, \"ssheet_commented_cell\");\n\n\tif (!silent)\n\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue:comment, value:oldValue}]);\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tcomments = [];\n\tfor(row in view.comments._pull){\n\t\tfor(column in view.comments._pull[row])\n\t\t\tif(view.comments._pull[row][column])\n\t\t\t\tcomments.push([row, column, view.comments._pull[row][column]]);\n\t}\n\tdata.comments = comments;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tcomments = data.comments;\n\n\tif(comments)\n\t\tfor(i = 0; i < comments.length; i++)\n\t\t\tcommentCell(view, comments[i][0], comments[i][1], comments[i][2], true);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet comments = data.comments,\n\t\ti = comments.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = comments[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete comment if row was deleted\n\t\t\t\t\t\tcomments.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tcomments[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tcomments.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tcomments[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getComment(view, row, column){\n\treturn view.comments._pull[row] && view.comments._pull[row][column] ? view.comments._pull[row][column] : \"\";\n}","import * as m1  from \"./hide_gridlines\";\nimport * as m2  from \"./hide_headers\";\nimport * as m3  from \"./lock_cell\";\nimport * as m4  from \"./dropdown\";\nimport * as m5  from \"./filter\";\nimport * as m6  from \"./hide_row_col\";\nimport * as m7  from \"./comments\";\n\nexport function init(view){\n\tvar modules = [m1,m2,m3,m4,m5,m6,m7];\n\tview.attachEvent(\"onDataSerialize\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].serialize)\n\t\t\t\tmodules[i].serialize(view,data);\n\t\t}\n\n\t});\n\tview.attachEvent(\"onDataParse\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].load)\n\t\t\t\tmodules[i].load(view,data);\n\t\t}\n\t});\n}","const types = [\".xls\",\".xlt\",\".xla\",\".xlsx\",\".xlsm\",\".xltx\",\".xltm\",\".xlam\",\".xlsb\"];\n\nexport function init(view){\n\tlet uploader;\n\tif (window.XMLHttpRequest && (new XMLHttpRequest()).upload){\n\t\tuploader = webix.ui({\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\taccept: types.join()\n\t\t});\n\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",webix.bind(function(upload){\n\t\t\tif(types.indexOf(\".\"+upload.type.toLowerCase())>-1){\n\t\t\t\tview.reset();\n\n\t\t\t\tif(!upload.file.options)\n\t\t\t\t\tupload.file.options = {};\n\t\t\t\twebix.extend(upload.file.options, {cellDates: false});\n\n\t\t\t\tview.parse(upload.file, \"excel\");\n\t\t\t}\n\t\t\treturn false;\n\t\t},this));\n\n\t\tview._destroy_with_me.push(uploader);\n\t}\n\n\tview.attachEvent(\"onCommand\", (obj) => {\n\t\tif (obj.id === \"excel-import\")\n\t\t\tstartImport(view, uploader);\n\t});\n}\n\nfunction startImport(view, uploader){\n\tif (!uploader)\n\t\tview.alert(webix.i18n.spreadsheet.labels[\"import-not-support\"]);\n\telse\n\t\twebix.delay(() => uploader.fileDialog());\n}","export function print(view, options){\n\tlet active = view._activeSheet;\n\n\tlet html = _buildHtml(view, options, active);\n\twebix.html.insertBefore(html, options.docFooter, document.body);\n\twindow.print();\n\t_cleanHtml(view, html);\n\n\tview.showSheet(active);\n}\n\nexport function init(view){\n\tview.$customPrint = function(options){\n\t\tprint(view, options);\n\t};\n}\n\nfunction _cleanHtml(view, html){\n\twebix.html.remove(html);\n\n\tview._sheets.forEach((sheet, i) => {\n\t\twebix.html.removeStyle(\".wss_\"+view.$index+\"_\"+i);\n\t});\n}\nfunction _buildHtml(view, options, active){\n\tlet doc = webix.html.create(\"div\", { \"class\":\"webix_ssheet_print\"});\n\n\toptions.xCorrection = 1;\n\toptions.header = options.header || false;\n\toptions.trim = webix.isUndefined(options.trim) ? true : options.trim;\n\toptions.sheetnames = webix.isUndefined(options.sheetnames) ? true : options.sheetnames;\n\tconst baseIndex = view.$index;\n\n\tview._sheets.forEach((sheet, i) => {\n\t\tview.$index = baseIndex+\"_\"+i;\n\t\tif(options.data ===\"all\" || (options.data !== \"all\" && sheet.name === active)){\n\t\t\tview.showSheet(sheet.name);\n\t\t\tlet prefix = \"wss_\"+view.$index;\n\n\t\t\tif(options.sheetnames){\n\t\t\t\tlet sheetname = webix.html.create(\"div\", { \"class\":\"webix_view webix_ssheet_sheetname\"}, sheet.name+\":\");\n\t\t\t\tdoc.appendChild(sheetname);\n\t\t\t}\n\n\t\t\tview._print = true;\n\t\t\tlet table = view._table.$customPrint(options, true);\n\t\t\tdelete view._print;\n\n\t\t\t//for empty sheet we don't have any HTML\n\t\t\tif (table.firstChild)\n\t\t\t\ttable.firstChild.className += \" \"+prefix;\n\t\t\tdoc.appendChild(table);\n\n\t\t\tif(options.data == \"all\" && i+1 < view._sheets.length){\n\t\t\t\tvar br = webix.html.create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\n\t\t\t\tdoc.appendChild(br);\n\t\t\t}\n\t\t}\n\t});\n\tview.$index = baseIndex;\n\n\treturn doc;\n}","import { style_names } from \"../operations/styles\";\nimport { getType } from \"../operations/types\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { getFormatSource } from \"../operations/formats\";\nimport { getDimension } from \"../helpers/array\";\nimport { getConditionCss } from \"../operations/conditional_formats\";\nimport { getRenderedValue } from \"../table\";\n\nexport function init(view){\n\tconst table = view._table;\n\tview.$exportView = function(options){\n\t\tconst pdf = options.export_mode == \"pdf\";\n\t\tconst excel = options.export_mode == \"excel\";\n\t\tconst defaultOptions = {\n\t\t\tstubCells: true,\n\t\t\theader: false,\n\t\t\tfooter:false,\n\t\t\theights:true,\n\t\t\trawValues: !pdf,\n\t\t\tfilterHTML:true,\n\t\t\tspans: true,\n\t\t\tstyles:true,\n\t\t\tmath: !pdf,\n\t\t\thidden: excel,\n\t\t\txCorrection: table.config.header || options.hidden ? 1 : 0,\n\t\t\tignore:{rowId:true},\n\t\t\tconditions:true\n\t\t};\n\n\t\twebix.extend(options, defaultOptions);\n\n\t\tif(excel || pdf)\n\t\t\treturn _exportView(view, options);\n\t\telse\n\t\t\treturn table;\n\t};\n\n\ttable.$getExportValue = function(row, column, options){\n\t\tlet value = view.getCellValue(row, column, options.math);\n\t\tconst mode = options.export_mode;\n\t\tconst math = options.math && value[0] == \"=\" && value.length > 1;\n\n\t\tif((mode == \"pdf\" || mode == \"csv\") && !math && !options.rawValues)\n\t\t\tvalue = getRenderedValue(view, row, column);\n\t\telse if(mode == \"excel\" && math){\n\t\t\tif(/^=(image|sparkline)\\(/i.test(value))\n\t\t\t\tvalue = \"\";\n\t\t\telse\n\t\t\t\tvalue = {\n\t\t\t\t\tvalue: /^=hyperlink\\(/i.test(value) ? value.split(\"\\\"\")[3] : view.getCellValue(row, column, false),\n\t\t\t\t\tformula: value\n\t\t\t\t};\n\t\t}\n\n\t\treturn value;\n\t};\n}\n\nfunction _exportView(view, options){\n\tconst excel = options.export_mode == \"excel\";\n\n\tif(options.sheets === true) \n\t\toptions.sheets = view._sheets.map(function(s){ return s.name;});\n\telse if(!options.sheets || !options.sheets.length)\n\t\toptions.sheets = [view._activeSheet];\n\telse if(typeof options.sheets == \"string\")\n\t\toptions.sheets = [options.sheets];\n\n\toptions.dataOnly = true;\n\n\tlet data = [];\n\tlet active = view._activeSheet;\n\n\tfor(let i = 0; i<options.sheets.length; i++){\n\t\tconst sheet = options.sheets[i];\n\t\tconst id = sheet.id || sheet;\n\n\t\tview.showSheet(id);\n\n\t\tif(options.hidden)\n\t\t\toptions.xCorrection = 1;\n\n\t\tconst sheetOptions = sheet.options ? webix.extend(sheet.options, options) : webix.copy(options);\n\t\tif(id != active)\n\t\t\tsheetOptions._hidden = true;\n\t\tif(!sheetOptions.name)\n\t\t\tsheetOptions.name = id;\n\n\t\tconst pdfTable = !excel && sheetOptions.display != \"image\";\n\n\t\tconst serialized = view.serialize();\n\t\tconst [rows, cols] = getDimension(serialized.data, serialized.spans, 0, 0);\n\n\t\tif(!excel){\n\t\t\tif(webix.isUndefined(sheetOptions.textBefore))\n\t\t\t\tsheetOptions.textBefore = sheetOptions.name;\n\t\t\tif(pdfTable){\n\t\t\t\tsheetOptions.ignore = sheetOptions.ignore || {};\n\t\t\t\tfor(let i = cols+1; i <= view.config.columnCount; i++){\n\t\t\t\t\tsheetOptions.ignore[i] = true;\n\t\t\t\t}\n\n\t\t\t\tconst filter = sheetOptions.filter || (()=>true);\n\t\t\t\tsheetOptions.filter = obj =>{\n\t\t\t\t\treturn obj.id <= rows && filter.apply(this, arguments);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst sheetData = webix[excel ? \"toExcel\" : \"toPDF\"](view._table, sheetOptions);\n\t\tif(pdfTable && sheetData[0].scheme.length == 0)\n\t\t\tcontinue;\n\n\t\tif((excel || pdfTable) && sheetOptions.styles){\n\t\t\tconst styles = sheetData[0].styles = _getStyles(view, sheetOptions, excel, rows, cols);\n\n\t\t\tif(pdfTable)\n\t\t\t\t_updatePdfData(styles, sheetData, sheetOptions, view, serialized);\n\t\t}\n\n\t\tdata = data.concat(sheetData);\n\n\t\tif(excel){\n\t\t\tdata[i].ranges = [];\n\n\t\t\tview.ranges.serialize(id).forEach(range => {\n\t\t\t\tconst ref = range[1].split(\"!\");\n\t\t\t\tdata[i].ranges.push({\n\t\t\t\t\tSheet: range[2] ? null : i,\n\t\t\t\t\tName: range[0],\n\t\t\t\t\tRef: ref[0]+\"!\"+ref[1].replace(/[0-9]+|[A-Z]+/gi, (match)=>`$${match}`)\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tif(options.autowidth)\n\t\t\t\tgetAutowidth(sheetOptions, options);\n\t\t}\n\t}\n\n\tview.showSheet(active);\n\tdelete options.dataOnly;\n\treturn data;\n}\n\nfunction _updatePdfData(styles, sheetData, sheetOptions, view, serialized){\n\tconst header = sheetOptions.header ? 1 : 0;\n\n\tif (sheetOptions.spans) {\n\t\tfor (let idx in serialized.spans) {\n\t\t\tif (serialized.spans[idx][2] > 1) {\n\t\t\t\tlet row = serialized.spans[idx][0] - 1 + header, // zero-based row position\n\t\t\t\t\tcol = serialized.spans[idx][1] - 1, // zero-based col position\n\t\t\t\t\tcols = serialized.spans[idx][2];\n\t\t\t\tif (styles[row] && styles[row][col]) {\n\t\t\t\t\tstyles[row][col].colspan = cols;\n\t\t\t\t\t// if colspan, then remove merged cells (else PDFJS will shift columns)\n\t\t\t\t\tconst rowData = sheetData[0].exportData[row - header];\n\t\t\t\t\tif (rowData){\n\t\t\t\t\t\t// remove merged cell values\n\t\t\t\t\t\trowData.splice(col + 1, cols - 1);\n\t\t\t\t\t}\n\t\t\t\t\tlet style = Object.values(styles[row]);\n\t\t\t\t\tstyle.splice(col + 1, cols - 1); // remove merged cell styles\n\t\t\t\t\tstyles[row] = style;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst data = sheetData[0].exportData;\n\tfor(let r = 0; r < data.length; r++){\n\t\tfor (let c = 0; c < data[r].length; c++) {\n\t\t\tlet height = view.$$(\"cells\").config.rowHeight;\n\n\t\t\tif(sheetOptions.heights && serialized.sizes.length){\n\t\t\t\tfor(let s = 0; s < serialized.sizes.length; s++){\n\t\t\t\t\tconst rowSize = serialized.sizes[s][0];\n\t\t\t\t\tif(rowSize && rowSize == r+1){\n\t\t\t\t\t\theight = serialized.sizes[s][2];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cellStyle = styles[r + header][c];\n\t\t\tconst align = cellStyle.vertAlign;\n\t\t\tconst pad = height*0.75 - cellStyle.fontSize; // available px for padding in top & bottom\n\t\t\tcellStyle.paddingTop = (align == \"top\" ? 0 : (align == \"bottom\" ? pad : pad / 2));\n\t\t\tcellStyle.paddingBottom = (align == \"bottom\" ? 0 : (align == \"top\" ? pad : pad / 2));\n\t\t}\n\t}\n}\n\nfunction getAutowidth(view, options){\n\tconst prop = options.orientation && options.orientation == \"landscape\" ? \"height\" : \"width\";\n\tlet width;\n\n\tif(view.$width)\n\t\twidth = view.$width;\n\telse //'view' can be local settings and we need to compare them with common ones\n\t\twidth = view[prop];\n\n\toptions[prop] = Math.max(options[prop] || 0, width || 0);\n}\n\nfunction _safeColor(str){\n\tstr = str.substring(1);\n\tif(str.length === 3) str = str+str;\n\treturn str;\n}\n\nfunction _getDefaults(options){\n\tlet d = defaultStyles;\n\tif(options.export_mode == \"excel\")\n\t\treturn {\n\t\t\tfont:{\n\t\t\t\tsz:d[\"font-size\"].replace(\"px\", \"\")*0.75,\n\t\t\t\tname:d[\"font-family\"].replace(/'|,.*$/g, \"\"),\n\t\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\t},\n\t\t\talignment:{\n\t\t\t\thorizontal:d[\"text-align\"],\n\t\t\t\tvertical:d[\"vertical-align\"]==\"middle\"?\"center\":d[\"vertical-align\"],\n\t\t\t\twrapText:d[\"white-space\"]!=\"nowrap\"\n\t\t\t}\n\t\t};\n\telse\n\t\treturn {\n\t\t\tfontSize: d[\"font-size\"].replace(\"px\", \"\")*0.75,\n\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\ttextAlign: d[\"text-align\"],\n\t\t\twhiteSpace: (d[\"white-space\"]!=\"nowrap\")\n\t\t};\n}\n\nfunction _getStyles(view, options, excel, rows, cols){\n\tview.compactStyles();\n\n\tlet result = [];\n\tconst cached = {};\n\tconst cachedConditions = {};\n\tconst defaults = _getDefaults(options);\n\n\tif(excel && options.docHeader) result  = result.concat([{0:_getDocStyle(options.docHeader.css, defaults)}, {}]);\n\tif(options.header) result.push({});\n\n\tconst delta = result.length;\n\n\tconst grid = view.$$(\"cells\");\n\n\tlet rIndex = delta;\n\tgrid.eachRow(row =>{\n\t\tif(row > rows)\n\t\t\treturn;\n\n\t\tlet cIndex = 0;\n\t\tgrid.eachColumn(col => {\n\t\t\tif(cIndex > cols)\n\t\t\t\treturn;\n\n\t\t\tif(cIndex >= options.xCorrection){\n\t\t\t\tconst css = view.getStyle(row, col);\n\t\t\t\tconst index = cIndex - options.xCorrection;\n\n\t\t\t\tresult[rIndex] = result[rIndex] || {};\n\n\t\t\t\tlet styles;\n\t\t\t\tif(css){\n\t\t\t\t\tif(cached[css.id])\n\t\t\t\t\t\tstyles = webix.copy(cached[css.id]);\n\t\t\t\t\telse{\n\t\t\t\t\t\tstyles = _getCellStyle(css.text, excel);\n\n\t\t\t\t\t\tfor(let name in defaults){\n\t\t\t\t\t\t\tif(excel)\n\t\t\t\t\t\t\t\twebix.extend(styles[name], defaults[name]);\n\t\t\t\t\t\t\telse if (!styles[name])\n\t\t\t\t\t\t\t\tstyles[name] = defaults[name];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcached[css.id] = webix.copy(styles);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tstyles = webix.copy(defaults);\n\n\t\t\t\tif(options.conditions){\n\t\t\t\t\t//not real excel condition, save only bg and color (sheetJS doesn't support)\n\t\t\t\t\tconst condition = _getCellConditions(view, row, col, cachedConditions);\n\t\t\t\t\tif(condition)\n\t\t\t\t\t\t_updateStyleCondition(styles, condition, excel);\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index] = styles;\n\n\t\t\t\tlet type;\n\t\t\t\tif(options.math){\n\t\t\t\t\tconst math = view.getCellValue(row, col);\n\t\t\t\t\tif(typeof math == \"string\" && math[0] == \"=\" && math.length > 1){\n\t\t\t\t\t\tconst value = view.getCellValue(row, col, false);\n\t\t\t\t\t\tif(isNaN(value))\n\t\t\t\t\t\t\ttype = \"string\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index].type = type || getType(view, row, col);\n\t\t\t}\n\t\t\tcIndex++;\n\t\t}, options.hidden);\n\t\trIndex++;\n\t}, options.hidden);\n\n\tif(excel && options.docFooter) result  = result.concat([{},{0:_getDocStyle(options.docFooter.css, defaults)}]);\n\n\treturn result;\n}\n\nfunction _getCellStyle(styles, excel){\n\tlet str = styles.split(\";\");\n\tlet stl = {};\n\tif(excel)\n\t\tstl = { font:{}, alignment:{}, border:{}};\n\n\tfor(let s = 0; s<str.length; s++){\n\t\tif(str[s]){\n\t\t\tif(excel)\n\t\t\t\t_getExcelCellStyle(stl, str, s);\n\t\t\telse\n\t\t\t\t_getPdfCellStyle(stl, str, s);\n\t\t}\n\t}\n\n\treturn stl;\n}\n\nfunction _getCellConditions(view, r, c, cached){\n\tconst rendered = getRenderedValue(view, r, c);\n\tconst css = getConditionCss(view, r, c, rendered);\n\tif(css){\n\t\tif(cached[css])\n\t\t\treturn cached[css];\n\t\tconst el = webix.html.create(\"div\", {\"class\":css});\n\t\tdocument.body.appendChild(el);\n\n\t\tconst computed = window.getComputedStyle(el);\n\t\tconst bg = computed.backgroundColor;\n\t\tconst color = computed.color;\n\n\t\tdocument.body.removeChild(el);\n\n\t\tcached[css] = [bg, color];\n\t\treturn cached[css];\n\t}\n}\n\nfunction _updateStyleCondition(stl, condition, excel){\n\tlet [bg, color] = condition.map(val => webix.color.rgbToHex(val));\n\tif(excel){\n\t\tstl.fill = {fgColor:{rgb:bg}};\n\t\tstl.font.color = {rgb:color};\n\t}\n\telse{\n\t\tstl.backgroundColor = bg;\n\t\tstl.color = color;\n\t}\n}\n\nfunction _getExcelCellStyle(stl, str, s){\n\tswitch (style_names[s]){\n\t\tcase \"color\":\n\t\t\tstl.font.color = {rgb:_safeColor(str[s])};\n\t\t\tbreak;\n\t\tcase \"background\":{\n\t\t\tconst fill = _safeColor(str[s]);\n\t\t\tif(fill && fill.toLowerCase() !== \"ffffff\")\n\t\t\t\tstl.fill = { fgColor:{ rgb:fill}};\n\t\t\tbreak;\n\t\t}\t\n\t\tcase \"text-align\":\n\t\t\tstl.alignment.horizontal = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tstl.font.name = str[s].replace(/'|,.*$/g, \"\"); // cut off fallback font\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.font.sz = str[s].replace(\"px\", \"\")*0.75; //px to pt conversion\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.font.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"text-decoration\":\n\t\t\tstl.font.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.font.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.alignment.vertical = str[s] == \"middle\"?\"center\":str[s];\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.alignment.wrapText = str[s] == \"wrap\";\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tstl.format = getFormatSource(str[s], true) || \"\";\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":\n\t\t\tstl.border[ style_names[s].split(\"-\")[1] ] = getBorderStyles(str[s], true);\n\t\t\tbreak;\n\t}\n}\n\nfunction _getPdfCellStyle(stl, str, s){\n\tswitch (style_names[s]) {\n\t\tcase \"color\":\n\t\t\tstl.color = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"background\":\n\t\t\tstl.backgroundColor = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"text-align\":\n\t\t\tstl.textAlign = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.fontSize = str[s].replace(\"px\", \"\")*0.75;\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"text-decoration\":\n\t\t\tstl.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.vertAlign = str[s]; // not supported in PDFJS, so simulate with lineHeight and paddingTop\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.whiteSpace = (str[s] != \"nowrap\");\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":{\n\t\t\tconst pos = style_names[s].split(\"-\")[1];\n\t\t\tstl[`border${pos[0].toUpperCase() + pos.substring(1)}Color`] = getBorderStyles(str[s]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction getBorderStyles(val, excel){\n\tconst [color, type] = val.split(\",\");\n\n\tif(excel)\n\t\treturn { color:{ rgb:_safeColor(color)}, style:type};\n\telse\n\t\treturn _safeColor(color);\n}\n\nfunction _getDocStyle(css){\n\tif(!css) return {};\n\tvar str = [];\n\tfor(let i =0; i<style_names.length; i++)\n\t\tstr.push(css[style_names[i]]||\"\");\n\treturn _getCellStyle(str.join(\";\"), true);\n}","import { style_names } from \"../operations/styles\";\nimport { fontFamily} from \"../toolbar/buttons\";\nimport { defaultStyles} from \"../toolbar/defaults\";\n\nexport function init(view){\n\tview._parseExcel = function(obj, driver){\n\t\tvar options = obj.options || {};\n\t\toptions.math = view.config.math;\n\n\t\tvar full = { sheets:[]};\n\t\tfor(let i  = 0; i< obj.names.length; i++){\n\t\t\toptions.name = obj.names[i];\n\t\t\tfull.sheets.push({\n\t\t\t\tname:options.name,\n\t\t\t\tcontent:_excel_to_data(driver.getSheet(obj, options), obj.ranges, i)\n\t\t\t});\n\t\t}\n\t\treturn full;\n\t};\n\tview._parseCsv = function(obj, driver){\n\t\tobj = driver.getRecords(obj);\n\n\t\tvar dataObj = webix.copy(obj);\n\t\tvar data = [];\n\n\t\tfor(let i = 0; i<dataObj.length; i++){\n\t\t\tlet item = dataObj[i].split(driver.cell);\n\t\t\tfor(let c  = 0; c<item.length; c++){\n\t\t\t\tvar row = i+1, column = c+1;\n\t\t\t\tdata.push([row, column, item[c]]);\n\t\t\t}\n\t\t}\n\t\treturn { data:data };\n\t};\n}\n\n\nfunction _excel_to_data(obj, ranges, index){\n\tvar dataObj = webix.copy(obj.data);\n\tvar data =  [];\n\n\tfor (let i = 0; i < dataObj.length; i++){\n\t\tfor(let c = 0; c<dataObj[0].length; c++){\n\t\t\tvar row = i+1, column = c+1;\n\t\t\tdata.push([row, column, dataObj[i][c]]);\n\t\t}\n\t}\n\tobj.data = data;\n\n\t//merged cells\n\tif(obj.spans){\n\t\tfor(let i = 0; i<obj.spans.length; i++){\n\t\t\tobj.spans[i][0]++;\n\t\t\tobj.spans[i][1]++;\n\t\t}\n\t}\n\n\t//named ranges\n\tif(ranges){\n\t\tfor(let r = 0; r<ranges.length; r++){\n\t\t\t//we don't support global named ranges, so import only sheet-based :(\n\t\t\tif(ranges[r].Sheet === index){\n\t\t\t\tobj.ranges = obj.ranges || [];\n\t\t\t\tobj.ranges.push([ranges[r].Name.toUpperCase(), ranges[r].Ref.substring(ranges[r].Ref.indexOf(\"!\")+1).replace(/\\$/g, \"\")]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//cell styles\n\tif(obj.styles)\n\t\t_getStyles(obj);\n\n\tif(obj.types)\n\t\t_getTypes(obj);\n\n\tif(obj.hidden){\n\t\t_getHidden(obj);\n\t}\n\n\t//column width and row height\n\tif(obj.sizes){\n\t\tfor(let i = 0; i<obj.sizes.length; i++){\n\t\t\tif(obj.sizes[i][0] == \"column\")\n\t\t\t\tobj.sizes[i] = [0, obj.sizes[i][1]+1, obj.sizes[i][2]];\n\t\t\telse\n\t\t\t\tobj.sizes[i] = [obj.sizes[i][1]+1, 0, obj.sizes[i][2]];\n\t\t}\n\t}\n\n\treturn obj; \n}\n\n//ARGB conversion\nfunction _safeColor(str){\n\tstr = str || \"000000\";\n\tif(str.length === 8) str = str.substring(2);\n\treturn \"#\"+str;\n}\n\n//only fonts that we support can be imported\nfunction _safeFont(str){\n\tlet safe = defaultStyles[\"font-family\"];\n\tfor(let i = 0; i<fontFamily.length; i++){\n\t\tif(fontFamily[i].value == str) { safe = fontFamily[i].id; break; }\n\t}\n\treturn safe;\n}\n\nfunction _getTypes(obj){\n\tobj.types.forEach(type => {\n\t\tfor(let i = 0; i < obj.data.length; i++){\n\t\t\tif(obj.data[i][0] === type[0]+1 && obj.data[i][1] === type[1]+1){\n\t\t\t\tobj.data[i][4] = type[2];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction _getHidden(obj){\n\tconst hidden = {\n\t\trow:[],\n\t\tcolumn:[]\n\t};\n\n\tfor(let i = 0; i < obj.hidden.length; i++){\n\t\tconst item = obj.hidden[i];\n\t\tif(item[0] == \"column\")\n\t\t\thidden.column.push(item[1]+1);\n\t\telse\n\t\t\thidden.row.push(item[1]+1);\n\t}\n\n\tobj.table = {hidden};\n}\n\nfunction _getBorderStyles(pos, stl){\n\tpos = pos.replace(\"border-\", \"\");\n\tif(stl.border && stl.border[pos]){\n\t\tconst border = stl.border[pos];\n\t\tconst color = _safeColor(border.color.rgb) || \"\";\n\t\tconst type = border.style || \"\";\n\t\treturn `${color},${type}`;\n\t}\n\treturn \"\";\n}\n\nfunction _getStyles(obj){\n\tlet styleshash = {}, styles = [], stylescount = 1;\n\tfor(let i = 0; i<obj.styles.length; i++){\n\t\tlet str = [], stl = obj.styles[i][2], css;\n\n\t\tfor(let s  = 0; s<style_names.length; s++){\n\t\t\tswitch (style_names[s]){\n\t\t\t\tcase \"color\": \n\t\t\t\t\tstr[s] = stl.font && stl.font.color?(_safeColor(stl.font.color.rgb)||\"\"):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"background\":\n\t\t\t\t\tstr[s] = stl.fill && stl.fill.fgColor?(_safeColor(stl.fill.fgColor.rgb) ||\"\"):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-align\":\n\t\t\t\t\tstr[s] = (stl.alignment ?stl.alignment.horizontal:\"\") || defaultStyles[\"text-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-family\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.name?_safeFont(stl.font.name):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-size\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.sz?((stl.font.sz/0.75)+\"px\" ||\"\"):\"\"; //pt to px conversion\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-style\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.italic?\"italic\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-decoration\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.underline?\"underline\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-weight\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.bold?\"bold\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vertical-align\":\n\t\t\t\t\tvar va = stl.alignment ? (stl.alignment.vertical || \"\"):\"\";\n\t\t\t\t\tstr[s] = (va ==\"center\"?\"middle\":va) || defaultStyles[\"vertical-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"wrap\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.wrapText?\"wrap\":\"nowrap\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"borders\":\n\t\t\t\t\tstr[s] = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"format\":\n\t\t\t\t\tstr[s] = \"\"; //stl.numFmt\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"border-right\":\n\t\t\t\tcase \"border-bottom\":\n\t\t\t\tcase \"border-left\":\n\t\t\t\tcase \"border-top\":\n\t\t\t\t\tstr[s] = _getBorderStyles(style_names[s], stl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tstr = str.join(\";\");\n\t\tcss = styleshash[str] || \"wss\"+stylescount;\n\n\t\tfor(let d = 0; d<obj.data.length; d++){\n\t\t\tif(obj.data[d][0] === obj.styles[i][0]+1 && obj.data[d][1] === obj.styles[i][1]+1){\n\t\t\t\tobj.data[d][3] = css;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(!styleshash[str]){\n\t\t\tstyles.push([css, str]);\n\t\t\tstyleshash[str] = css;\n\t\t\tstylescount++;\n\t\t}\n\t}\n\tobj.styles = styles;\n}","import group from \"../operations/undo_group\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tswitch (action.id) {\n\t\t\tcase \"clear-value\":\n\t\t\t\tview.clearRange(null,{values: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-style\":\n\t\t\t\tview.clearRange(null,{styles: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-conditional-formats\":\n\t\t\t\tview.clearRange(null,{conditions: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-dropdown-editors\":\n\t\t\t\tview.clearRange(null,{editors: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-all\":\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tview.clearRange(null,null);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-comments\":\n\t\t\t\tview.clearRange(null,{comments: true});\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import group from \"../operations/undo_group\";\nimport {adjustRow, adjustColumn} from \"../operations/column_operations\";\n\n/* row operations */\n\nexport function insertRow(row){\n\tcallCommand(this, \"add\", \"row\", row);\n}\n\nexport function deleteRow(row){\n\tcallCommand(this, \"del\", \"row\", row);\n}\n\nexport function setRowHeight(row, height){\n\tsetSize(this, \"row\", row, height);\n}\n\n/* col operations */\n\nexport function insertColumn(column){\n\tcallCommand(this, \"add\", \"column\", column);\n}\n\nexport function deleteColumn(column){\n\tcallCommand(this, \"del\", \"column\", column);\n}\n\nexport function setColumnWidth(column, width){\n\tsetSize(this, \"column\", column, width);\n}\n\n/* helpers */\n\nfunction getCells(view, id, group){\n\tif(!id){\n\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\tif(area)\n\t\t\tid = [area.start[group],area.end[group]];\n\t}\n\telse if(!webix.isArray(id)){\n\t\tid =  [id,id];\n\t}\n\treturn id;\n}\n\nfunction callCommand(view, name, group, id){\n\tlet start = {}, end = {};\n\tid = getCells(view, id, group);\n\tif(!id)\n\t\treturn;\n\tstart[group] = id[0];\n\tend[group] = id[1];\n\tview.callEvent(\"onCommand\", [{id:name,  group:group}, start, end]);\n}\n\nfunction setSize(view, type, id, size){\n\tid = getCells(view, id, type);\n\tif(!id)\n\t\treturn;\n\tgroup.set(()=>{\n\t\tfor (let i = id[0]; i <= id[1]; i++){\n\t\t\tif(size != \"auto\")\n\t\t\t\tview.$$(\"cells\")[type == \"row\" ? \"setRowHeight\" : \"setColumnWidth\"](i, size);\n\t\t\telse\n\t\t\t\t(type == \"row\" ? adjustRow : adjustColumn)(i, view);\n\t\t}\n\t});\n}","import * as lock from \"../operations/lock_cell\";\n\nexport function lockCell(row, column, state){\n\tlock.lockCell(this, row, column, state);\n}\n\nexport function isCellLocked(row, column){\n\treturn lock.isCellLocked(this, row, column);\n}","import group from \"../operations/undo_group\";\n\nexport function freezeColumns(column){\n\tconst grid = this.$$(\"cells\");\n\n\tif( webix.isUndefined(column) ){\n\t\tlet sel = this.getSelectedId(true);\n\t\tcolumn = sel.length?sel[0].column:0;\n\t}\n\n\tconst base = grid.config.columns[0].id == \"rowId\" ? 1 : 0;\n\tlet index = base;\n\tif (column && column != this._frozenColumns){\n\t\tfor (let i = column; i > 0; i--) {\n\t\t\tindex = grid.getColumnIndex(i)+1;\n\t\t\tif(index)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (!index) index = base;\n\t}\n\n\tgroup.set(function(){\n\t\tcheckSpans(this, \"column\", column);\n\t\tgrid.unselect();\n\t\tgrid.define(\"leftSplit\", index);\n\t\tgrid.refreshColumns();\n\n\t\tthis.callEvent(\"onAction\", [ \"freeze-column\", { value: (this._frozenColumns || 0), newValue: column}]);\n\t\tthis._frozenColumns = column || 0;\n\t},this);\n}\n\nexport function freezeRows(row){\n\tconst grid = this.$$(\"cells\");\n\n\tif( webix.isUndefined(row) ){\n\t\tlet sel = this.getSelectedId(true);\n\t\trow = sel.length?sel[0].row:0;\n\t}\n\n\tlet index = 0;\n\tif (row && row != this._frozenRows){\n\t\tfor (let i = row; i > 0; i--) {\n\t\t\tindex = grid.getIndexById(i)+1;\n\t\t\tif(index)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgroup.set(function(){\n\t\tcheckSpans(this, \"row\", row);\n\t\tgrid.unselect();\n\t\tgrid.define(\"topSplit\", index);\n\t\tgrid.refreshColumns();\n\n\t\tthis.callEvent(\"onAction\", [ \"freeze-row\", { value: this._frozenRows, newValue: row}]);\n\t\tthis._frozenRows = row || 0;\n\t},this);\n}\n\nfunction checkSpans(view, type, num){\n\tconst grid = view.$$(\"cells\");\n\tconst spans = grid.getSpan();\n\tlet changed;\n\n\tfor(let row in spans){\n\t\tif(type == \"row\" && row > num)\n\t\t\tcontinue;\n\n\t\tfor (let col in spans[row]){\n\t\t\tif(type == \"column\" && col > num)\n\t\t\t\tcontinue;\n\n\t\t\tconst span = spans[row][col];\n\t\t\tconst spanSize = type == \"row\" ? (row*1) + span[1] - 1 : (col*1) + span[0] - 1;\n\n\t\t\tif(spanSize > num){\n\t\t\t\tchanged = true;\n\t\t\t\tchangeSpan(\n\t\t\t\t\tview,\n\t\t\t\t\t[row, col],\n\t\t\t\t\ttype == \"row\" ? span[0] : span[0] - (spanSize - num),\n\t\t\t\t\ttype == \"row\" ? span[1] - (spanSize - num) : span[1]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif(changed)\n\t\tview.refresh();\n}\n\nfunction changeSpan(view, span, x, y){\n\tview.splitCell(span[0], span[1], true);\n\tview.combineCells(\n\t\t{\n\t\t\tcell:{\n\t\t\t\trow:span[0],\n\t\t\t\tcolumn:span[1]\n\t\t\t},\n\t\t\tx,\n\t\t\ty,\n\t\t},\n\t\ttrue\n\t);\n}","import * as gridlines from \"../operations/hide_gridlines\";\n\nexport function hideGridlines(state){\n\tgridlines.hideGridlines(this,state);\n}","import * as headers from \"../operations/hide_headers\";\n\nexport function hideHeaders(state){\n\theaders.hideHeaders(this,state);\n}","import * as hrows from \"../operations/hide_row_col\";\n\nexport function hideColumn(column,state){\n\throws.setState(this, column, state, \"column\");\n}\nexport function isColumnVisible(column){\n\treturn hrows.isColumnVisible(this, column);\n}\nexport function hideRow(row,state){\n\throws.setState(this, row, state, \"row\");\n}\nexport function isRowVisible(row){\n\treturn hrows.isRowVisible(this, row);\n}","import {image, chart} from \"../mathematics/writer\";\nimport {addMath} from \"../mathematics/methods\";\nimport {range as getRange} from \"../helpers/column_names\";\n\nexport function addImage(row, column, url){\n\tthis.setCellValue(row, column, image(url));\n\tthis.refresh();\n}\n\nexport function addSparkline(row, column, config){\n\tlet value = chart(config);\n\tthis.setCellValue(row, column, value);\n\tthis.refresh();\n}\n\nexport function getSheetData(name){\n\tconst sheet = this._mData.getPage(name);\n\n\tif(sheet)\n\t\treturn {\n\t\t\tgetValue: (r, c, math)=>{\n\t\t\t\treturn _normalizeVal(sheet.getValue(r-1, c-1, math));\n\t\t\t},\n\t\t\tgetRangeValue: (range)=>{\n\t\t\t\tconst pos = getRange(range, this, name);\n\t\t\t\tif (!pos) return [];\n\n\t\t\t\tconst page = pos[4] == name ? sheet : this._mData.getPage(pos[4]);\n\t\t\t\treturn page.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1).map(_normalizeVal);\n\t\t\t}\n\t\t};\n}\n\nfunction _normalizeVal(val){\n\treturn !val && val !== 0 ? \"\" : val;\n}\n\nexport function registerMathMethod(name, handler){\n\taddMath(this, name, handler, true);\n}\n\nexport function recalculate(){\n\tthis._mData.getStore().recalculate();\n\tthis.callEvent(\"onMathRefresh\",[]);\n\tthis.refresh();\n}\n\nexport function setPlaceholder(name, value){\n\tif(typeof name == \"object\"){\n\t\tvalue = name;\n\t\tname = \"*\";\n\t}\n\n\tthis._mData.getStore().setPlaceholder(name, value);\n\n\tthis.refresh();\n\tthis.callEvent(\"onMathRefresh\",[]);\n}","import * as sheets from \"../sheets\";\nimport * as spn from \"../operations/spans\";\nimport * as und from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\nimport * as stl from \"../operations/styles\";\nimport * as srt from \"../operations/sorting\";\nimport {removeCommentsRange} from \"../operations/comments\";\nimport {clearConditionalFormats} from \"../operations/conditional_formats\";\nimport {clearEditors} from \"../operations/dropdown\";\nimport {clearFilters} from \"../operations/filter\";\n\n//spans\nexport function combineCells(range, silent){\n\tif(!range){\n\t\tvar sel = this.getSelectedId(true);\n\t\tif (sel.length>1){\n\t\t\trange = spn.getRange(sel);\n\t\t}\n\t}\n\tgroup.set(()=> {\n\t\tif (range)\n\t\t\tspn.addSpan(this, range.cell, range.x, range.y);\n\t});\n\n\tif(!silent)\n\t\tthis.refresh();\n}\n\nexport function splitCell(row, column, silent){\n\tif (row && column) {\n\t\tspn.removeSpan(this, {row: row, column: column});\n\t}\n\telse{\n\t\tgroup.set(function(){\n\t\t\tthis.eachSelectedCell(function(cell){\n\t\t\t\tspn.removeSpan(this, cell);\n\t\t\t});\n\t\t},this);\n\n\t}\n\n\tif(!silent)\n\t\tthis.refresh();\n}\n\n//styles\nexport function addStyle(prop, origin){\n\treturn stl.addStyle(this, prop, origin);\n}\n\nexport function getStyle(row, column){\n\treturn stl.getStyle(this, {row:row, column:column});\n}\n\nexport function setStyle(row, column, style){\n\treturn stl.setStyle(this, {row: row, column: column}, style);\n}\n\nexport function setRangeStyle(rangeStr, style){\n\tgroup.set(function() {\n\t\tstl.setRangeStyle(this, rangeStr, style);\n\t},this);\n}\n\nexport function clearRange(rangeStr, type) {\n\tif (!rangeStr){\n\t\trangeStr = this._table.getSelectArea();\n\t\tif (!rangeStr) return;\n\t}\n\n\tif (!type) type = {styles: true, values: true, editors:true, conditions:true, comments:true };\n\t\n\tif (type.styles)\n\t\tstl.clearRangeStyle(this,rangeStr);\n\n\tif (type.conditions)\n\t\tclearConditionalFormats(this,rangeStr);\n\t\n\tif (type.values)\n\t\tthis.setRangeValue(rangeStr, null);\n\n\tif (type.editors){\n\t\tclearEditors(this, rangeStr);\n\t\tclearFilters(this, rangeStr);\n\t}\n\n\tif (type.comments)\n\t\tremoveCommentsRange(this, rangeStr);\n\n\tthis.refresh();\n}\n\nexport function compactStyles(){\n\treturn stl.compactStyles(this);\n}\n\n// serialize\nexport function serialize(config){\n\tconst obj = {};\n\tthis.callEvent(\"onDataSerialize\",[obj, config]);\n\n\tif(config){\n\t\tif(config.compactStyles)\n\t\t\tobj.styles = stl.removeUnusedStyles(obj);\n\t\tif(config.sheets)\n\t\t\treturn sheets.serialize(this, obj, config);\n\t}\n\n\treturn obj;\n}\n\n//sheets\nexport function showSheet(name){\n\tsheets.show(this,name);\n}\nexport function getActiveSheet(){\n\treturn this._activeSheet;\n}\nexport function addSheet(content){\n\tsheets.add(this, content);\n}\nexport function clearSheet(){\n\tthis.reset();\n}\nexport function renameSheet(name,newName){\n\tsheets.rename(this,name,newName);\n}\nexport function editSheet(name){\n\tsheets.edit(this,name);\n}\nexport function removeSheet(name){\n\tsheets.remove(this,name);\n}\n\n\n//undo\nexport function undo(){\n\tund.undo(this);\n}\nexport function redo(){\n\tund.redo(this);\n}\n\n// sort\nexport function sortRange(range, dir){\n\tsrt.sortRange(this, range, dir);\n}","import {toRange,rangeObj} from \"../helpers/column_names\";\nimport * as tbl from \"../table\";\nimport group from \"../operations/undo_group\";\nimport {newSheet} from \"../sheets\";\nimport {getType} from \"../operations/types\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\n\nexport function refresh(all){\n\tif (all)\n\t\tthis._table.refreshColumns();\n\telse\n\t\tthis._table.refresh();\n}\nexport function eachSelectedCell(cb){\n\tvar cells = this.getSelectedId(true);\n\tfor (var i=0; i<cells.length; i++)\n\t\tcb.call(this, cells[i]);\n}\nexport function getSelectedRange(sheet){\n\tvar area = this._table.getSelectArea();\n\tif (area){\n\t\tif (sheet)\n\t\t\tsheet = this.getActiveSheet();\n\t\treturn toRange(area.start.row,area.start.column,area.end.row,area.end.column,sheet);\n\t}\n\treturn \"\";\n}\nexport function getSelectedId(all){\n\tvar area = this._table.getSelectArea();\n\tif(!all)\n\t\treturn area && area.start.row ? area.start : null;\n\n\tvar selection = [];\n\tif(area){\n\t\tvar c0 = area.start;\n\t\tvar c1 = area.end;\n\n\t\tfor(var i = c0.row; i<= c1.row; i++){\n\t\t\tfor(var j = c0.column; j <= c1.column; j++){\n\t\t\t\tselection.push({row: i,column:j});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn selection;\n\t//return this._table.getSelectedId(all)\n}\nexport function getCellValue(row, column, math){\n\tconst value = this._mPage.getValue(row-1, column-1, math !== false);\n\n\treturn correctVal(value);\n}\nexport function setCellValue(row, column, value){\n\tvalue = correctVal(value);\n\tconst old = this.getCellValue(row, column);\n\tconst oldType = getType(this, row, column);\n\n\tlet sameValue;\n\tif(oldType == \"date\"){\n\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\tconst dateValue = isNaN(value) ? getExcelDateFromJs(parser(value)) : value;\n\t\tsameValue = old == dateValue;\n\t}\n\telse if(oldType != \"string\" && value !== \"\" && !isNaN(value) && old == value){\n\t\tsameValue = true;\n\t\tvalue = value*1;\n\t}\n\n\tif (!sameValue && old !== value){\n\t\tgroup.set(()=>{\n\t\t\tif (this.callEvent(\"onBeforeValueChange\",[row, column, value, old])){\n\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t//onCellChange can change item (via types module)\n\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value]);\n\t\t\t\tconst updatedType = getType(this, row, column);\n\n\t\t\t\t//recalculate if we refer to a cell, where type is string and value is something like 005 or 5e5\n\t\t\t\tif(oldType != updatedType && updatedType == \"string\" && value[0] == \"=\" && value.length > 1)\n\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\tthis.saveCell(row, column);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction correctVal(val){\n\treturn val || val === 0 ? val : \"\";\n}\n\nexport function setRangeValue(range, value){\n\tgroup.set(function(){\n\t\tvar pos = rangeObj(range, this);\n\t\tfor (let row = pos.start.row; row <= pos.end.row; row++) {\n\t\t\tfor (let column = pos.start.column; column <=  pos.end.column; column++) {\n\t\t\t\tthis.setCellValue(row, column, value);\n\t\t\t}\n\t\t}\n\t},this);\n\n}\n\nexport function getRow(id){\n\tconst row = webix.copy(this._table.getItem(id));\n\n\tfor(let i = 1; i <= this.config.columnCount; i++){\n\t\tconst cell = this._mPage.getCell(id-1, i-1);\n\n\t\tif(cell){\n\t\t\trow[i] = cell.value;\n\n\t\t\t[[\"style\", \"$cellCss\"], [\"type\", \"$cellType\"], [\"format\", \"$cellFormat\"]].forEach(param => {\n\t\t\t\tconst val = cell[param[0]];\n\t\t\t\tif(val){\n\t\t\t\t\tif(!row[param[1]])\n\t\t\t\t\t\trow[param[1]] = {};\n\t\t\t\t\trow[param[1]][i] = val;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst math =  this.getCellValue(id, i, true);\n\t\t\tif(math && math[0] == \"=\")\n\t\t\t\trow[\"$\"+i] = math;\n\t\t}\n\t}\n\n\treturn row;\n}\nexport function getColumn(id){\n\treturn this._table.getColumnConfig(id);\n}\nexport function reset(mode){\n\tvar obj = { data:[] };\n\tif (mode && mode.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\t\n\tthis.parse(obj);\n}\n\nexport function _resetTable(){\n\ttbl.reset(this);\n}\n","import {save} from \"../operations/save\";\n\nexport function saveCell(row, column){\n\tvar style = this.getStyle(row, column);\n\n\tsave(this, \"data\", {\n\t\trow: row,\n\t\tcolumn: column,\n\t\tvalue: this.getCellValue(row, column),\n\t\tstyle: (style ? style.id : \"\")\n\t});\n}","export function setCellEditor(row, column, editor) {\n\tconst line = this._table._ssEditors[row] = this._table._ssEditors[row] || {};\n\tconst value = line[column] || null;\n\tline[column] = editor;\n\n\tif (editor && editor.editor){\n\t\tthis._table.addCellCss(row,column, \"ss_editor\");\n\t} else {\n\t\tdelete this._table._ssEditors[row][column];\n\t\tthis._table.removeCellCss(row,column, \"ss_editor\");\n\t}\n\tthis.callEvent(\"onAction\", [\"dropdown\", { row, column, value, newValue:editor }]);\n}\n\nexport function getCellEditor(row, column){\n\tlet line = this._table._ssEditors[row] || {};\n\treturn line[column] || null;\n}","import * as flt from \"../operations/filter\";\n\nexport function setCellFilter(row, column, filter){\n\tconst line = this._table._ssFilters[row] = this._table._ssFilters[row] || {};\n\tconst value = line[column] || null;\n\n\tif (filter && (webix.isArray(filter) || typeof filter == \"string\"))\n\t\tfilter = { options:filter };\n\tline[column] = filter;\n\n\tif (filter && typeof filter == \"object\"){\n\t\tthis._table.addCellCss(row,column, \"ss_filter\");\n\t\tif (filter.value && flt.isValueActive(filter.value))\n\t\t\tthis._table.addCellCss(row,column, \"ss_filter_active\");\n\n\t\twebix.extend(filter, {row, column}, true);\n\t\tfilter.options = flt.calibrateRange(this, row, column, filter.options);\n\n\t\tif (!filter.handler && filter.value && filter.value.condition){\n\t\t\tconst mode = filter.mode || flt.getFilterMode(this, row, column);\n\t\t\tfilter.handler = flt.getFilterFunction(mode, filter.value);\n\t\t}\n\t} else {\n\t\tdelete this._table._ssFilters[row][column];\n\t\tthis._table.removeCellCss(row,column, \"ss_filter\");\n\t\tthis._table.removeCellCss(row,column, \"ss_filter_active\");\n\t}\n\tthis.callEvent(\"onAction\", [\"filter\", { row, column, value, newValue:filter }]);\n}\n\nexport function getCellFilter(row, column){\n\tlet line = this._table._ssFilters[row] || {};\n\treturn line[column] || null;\n}\n\nexport function removeFilters(){\n\tconst filters = flt.getFilters(this._table);\n\n\tfor\t(let i=0; i<filters.length; i++){\n\t\tconst {row, column} = filters[i];\n\t\tthis.setCellFilter(row, column, null);\n\t}\n\n\tthis._table._ssFilters = {};\n\tthis._table.data.filter((obj) => {\n\t\treturn this.isRowVisible(obj.id);\n\t});\n}\n\n\nexport function filterSpreadSheet(){\n\tthis._table.data.silent(function(){\n\t\tconst filters = flt.getFilters(this._table);\n\n\t\t// hidden rows\n\t\tthis._table.data.filter((obj) => {\n\t\t\treturn this.isRowVisible(obj.id);\n\t\t});\n\n\t\tfor (let i=0; i<filters.length; i++){\n\t\t\tconst {row, column, handler} = filters[i];\n\n\t\t\tlet all = false;\n\t\t\tthis._table.data.filter(obj => {\n\t\t\t\tif (all || obj.id*1 <= row*1) return true;\n\n\t\t\t\tlet value = this._mPage.getValue(obj.id - 1, column - 1);\n\n\t\t\t\tif (!value && value !== \"\") return all = true;\n\t\t\t\treturn (typeof handler == \"function\") ? handler( String(value) ) : true;\n\t\t\t}, 1, true);\n\t\t}\n\t}, this);\n\n\tthis._table.callEvent(\"onAfterFilter\", []);\n\tthis._table.refresh();\n}\n","export function confirm(config){\n\treturn webix.confirm({\n\t\tcontainer: this.$view,\n\t\tcss:\"webix_ssheet_confirm\",\n\t\ttext:config.text,\n\t\tok: webix.i18n.spreadsheet.labels.ok,\n\t\tcancel: webix.i18n.spreadsheet.labels.cancel\n\t});\n}\n\nexport function alert(config){\n\treturn webix.alert({\n\t\tcontainer: this.$view,\n\t\tcss: \"webix_ssheet_alert\",\n\t\ttext:config.text,\n\t\tok: webix.i18n.spreadsheet.labels.ok\n\t});\n}","import * as undo from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\n\nexport function resetUndo(){\n\tundo.reset(this);\n}\n\nexport function groupUndo(func){\n\tgroup.set(func, this);\n}\n\nexport function ignoreUndo(func){\n\tundo.ignoreUndo(func, this);\n}","import * as fmt from \"../operations/formats\";\n\nexport function setFormat(row, column, format){\n\tfmt.addFormat(this, row, column, format);\n}\n\nexport function changeDecimals(row, column, inc){\n\t//row and column may be obj\n\tfmt.changeAreaDecimals(this, inc, row, column);\n}","const defaultMenu = [\n\t{ id:\"file\", submenu:[\n\t\t{id: \"sheet\", submenu: [\n\t\t\t{id: \"new-sheet\"},\n\t\t\t{id: \"copy-sheet\"},\n\t\t\t{id: \"remove-sheet\"}\n\t\t]},\n\t\t{id: \"excel-import\"},\n\t\t{id: \"excel-export\"}\n\t]},\n\t{ id:\"edit\", submenu:[\n\t\t{id: \"add-range\"},\n\t\t{id: \"add-dropdown\"},\n\t\t{id: \"add-link\"},\n\t\t{id: \"lock-cell\"},\n\t\t{id: \"conditional-format\"},\n\t\t{id: \"clear\", submenu:[\n\t\t\t{id: \"clear-value\"},\n\t\t\t{id: \"clear-style\"},\n\t\t\t{id: \"clear-conditional-formats\"},\n\t\t\t{id: \"clear-dropdown-editors\"},\n\t\t\t{id: \"clear-comments\"},\n\t\t\t{ $template:\"Separator\" },\n\t\t\t{id: \"clear-all\"}\n\t\t]}\n\t]},\n\t{ id:\"insert\", submenu:[\n\t\t{id: \"image\", submenu:[\n\t\t\t{ id: \"add-image-cell\"},\n\t\t\t{ id: \"add-image-top\"}\n\t\t]},\n\t\t{id: \"graph\", submenu:[\n\t\t\t{ id: \"add-sparkline\"},\n\t\t\t{ id: \"add-chart\"}\n\t\t]},\n\t\t{id: \"add-comment\"}\n\t]},\n\t{ id:\"data\", submenu:[\n\t\t{id: \"sort\", submenu: [\n\t\t\t{id: \"sort-asc\"},\n\t\t\t{id: \"sort-desc\"}\n\t\t]},\n\t\t{id: \"create-filter\"}\n\t]},\n\t{ id: \"view\", submenu:[\n\t\t{id: \"columns\", submenu: [\n\t\t\t{id: \"insert-column\"},\n\t\t\t{id: \"delete-column\"},\n\t\t\t{id: \"show-column\"},\n\t\t\t{id: \"hide-column\"},\n\t\t\t{id: \"resize-column\"}\n\t\t]},\n\t\t{id: \"rows\", submenu: [\n\t\t\t{id: \"insert-row\"},\n\t\t\t{id: \"delete-row\"},\n\t\t\t{id: \"show-row\"},\n\t\t\t{id: \"hide-row\"},\n\t\t\t{id: \"resize-row\"}\n\t\t]},\n\t\t{ $template:\"Separator\" },\n\t\t{id: \"freeze-columns\"},\n\t\t{id: \"freeze-rows\"},\n\t\t{id: \"hide-gridlines\"},\n\t\t{id: \"hide-headers\"}\n\t]}\n];\n\nconst ui = {\n\tgetMenuData: function(menu, config){\n\t\tvar i;\n\t\tfor(i=0; i < menu.length; i++){\n\t\t\tif(typeof menu[i] == \"string\")\n\t\t\t\tmenu[i] = {id: menu[i]};\n\t\t\tif((menu[i].id == \"resize-column\" || menu[i].id == \"resize-row\") && !config.resizeCell){\n\t\t\t\tmenu.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!menu[i].value)\n\t\t\t\tmenu[i].value = webix.i18n.spreadsheet.menus[menu[i].id];\n\t\t\tif(menu[i].submenu)\n\t\t\t\tmenu[i].submenu = this.getMenuData(menu[i].submenu, config);\n\t\t}\n\n\t\treturn menu;\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar config = view.config,\n\t\tmenu = {\n\t\t\tview: \"menu\",\n\t\t\tborderless: true,\n\t\t\tcss: \"webix_ssheet_menu\",\n\t\t\tid: \"menu\",\n\t\t\tautowidth: true,\n\t\t\ttype:{\n\t\t\t\theight: 40\n\t\t\t},\n\t\t\tdata: ui.getMenuData(webix.isArray(config.menu)?config.menu : webix.copy(defaultMenu), view.config)\n\t\t};\n\n\tview.callEvent(\"onViewInit\", [\"menu\", menu]);\n\treturn menu;\n}\n\n\nfunction ready(view){\n\tif(view.$$(\"menu\"))\n\t\tview.$$(\"menu\").attachEvent(\"onMenuItemClick\",(id) => callAction(view,id));\n}\n\nconst actionMap = {\n\t\"undo\": function (view) {\n\t\tview.undo();\n\t},\n\t\"redo\": function (view) {\n\t\tview.redo();\n\t},\n\t\"insert-column\": function (view) {\n\t\tview.insertColumn();\n\t},\n\t\"delete-column\": function (view) {\n\t\tview.deleteColumn();\n\t},\n\t\"show-column\": function (view) {\n\t\tview.callEvent(\"onCommand\",[{id: \"show\", group: \"column\", neighbors:true}]);\n\t},\n\t\"hide-column\": function (view) {\n\t\tview.hideColumn(null,true);\n\t},\n\t\"resize-column\": function (view) {\n\t\t//like we are calling from the toolbar\n\t\tview.callEvent(\"onCommand\",[{id: \"resize\", group: \"column\", value: webix.i18n.spreadsheet.menus[\"resize-column\"]}]);\n\t},\n\t\"insert-row\": function (view) {\n\t\tview.insertRow();\n\t},\n\t\"delete-row\": function (view) {\n\t\tview.deleteRow();\n\t},\n\t\"show-row\": function (view) {\n\t\tview.callEvent(\"onCommand\",[{id: \"show\", group: \"row\", neighbors:true}]);\n\t},\n\t\"hide-row\": function (view) {\n\t\tview.hideRow(null,true);\n\t},\n\t\"resize-row\": function (view) {\n\t\t//like we are calling from the toolbar\n\t\tview.callEvent(\"onCommand\",[{id: \"resize\", group: \"row\", value: webix.i18n.spreadsheet.menus[\"resize-row\"]}]);\n\t},\n\t\"freeze-columns\": function(view){\n\t\tview.freezeColumns();\n\t},\n\t\"hide-gridlines\": function(view){\n\t\tview.hideGridlines(\"toggle\");\n\t},\n\t\"hide-headers\": function(view){\n\t\tview.hideHeaders(\"toggle\");\n\t}\n};\n\nfunction callAction(view,id){\n\tif(view.callEvent(\"onMenuItemClick\",[id])){\n\t\tif(actionMap[id])\n\t\t\tactionMap[id](view);\n\t\telse\n\t\t\tview.callEvent(\"onCommand\",[{id: id}]);\n\t}\n}","//global definitions\nimport \"./locale\";\nimport \"./views/index\";\n\n//special content for non-production builds\nimport \"./init\";\n\nimport \"./editors/index\";\n\n//modules\nimport * as bar from \"./toolbar\";\nimport * as tbl from \"./table\";\nimport * as key from \"./hotkeys\";\nimport * as editor from \"./editor\";\nimport * as sheets from \"./sheets\";\nimport * as dialogs from \"./dialogs/index\";\nimport * as context from \"./context\";\nimport * as chart from \"./chart\";\n\nimport {setDefaultFormats} from \"./operations/formats\";\nimport {operations} from \"./operations/index\";\nimport {api} from \"./api/index\";\n\n//styling\nimport * as menu from \"./menu\";\nimport {getDefaultStyles} from \"./helpers/conditional\";\nimport {setSkinDefaults} from \"./toolbar/defaults\";\n\nvar component = {\n\tname:\"spreadsheet\",\n\t_base_index:{ count:1 },\n\tdefaults:{\n\t\tspans: true,\n\t\tliveEditor: true,\n\t\trowCount:50,\n\t\tmath:true,\n\t\tcolumnCount:20,\n\t\tresizeCell: true,\n\t\tsheetTabWidth: 90,\n\t\tconditionStyle: getDefaultStyles()\n\t},\n\t$init:function(){\n\t\tthis.$index = (this._base_index.count++);\n\t\tthis.$view.className += \" webix_ssheet\";\n\n\t\tthis.$ready.unshift(this._sub_init);\n\t\tthis.$ready.unshift(setDefaultFormats);\n\t\tthis.$ready.push(this._set_handlers);\n\n\t\tthis._destroy_with_me = [];\n\t\tthis.attachEvent(\"onDestruct\", () => {\n\t\t\tthis._destroy_with_me.forEach(view => view.destructor());\n\t\t});\n\t},\n\t$skin:function(){\n\t\tsetSkinDefaults();\n\t},\n\t_sub_init:function(){\n\t\tconst obj = this.config;\n\t\tconst rows = [];\n\n\t\t//toolbars\n\t\tif(!obj.readonly && obj.menu)\n\t\t\trows.push(menu.init(this));\n\t\tif(!obj.readonly && obj.toolbar !== false)\n\t\t\trows.push(bar.init(this));\n\t\tif (obj.subbar)\n\t\t\trows.push(obj.subbar);\n\t\tif(!obj.readonly && obj.liveEditor)\n\t\t\trows.push(editor.init(this));\n\n\t\t//data part\n\t\tconst tblObj = {\n\t\t\teditable : !obj.readonly,\n\t\t\tliveEditor: obj.liveEditor\n\t\t};\n\t\tif(obj.rowHeight)\n\t\t\ttblObj.rowHeight = obj.rowHeight;\n\t\tif(obj.columnWidth)\n\t\t\ttblObj.columnWidth = obj.columnWidth;\n\n\t\tif(obj.readonly)\n\t\t\trows.push(tbl.init(this, tblObj));\n\t\telse\n\t\t\trows.push({cols:[tbl.init(this, tblObj), chart.init(this)]});\n\n\t\tconst bottom = obj.bottombar === true ? sheets.defaultBottom(this) : obj.bottombar;\n\t\tif (bottom)\n\t\t\trows.push(bottom);\n\n\t\tsheets.init(this);\n\n\t\tif(!obj.readonly)\n\t\t\tcontext.init(this);\n\n\t\tdialogs.init(this);\n\n\t\tthis.rows_setter(rows);\n\t},\n\t_set_handlers:function(){\n\t\t//prevent double init\n\t\tif (this._table) return;\n\t\tthis._table = this.$$(\"cells\");\n\n\t\t//init all sub modules\n\t\toperations(this);\n\n\t\t//set sizes for the table\n\t\ttbl.reset(this, this.config.columnCount, this.config.rowCount);\n\t\tkey.init(this); //keyboard shortcuts\n\t\t\n\t\tthis._table.attachEvent(\"onAfterAreaAdd\", () =>\n\t\t\tthis.callEvent(\"onAfterSelect\", [ this.getSelectedId(true) ]));\n\n\t\tthis.callEvent(\"onComponentInit\", []);\n\t},\n\t$onLoad:function(obj, driver){\n\t\t//when loading data by data:, we can get $onLoad before _set_handlers call\n\t\tthis._set_handlers();\n\n\t\tconst excel = obj.excel;\n\n\t\tif (excel)\n\t\t\tobj = this._parseExcel(obj, driver);\n\t\telse if(!obj.data && typeof obj == \"string\" && (driver.cell || driver.row))\n\t\t\tobj = this._parseCsv(obj, driver);\n\n\t\tsheets.load(this, obj, excel);\n\t}\n};\napi(component);\nwebix.protoUI(component, webix.AtomDataLoader, webix.IdSpace, webix.ui.layout);\n","import {isCellSelected, isColSelected,isRowSelected,selectRow,selectColumn} from \"./operations/column_operations\";\nimport {getColumnOperation, getRowOperation, getClearOperation} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => view.$$(\"context\").attachTo(view._table.$view));\n\n\tvar locale = webix.i18n.spreadsheet.menus;\n\tconst lists = {\n\t\tdata:[\n\t\t\t{ id:\"clear\",\t\tvalue: locale[\"clear\"], submenu: getClearOperation()},\n\t\t\t{ id:\"lock-cell\",\t\tvalue: locale[\"lock-cell\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"sort\",\tvalue: locale.sort, submenu:[\n\t\t\t\t{id: \"sort-asc\", value: locale[\"sort-asc\"]},\n\t\t\t\t{id: \"sort-desc\", value: locale[\"sort-desc\"]}\n\t\t\t]},\n\t\t\t{id:\"create-filter\",\t\tvalue: locale[\"create-filter\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"add-range\",\t\tvalue: locale[\"add-range\"]},\n\t\t\t{ id:\"add-link\",\t\tvalue: locale[\"add-link\"]},\n\t\t\t{ id:\"add-comment\",\t\tvalue: locale[\"add-comment\"]}\n\t\t],\n\t\tcolumn: getColumnOperation(view),\n\t\trow: getRowOperation(view)\n\t};\n\n\n\tvar context = {\n\t\tview: \"contextmenu\",\n\t\tid: \"context\",\n\t\tpadding:0,\n\t\tsubmenuConfig:{\n\t\t\tpadding:0,\n\t\t\ton:{\n\t\t\t\tonBeforeShow:function(){\n\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata:[],\n\t\ton:{\n\t\t\tonMenuItemClick(id) {\n\t\t\t\tview.callEvent(\"onCommand\", [this.getMenuItem(id)]);\n\t\t\t},\n\t\t\tonBeforeShow(pos) {\n\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\tvar mode, trg;\n\n\t\t\t\ttrg = view._table.locate(pos);\n\t\t\t\tif (!trg) return false;\n\n\t\t\t\tmode = \"\";\n\t\t\t\tif (trg.header && trg.column !== \"rowId\"){\n\t\t\t\t\tif (!isColSelected(trg.column, view))\n\t\t\t\t\t\tselectColumn(trg.column, view);\n\t\t\t\t\tmode = \"column\";\n\t\t\t\t} else if (trg.row){\n\t\t\t\t\tif (trg.column === \"rowId\"){\n\t\t\t\t\t\tif (!isRowSelected(trg.row, view))\n\t\t\t\t\t\t\tselectRow(trg.row, view);\n\t\t\t\t\t\tmode = \"row\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!isCellSelected(trg.row, trg.column, view))\n\t\t\t\t\t\t\tview._table.addSelectArea(trg, trg);\n\t\t\t\t\t\tmode = \"data\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mode){\n\t\t\t\t\tvar data = getMenuData(view, mode, lists[mode]);\n\t\t\t\t\tif (data){\n\t\t\t\t\t\tthis.clearAll();\n\t\t\t\t\t\tthis.parse(data);\n\t\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t\t\twebix.html.preventEvent(pos);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"context\", context]);\n\tconst contextMenu = view.ui(context);\n\n\tview._destroy_with_me.push(contextMenu);\n}\n\nexport function getMenuData(view, name, data){\n\tvar ev = { area:name, data:data };\n\tif (view.callEvent(\"onContextMenuConfig\", [ev]))\n\t\treturn ev && ev.data;\n\treturn null;\n}","import * as m1  from \"./add_row_col\";\nimport * as m6  from \"./clipboard\";\nimport * as m12 from \"./column_operations\";\nimport * as m2  from \"./conditional_formats\";\nimport * as m4 from \"./types\";\nimport * as m8 from \"./formats\";\nimport * as m17 from \"./data\";\nimport * as m18 from \"./dropdown\";\nimport * as m7  from \"./formats\";\nimport * as m13 from \"./hide_row_col\";\nimport * as m14 from \"./lock_cell\";\nimport * as m3  from \"./resize\";\nimport * as m9  from \"./selection\";\nimport * as m10 from \"./sorting\";\nimport * as m16 from \"./spans\";\nimport * as m16a from \"../mathematics/methods\";\nimport * as m16b from \"../mathematics/ranges\";\nimport * as m16c from \"../mathematics/sheets\";\nimport * as m19 from \"./states\";\nimport * as m5  from \"./styles\";\nimport * as m11 from \"./undo\";\nimport * as m20 from \"./import\";\nimport * as m21 from \"./filter\";\nimport * as m22 from \"./print\";\nimport * as m23 from \"./export\";\nimport * as m24 from \"./load\";\nimport * as m25 from \"./clear_styles\";\nimport * as m26 from \"./comments\";\nimport * as m27 from \"./save\";\nimport * as m28 from \"./hide_headers\";\nimport * as m29 from \"./hide_gridlines\";\nimport * as m30 from \"./views\";\n\nexport function operations(view){\n\t//order in some cases does matter\n\t//resize must be applied after math, to size data by the result of math calculation\n\t//types must be applied after state and data \n\tvar all = [m1,m2,m5,m6,m7,m9,m10,m11,m12,m13,m14,m16,m3,m8,m17,m16a,m16b,m16c,m18,m19,m4,m20,m21,m22,m23,m24,m25,m26,m27,m28,m29,m30];\n\tfor (var i = 0; i < all.length; i++){\n\t\tif (all[i].init)\n\t\t\tall[i].init(view);\n\t}\n}","import * as rco from \"./row_col_operations\";\nimport * as lcl from \"./lock_cell\";\nimport * as fcl from \"./freeze\";\nimport * as hbr from \"./hide_gridlines\";\nimport * as hhd from \"./hide_headers\";\nimport * as hrc from \"./hide_rows\";\nimport * as mat from \"./math\";\nimport * as ops from \"./operations\";\nimport * as cor from \"./core\";\nimport * as sav from \"./save\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as cfm from \"./confirm\";\nimport * as und from \"./undo\";\nimport * as fmt from \"./number_formats\";\n\nexport function api(view){\n\tvar all = [rco, lcl, fcl, hbr, hhd, hrc, mat, ops, cor, sav, dpd, flt, cfm, und, fmt];\n\tfor (var i = 0; i < all.length; i++)\n\t\twebix.extend(view, all[i]);\n}"],"names":["webix","i18n","spreadsheet","labels","tooltips","menus","table","liveEditor","formats","protoUI","name","$cssName","$init","config","options","view","body","tooltip","template","xCount","yCount","data","ui","richselect","defaults","width","margin","cols","scroll","select","obj","id","on","onAfterSelect","this","getParentView","updateMasterValue","value","rows","css","skin","$name","title","onChange","suggest","fitMaster","hide","getValue","$$","master","setValue","getList","getColorView","getTypeView","getSelectedId","getBody","getChildViews","getItemText","$ready","push","bind","getPopup","isArray","callEvent","join","height","type","palette","attachEvent","setMasterValue","colorboard","icon","borderless","$view","className","$renderInput","divStart","color","renderColor","call","replace","match","p1","p2","p3","colorpicker","prototype","$setValue","popup","toString","getColorNode","style","backgroundColor","firstChild","childNodes","$renderIcon","text","apply","arguments","Object","defineProperty","exports","t","r","1","2","3","e","assign","n","length","o","hasOwnProperty","a","i","u","f","s","h","c","p","v","code","g","source","l","b","d","M","pageName","substr","indexOf","toUpperCase","String","fromCharCode","charCodeAt","y","m","_","L","P","w","E","z","I","D","T","page","C","N","x","S","A","O","R","F","U","exec","broken","triggers","Function","Date","getFullYear","valueOf","getTimezoneOffset","Math","floor","round","getTime","isNaN","concat","Number","padStart","X","ceil","Y","H","j","B","G","q","W","$","K","pow","Q","J","Z","tt","sqrt","rt","et","CM","CD","XC","XL","IX","V","IV","nt","ot","at","it","ut","ft","st","ht","ct","abs","exp","pt","vt","substring","gt","lt","cos","cosh","sin","sinh","bt","dt","Mt","yt","mt","sort","_t","wt","freeze","__proto__","SUM","AVERAGE","AVERAGEA","COUNT","COUNTA","COUNTBLANK","MAX","MIN","PRODUCT","SUMPRODUCT","SUMSQ","VAR","VARA","VARP","VARPA","STDEV","STDEVP","STDEVA","STDEVPA","POWER","QUOTIENT","SQRT","ABS","RAND","random","PI","INT","ROUND","parseFloat","toFixed","ROUNDDOWN","ROUNDUP","TRUNC","EVEN","sign","ODD","ACOS","acos","ACOSH","acosh","ACOT","atan","ACOTH","log","ARABIC","test","ASIN","asin","ASINH","asinh","ATAN","ATAN2","atan2","ATANH","BASE","Array","max","CEILING","COS","COSH","COT","tan","COTH","CSC","CSCH","DEGREES","DECIMAL","parseInt","FACT","FACTDOUBLE","COMBIN","COMBINA","FLOOR","GCD","LN","LOG","LOG10","MOD","MROUND","MULTINOMIAL","RADIANS","RANDBETWEEN","ROMAN","split","pop","SEC","SECH","SIN","SINH","SQRTPI","SUBTOTAL","ADD","MINUS","DIVIDE","MULTIPLY","GT","GTE","LT","LTE","EQ","NE","POW","SUMX2MY2","find","SUMX2PY2","SUMXMY2","TAN","TANH","tanh","COMPLEX","CORREL","filter","reduce","DEC2BIN","DEC2HEX","DEC2OCT","DELTA","DEVSQ","forEach","ERF","ERFC","EXP","FISHER","FISHERINV","GAMMA","isInteger","GEOMEAN","some","isFinite","GESTEP","HARMEAN","HEX2BIN","HEX2DEC","HEX2OCT","IMREAL","IMAGINARY","IMABS","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMCSC","IMCSCH","IMDIV","IMSIN","IMSINH","IMEXP","IMLN","IMPOWER","IMPRODUCT","slice","IMSEC","IMSECH","IMSQRT","IMSUB","IMSUM","IMTAN","LARGE","MEDIAN","OCT2BIN","OCT2DEC","OCT2HEX","PERMUT","PERCENTILE","QUARTILE","SIGN","SMALL","STEYX","WEIBULL","AVEDEV","BINOMDIST","BINOMDISTRANGE","BINOMDISTINV","BITAND","BITOR","BITXOR","BITLSHIFT","BITRSHIFT","COVAR","Et","It","CONCATENATE","addMath","handler","addMethod","sid","list","exists","add","getJsDateFromExcel","excelDate","date","getExcelDateFromJs","jsDate","init","math","IMAGE","url","escape","HYPERLINK","SPARKLINE","arr","color1","color2","negativeColor","Sparklines","getTemplate","keys","key","getJsDate","getExcelDate","datepicker","$prepareValue","copy","start","end","daterangepicker","buttons","close","getBodyConfig","content","elements","getFormElements","padding","$active","layoutPadding","form","label","cancel","autowidth","click","getTopParentView","save","hotkey","body_setter","_typeof","isUndefined","window","move","head","autofocus","IdSpace","headerRowHeight","datatable","setHTML","dataview","contextmenu","group","set","method","uid","all","serialize","sheets","proxy","$parse","$proxy","ajax","headers","post","thread","events","newName","params","_loading_data","getActiveSheet","clearTimeout","delay","decode","encode","alpha","indexToHeader","index","chars","quotient","updateMaxColumn","maxColumn","str","adress","size","col","range","nind","sheet","parts","ranges","getCode","rangeParts","d1","d2","escapeSheet","toRange","x2","y2","rangeObj","row","column","eachRange","callback","cellTest","isRange","cells","changeRange","inc","updated","r1","c1","r2","c2","toolbarSizes","paddingY","sectorPadding","sectorMargin","defaultStyles","style_names","_style_map","left","center","right","top","middle","bottom","wrap","getBorderCss","pos","border","sizeEl","border_checks","cell","area","mode","_style_handlers","getSelectArea","lineStyle","modes","_updateStyle","reset","_styles","_styles_cache","_styles_max","prefix","$index","html","removeStyle","getStyle","_mPage","getCell","span","getSpan","spanStyles","spanStyle","getFormat","format","addStyle","props","origin","styleFromText","styleToText","cache","_addStyle","_parse","styles","styleObj","update_style_data","nstyle","setStyle","_setStyle","setRangeStyle","getTextSize","baseWidth","innerHTML","_table","appendChild","offsetWidth","offsetHeight","removeChild","old","oldFormat","formatChanged","saveCell","silent","_buildCssString","clearRangeStyle","compactStyles","serialized","removeUnusedStyles","used","newStyles","_applyStyles","eachSelectedCell","_applyCellStyles","ostyle","refresh","_serialize","_undoStyle","create","func","findIndex","result","getDimension","spans","line","spanEndRow","spanEndCol","formatsCount","formatSources","formatCache","formatHelpers","currencies","defaultFormats","common","setDefaultFormats","formatsLocale","price","map","getCurrencySymbol","trim","extra","priceFormat","values","extend","zeros","priceSettings","decimalSize","symbol","separator","negative","getDelimiters","numberFormat","percent","format2code","dateFormat","string","serializeFormat","formToValues","groupSign","groupDelimiter","decimalSign","decimalDelimiter","getFormatSource","toexcel","parseFormat","createFormatName","formatToForm","dates","timeFormat","fullDateFormat","longDateFormat","red","first","second","priceBrackets","currency","isPrice","delimiters","integer","decimal","addFormat","nev","removeFormat","splitFormat","conditional","errorMessage","separated","separateFmt","genCode","condition","toLowerCase","fmt","check","ind","isAbs","genFormatCode","isQuote","comma","numberPlaceholder","textPlaceholder","symbolPos","multiply","lastDateType","val","betweenPlaceholders","placeholder","datePart","excelDateToWebix","undefined","getParts","reverse","lzeros","lfills","rzeros","rfills","rmax","dateTypes","timeTypes","dateOrder","timeOrder","typesOrder","order","types","changeAreaDecimals","getCells","rules","isNumber","changeCellDecimals","getFormatName","isCustom","updateDecimals","parsed","decimals","placeholders","withoutText","withoutPlaceholders","formValues","symbolId","toExcel","leftPlaceholders","fmtParts","sepFmtParts","getFmtPartValues","leftText","rightText","fmtPart","firstPlaceholder","Infinity","k","checkFormat","checkTime","quot","item","isDateInvalid","getDateEditFormat","formatName","locale","isTime","dateToStr","getFormatFromData","array","styleName","fmtName","load","isChar","char","getLastCharIndex","includeNumbers","lastChar","getWord","formula","passive","quotes","operand","position","word","sum","flags","crosssheet","activeSheet","lines","ph","escaped","next","pushLine","loadCell","setType","dateToExcel","setCellValue","getFormatType","formatType","getType","parseToStore","_setType","mathFormat","isFormula","parseDate","getMathFormat","blockLevel","level","methods","part","expectType","getExpectType","strToDate","parseDateTime","parser","ignoreUndo","checkType","$format","updateCell","isString","cellEditor","getCellEditor","setFormat","setCellEditor","editor","cursor","getInputNode","selectionStart","charAt","search","nextSymbol","node","tagName","_this","sizes","offset","textWidth","show","setValueHere","$enterKey","isVisible","getCellValue","action","newValue","getPopupConfig","onItemClick","button","getItem","suggestData","highlight","_highlightedCells","_update_range","_last_value_set","activeCell","showActiveSheet","updateCellValue","blur","preventEvent","oldVal","$handleSelection","UIManager","setFocus","eventRemove","keydownEv","event","_this2","endEdit","escapeText","changeCellCss","colorIndex","crossheet","cellSheet","prepareSheet","activeMath","_activeMath","cellText","rangeName","repeatedColor","nextCell","nextCellText","setColor","document","activeElement","paintValue","enter","grid","define","showSheet","moveSelection","remove","which","keyCode","shiftKey","getItemNode","newv","$setValueHere","str1","str2","setSelectionRange","expectOperator","setRange","len","lastPos","prepareArea","min","row1","col1","row2","col2","coloredArea","texthighlight","layout","drag","dragscroll","EditAbility","toggle","onValue","offValue","inp","awidth","aheight","$allowsClear","blockEvent","unblockEvent","arrow","elementsConfig","labelWidth","_initOnChange","$eventSource","_getCheckboxes","count","$all","_count","base","labelRight","active","baseHeight","inputHeight","checkboxes","output","scrollview","queryView","onSelectChange","focus","resize","toFront","minWidth","minHeight","escHide","autofit","setAttribute","addHotKey","_removeView","getMenu","_clickEv","_menu","destructor","move_setter","DragControl","addDrag","$dragPos","$dragCreate","object","trg","target","getAttribute","elOffset","elPos","pOffset","parentNode","state","getScrollState","toNode","$dragDestroy","submenu","readonly","submenuConfig","externalUI","onMenuItemClick","_menuActions","onBeforeShow","_toggleExcel","dots","toPDF","display","toPNG","header","pull","showItem","hideItem","layoutMargin","multi","getSectionConfig","onAfterScroll","addSection","trashIcon","dataPadding","upper","hidden","labelsVisible","markersVisible","onClick","removeView","childs","getLayout","lastIndex","layoutId","addView","setValues","setSubValue","sub","hideSubviews","child","getValues","$getSize","bodySize","env","scrollSize","$setSize","oldScroll","editors","excel_date","createPopup","icons","timepicker","_last_input_target","onEnter","render","showPopup","input","updateCalendar","calendar","afterRender","ss_richselect","popupInit","$value","actions","isMerged","c0","splitCell","confirm","then","combineCells","undo","redo","hideGridlines","hideHeaders","freezeColumns","freezeRows","fontFamily","getColumnOperation","colOperations","neighbors","resizeCell","getRowOperation","rowOperations","getClearOperation","getLocaleClear","$template","borders","styleFormats","colorButton","toggleButton","iconButton","btn","segmented","popupWidth","popupTemplate","popupEvents","titleHeight","align","condFormat","buttonsMap","getFontSize","numbers","fontSize","px","getCellFormats","example","number","getText","getAllElements","calcButtons","groups","$button","insert","ready","selected","barStyles","getBarStyles","dropdowns","getCellStyles","cellStyle","property","splice","updateValue","element","toolbar","allElements","elm","bottombar","toolbarButtons","structure","checkButtons","getButtons","columns","block","blockColumns","bar","$customScroll","viewId","innerId","selectRow","endRow","last","_selectRange","selectAll","firstColumn","selectColumn","endColumn","isColSelected","selectedArea","isCellSelected","isRowSelected","selectColumns","addSelectArea","adjustColumn","columnWidth","getColumnConfig","eachRow","getCellFilter","setColumnWidth","adjustRow","eachColumn","getSpanNode","setRowHeight","highlightColRow","sr","er","sc","ec","removeCellCss","addCellCss","getHeaderNode","removeCss","addCss","lockCss","lockCell","_mapCellsCalls","_locks","isCellLocked","cm","lock","updatePosition","locked","addSpan","extraCss","getExtraCss","setSpanValue","isEmpty","removeSpan","getRange","sel","lx","ly","rx","ry","cx","cy","setSpanCss","borderChecks","adjustSpan","spanData","checkSpan","selection","isFirstCell","pasteSpan","cutted","translate","mapCells","rid","cid","parse","isUndo","undoSpan","checkSpanBorders","isDate","conditions","batch","lastIndexOf","_mData","getStore","getConditionCss","rendered","_empty","collection","get","currentValue","rule","handlers","checkOrder","compare","addEmptyCollection","oldConditions","_pull","clear","rowId","columnId","clearConditionalFormats","_changeCondition","pasteCondition","oldCondition","newCondition","_normalizeValue","createRules","rId","cId","cond","update","newData","_setCondition","type_action","_undoCondition","dragStartColumn","dragEndColumn","showCommentHandler","pointerType","comments","_activeComment","editStatus","locate","visible","commentsView","viewonly","contains","editMath","highlightHeaders","ids","cop","ed","$anyKey","ev","getEditor","finalStep","resizeColumn","cind","dx","posRelative","selectColumnHandler","lastHeaderClick","headerClick","dblClick","lastClickedRow","editStop","getFocus","need_focus","setDefaultCss","leftSplit","areaselect","minColumnWidth","editable","editaction","minRowHeight","navigation","cell_template","_v","valueOnly","invalidDate","helper","_print","clearAll","columnCount","rowCount","el","nms","cssFormat","getRenderedValue","refreshColumns","isMac","f2","edit","del","styleHotKey","ctrlU","ctrlP","attr","elementOn","methodsName","updateEditor","fillEditor","startEdit","symbols","disableEditor","disabled","disable","enable","_rangeDialog","en","pasteRange","updateRange","colon","isEnabled","clearEditor","isActiveCell","getSheetData","getPage","tconfig","frozenColumns","frozenRows","_frozenColumns","_frozenRows","getState","_undoValue","actionMap","_activeSheet","prepare","selectSheet","command","changePagerVisability","changePagerStatus","once","context","dataOrder","num","_sheets","rename","defaultBottom","tabWidth","sheetTabWidth","maxWidth","editValue","webix_ssheet_sheet_arrow","initSheetMenu","$sheetMenu","menuInit","menu","_destroy_with_me","callAction","getMark","disableItem","enableItem","scrollSheets","direction","scrollTo","scrollPos","$width","showBatch","newIndex","getNewTitle","getSheet","addPage","prepareData","newSheet","removePage","changeId","renamePage","invalidValue","linkRegex","_prepareCell","styleProperties","DataStore","sheetName","tabs","_resetTable","Dialog","$dialog","$hide","$show","unescape","DialogBox","box","preview","parseImage","server","images","image","showPreview","upload","onBeforeFileAdd","file","reader","FileReader","onload","getFormView","readAsDataURL","onFileUpload","response","imageURL","onSaveClick","okClick","onCancelClick","fillUrl","addImage","viewid","open","views","els","parseChart","color_def","color_pos","color_neg","renderPreview","visibleBatch","labelPosition","getTypes","alert","checkRange","sparkConfig","addSparkline","clearValidation","selectedCell","getSelectedRange","scope","_updateData","toSheetRange","unshift","validate","oldData","_getScope","updateItem","unselect","_this3","theform","onBeforeSelect","removeRange","editRange","isNotEmpty","onFocus","autoheight","saveClick","getRanges","selectedId","allRanges","nameParts","selectList","rangeVal","Ranges","_master","_normalizeName","_normalizeRange","globalRange","out","global","rangeOptions","getRangePos","unique","empty","objA","objB","sorters","sorting","as","int","nullFilter","$empty","_ssFilters","markBarFilter","getFilters","filters","clearFilters","refilter","filterSpreadSheet","calibrateRange","getFilterRange","isValueActive","includes","isFilterExists","getFilterMode","pasteFilter","setCellFilter","getSingleOption","getConditions","getFilterFunction","opt","on_click","ssheet_filter_sign","on_dblclick","toggleFilters","removeFilters","isFilter","$mode","$filter","syncScroll","_getTargetNode","getFilter","flt","importData","relative","field","inputs","applyFilter","oldValue","setCellStyle","isHidden","nodeOffset","tableOffset","getElementsByClassName","ydiff","xdiff","fillForm","labelsLocale","commonConfig","customConfig","dateConfig","getFormats","updateForm","paddingX","closeWin","isText","$css","_getDatalayout","value2","_formatValue","_isNotDateRule","editFormat","_safeInt","_getCondition","activeValue","dialog","_rulesToArr","current_view","_this4","onBlur","vid","dlayout","getIdByIndex","_this5","maxHeight","getRows","getConditionStyle","conditionStyle","getSheets","filename","restoreValue","paper","fit","sheetnames","modal","vertical","print","_setComment","textarea","onViewResize","animate","showInput","addComment","comment","showTemplate","changeTextarea","getHead","$height","rowHeight","getOption","optionHeight","bases","imt","imc","asw","rgs","dpd","cnd","lnk","pnt","cmt","ignoreUndoReset","restoreHistory","_ssUndoHistory","_ssUndoCursor","addToHistory","$skipHistory","ignoreReset","step","prevData","undoHandlers","nvalue","ovalue","_trackAll","conf","viewMethods","_types","track","_trackOne","_fromRange","_isPie","_removeLegend","legend","fromData","shift","names","_getNames","switchDirection","dataSeries","legendRange","_getParts","_showAll","win","_correctPos","_showOne","_getWidth","_getHeight","each","_isRange","_getDataParts","subdata","getRangeRows","getRangeCols","_getSeries","oldXaxis","dir","vals","xAxis","activeVals","series","firstRange","inActiveSeries","seria","activeVal","marker","_getColor","colors","dataRange","subRange","_normalizeConfig","valign","scale","rangeToData","rind","editUIType","querySelector","register","container","_commands","getConfig","inner","renderConfig","_processTables","query","tables","oldWin","_activeWin","$destructed","_reset","_undoUI","one","viewIds","_genChartConfig","htmlFilter","scaleColor","legendConfig","_pieConfig","pieInnerText","borderColor","lineColor","yAxis","lineShape","circle","chartEditor","handlePieLegend","getLeftColumn","getTopRow","setSilentValue","updateLegendRange","updateXaxisRange","xAxisRange","leftColumn","topRow","exist","updateAlign","updateValign","updateType","getTabbar","switchRowsCols","stacked","hideField","hideBatch","hideOption","showOption","updateSeries","pie","inValues","expand","closeEditor","outValues","activeSkin","barHeight","complexData","addRichselect","getLegendAlign","getLegendValign","attributes","loadChangedData","process","getUpdateValues","_addColumn","addColumn","_delColumn","removeColumn","_addRow","addRow","_delRow","removeRow","updatedData","fixSelectArea","isRowVisible","isColumnVisible","_ssEditors","clearEditors","pasteDropdown","dropdown","styledata","clipdata","updateFilters","getRow","ignore","$popup","tblEditors","isEditor","_clipboardToTable","cdata","fromSheet","cut","transposeMath","clipboard","clipbuffer","buffer","_sel_to_clip","mapSelection","row_ind","delimiter","clipboardDecimalDelimiter","_updateDelimiter","csv","stringify","ctrlKey","metaKey","_get_sel_style","allFiltersInZone","startRow","startCol","endCol","_clip_to_sel","leftTop","_changeDelimiter","record","_add_row_col","maxRow","maxCol","col_ind","subtrans","_hidden_cols_hash","_hidden_rows_hash","setState","indexes","getIds","_showRow","_showColumn","_hideRow","_hideColumn","hash","showColumn","getColumnIndex","hideColumn","_updatePosition","hiddenIndex","hrows","hcols","_adjustRowHeight","spanHeight","textHeight","headerOnly","refreshSelectArea","getColumn","_undoResize","defWidth","defHeight","nsizes","bs","blockStart","blockEnd","res","removeSelectArea","sortRange","fullrange","expandSelection","maxY","maxX","nr1","nr2","nc1","nc2","newrange","by","newMath","updateSheetNames","oldName","stack","option","gridlines","firstVisible","removeComment","getComment","removeCommentsRange","commentCell","_undoComment","modules","m1","m2","m3","m4","m5","m6","m7","uploader","XMLHttpRequest","apiOnly","accept","cellDates","startImport","fileDialog","_buildHtml","doc","xCorrection","baseIndex","sheetname","$customPrint","br","insertBefore","docFooter","_cleanHtml","_safeColor","_getCellStyle","excel","stl","font","alignment","_getExcelCellStyle","_getPdfCellStyle","rgb","fill","fgColor","horizontal","sz","italic","underline","bold","wrapText","getBorderStyles","textAlign","vertAlign","whiteSpace","_getDocStyle","$exportView","pdf","export_mode","defaultOptions","stubCells","footer","heights","rawValues","filterHTML","_exportView","dataOnly","sheetOptions","_hidden","pdfTable","textBefore","sheetData","scheme","_getStyles","cached","cachedConditions","_getDefaults","docHeader","delta","rIndex","cIndex","_getCellConditions","computed","getComputedStyle","bg","_updateStyleCondition","rgbToHex","_updatePdfData","idx","colspan","rowData","exportData","rowSize","pad","paddingTop","paddingBottom","ref","Sheet","Name","Ref","getAutowidth","prop","orientation","$getExportValue","_excel_to_data","dataObj","styleshash","stylescount","_safeFont","va","_getBorderStyles","_getTypes","_getHidden","safe","_parseExcel","driver","full","_parseCsv","getRecords","clearRange","callCommand","setSize","insertRow","deleteRow","insertColumn","deleteColumn","checkSpans","changed","spanSize","changeSpan","getIndexById","hideRow","_normalizeVal","chart","getRangeValue","registerMathMethod","recalculate","setPlaceholder","spn","rangeStr","setRangeValue","addSheet","clearSheet","renameSheet","editSheet","removeSheet","und","srt","correctVal","cb","sameValue","oldType","dateValue","updatedType","param","tbl","ok","resetUndo","groupUndo","changeDecimals","defaultMenu","getMenuData","component","_base_index","getDefaultStyles","_sub_init","_set_handlers","$skin","setSkinDefaults","material","background","subbar","tblObj","attachTo","lists","sizeToContent","getMenuItem","contextMenu","dialogs","viewBases","rows_setter","operations","m9","m10","m11","m12","m13","m14","m16","m8","m17","m16a","m16b","m16c","m18","m19","m20","m21","m22","m23","m24","m25","m26","m27","m28","m29","m30","$onLoad","api","rco","lcl","fcl","hbr","hhd","hrc","mat","ops","cor","sav","cfm","AtomDataLoader"],"mappings":";;;;;;;;uJACAA,MAAMC,KAAKC,YCDI,CACdC,OAAO,QAEI,kBACE,kBACF,iBACC,eACH,cACE,uBACO,0BACA,2BACL,2BACD,oCACO,yBACJ,4BACA,qCAED,iBACL,YACA,YACA,aACC,eACC,gBACA,iBACC,aACL,WACG,eAEC,cACF,aAEC,6BAEa,+BACT,gCACQ,+BACG,iCACF,kCACE,kBAEf,sBACM,4BACD,qBACC,sBACA,uBACC,kBAEJ,mBACG,2BACC,qCACH,wCAEM,iCACD,yBACC,0BACA,6BACG,gCACA,0BAEN,8BACE,kCAEA,+BACA,gCACA,WAEZ,oBAEU,8BACM,6DACN,uBACD,wCACK,iCAEN,uBACD,kBACD,YAEH,yBACQ,8BACD,wBAEP,wBACO,0BACJ,0BAEA,gBACF,+BAEc,gFACA,8EACH,6EACN,gCAEP,sBACM,sCACG,iCACH,4BACC,yBACC,6BACH,uBACD,4BACC,+BACC,+BACF,yBACH,6BACK,mBACJ,2BACA,8BACG,2BACC,8BACE,4BACC,oBAEP,gBAEF,eACC,uBACM,gCACA,+BAEH,qBACE,sBACD,4BAEE,wBACA,wBACA,uBAED,6BACI,iCACA,gCACE,0BAEP,oBACA,mBACD,oBACE,oBACF,oBACE,uBACC,4BACI,4BAEL,uBACC,wBACA,uBACD,4BACM,kCACA,4BACA,0BACF,6CACA,2CACE,6BACC,6BACD,0BACF,yBACC,0BACA,sEAEJ,4BACI,2CACA,iDACE,oCACA,4BACD,4BACC,8BACC,+BACA,oCACH,4BACG;sBACA,sBAET,uBACG,wBACF,6BACO,mBACV,wBACE,uBACG,yBACF,2BAEI,mCACF,uBACH,uBAEG,iCACO,kCACE,mCACD,gCACF,yBAEL,oCACF,0BAEM,iBAEtBC,SAAU,OACA,wBACK,iCACC,0BACF,yBACC,oCACI,yBACP,uBACG,+BACE,4BACD,6BACE,gCACC,8BACH,8BACE,qCACK,yCACL,4BACH,4BACE,6BACD,0BACF,2BACG,8BACA,oBACR,aACA,iBACA,YACA,cACE,oCACU,8CACA,wCACL,oBACD,2BACK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"}